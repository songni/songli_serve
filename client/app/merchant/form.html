<form class="form-horizontal" name="form" ng-submit="post(form)" novalidate>
  <div class="form-group" ng-class="{ 'has-success': form['info.name'].$valid && submitted,
                                      'has-error' : form['info.name'].$invalid && submitted }">
    <label for="info.name" class="col-sm-2 hidden-xs control-label">商家名称</label>
    <div class="col-sm-10">
      <input type="text" name="info.name" class="form-control" placeholder="请输入商家名字"
            ng-model="merchant.info.name"
            required
            mongoose-error />
      <p ng-show="form['info.name'].$error.required && form['info.name'].$pristine && submitted" class="help-block">
      商家名称必须填写.
      </p>
      <p class="help-block" ng-show="form['info.name'].$error.mongoose">
        {{ errors['info.name'] }}
      </p>
    </div>
  </div>
  <div class="form-group" ng-class="{ 'has-success': form['info.address'].$valid && submitted,
                                      'has-error' : form['info.address'].$invalid && submitted}">
    <label for="info.address" class="col-sm-2 hidden-xs control-label">地 址</label>
    <div class="col-sm-10">
      <input type="text" name="info.address" class="form-control" placeholder="请输入商家地址"
            ng-model="merchant.info.address"
            required
            mongoose-error />
      <p ng-show="form['info.address'].$error.required && form['info.address'].$pristine && submitted" class="help-block">商家地址必须填写.</p>
      <p class="help-block" ng-show="form['info.address'].$error.mongoose">
        {{ errors['info.address'] }}
      </p>
    </div>
  </div>
  <div class="form-group" ng-class="{ 'has-success': form['info.detail'].$valid && submitted,
                                      'has-error' : form['info.detail'].$invalid && submitted}">
    <label for="info.detail" class="col-sm-2 hidden-xs control-label">商家介绍</label>
    <div class="col-sm-10">
      <textarea type="text" name="info.detail" class="form-control" placeholder="请输入商家简介"
            ng-model="merchant.info.detail"
            required
            mongoose-error></textarea>
      <p ng-show="form['info.detail'].$error.required && form['info.detail'].$pristine && submitted" class="help-block">商家介绍必须填写.</p>
      <p class="help-block" ng-show="form['info.detail'].$error.mongoose">
        {{ errors['info.detail'] }}
      </p>
    </div>
  </div>
  <div class="form-group" ng-class="{ 'has-success': form['info.linkman'].$valid && submitted,
                                      'has-error': form['info.linkman'].$invalid && submitted }">
    <label for="info.linkman" class="col-xs-2 control-label">联系人</label>
    <div class="col-xs-10">
    <input type="text" name="info.linkman" class="form-control"
           placeholder="请输入联系人姓名"
           ng-model="merchant.info.linkman"
           required/>
    <p class="help-block" ng-show="form['info.linkman'].$error.required && submitted">
      姓名必须填写
    </p>
      <p class="help-block" ng-show="form['info.linkman'].$error.mongoose">
        {{ errors['info.linkman'] }}
      </p>
    </div>
  </div>
  <div class="form-group" ng-class="{ 'has-success': form['info.telephone'].$valid && submitted,
                                      'has-error': form['info.telephone'].$invalid && submitted }">
    <label for="info.telephone" class="col-xs-2 control-label">手机号</label>
    <div class="col-xs-10">
    <input type="text" name="info.telephone" class="form-control"
           placeholder="请输入联系人手机号"
           ng-model="merchant.info.telephone"
           required
           phone/>
    <p class="help-block" ng-show="form['info.telephone'].$error.required && submitted">
      手机号必须填写
    </p>
    <p class="help-block" ng-show="form['info.telephone'].$error.phone">
      手机号格式不正确
    </p>
    <p class="help-block" ng-show="form['info.telephone'].$error.mongoose">
      {{ errors['info.telephone'] }}
    </p>
    </div>
  </div>
  <div class="form-group" ng-class="{ 'has-success': aggrement === 'YES' && submitted,
                                      'has-error': aggrement === 'NO' && submitted }" ng-if="!merchant.id">
    <label for="aggrement" class="control-label col-xs-2">商户协议</label>
    <div class="col-xs-8">
      <div class="checkbox">
        <label>
         <div class="checker">
           <span class="checked">
            <input class="uniform" name="aggrement" type="checkbox" ng-model="aggrement" ng-true-value="'YES'" ng-false-value="'NO'">
           </span>
         </div><a href="" ng-click="agmMdl()">使用协议</a>
        </label>
      </div>
      <p class="help-block" ng-show="aggrement === 'NO' && submitted">
      请确认是否同意商户协议。
      </p>
    </div>
  </div>
  <div class="text-center">
    <button class="btn btn-primary btn-login" type="submit" ng-disabled="form.$invalid || isUnchanged(merchant)">
      {{merchant.id?'保存修改':'提交申请'}}
    </button>
  </div>
</form>
