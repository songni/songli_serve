"use strict";angular.module("serveApp",["serveApp.constants","ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","ui.select","restangular","ncy-angular-breadcrumb","angularMoment","ui.tinymce","angularFileUpload","monospaced.qrcode","ngClipboard","ngCsv","bootstrap.fileField","ngHolder","monospaced.elastic","checklist-model","ksSwiper"]).config(["appConfig","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$logProvider","RestangularProvider","$breadcrumbProvider","ngClipProvider","uiSelectConfig",function(e,t,i,n,s,a,o,l,r,c){i.otherwise("/"),n.html5Mode(!0),s.defaults.useXDomain=!0,delete s.defaults.headers.common["X-Requested-With"],a.debugEnabled("enable"),c.theme="bootstrap",c.resetSearchInput=!0,c.appendToBody=!0,tinyMCE.baseURL="/bower_components/tinymce-dist",r.setPath("/bower_components/zeroclipboard/dist/ZeroClipboard.swf")}]).run(["appConfig","$rootScope","$location","$cookieStore","$log","$state","$window","Restangular","RestWecom","Alert","$uibModal",function(e,t,i,n,s,a,o,l,r,c,d){t.appConfig=window.config=e,e.clientUri=i.host().replace("www.dev.","").replace("www.","");var p=e.app[i.host()],m=p.api;!m&&(m=e.uri),l.setBaseUrl(m),t.app=p,t.phtUri="https://photo.91pintuan.com",t.phtStl320160="@1e_1c_0o_0l_399sh_160h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=8&t=63&s=58&color=I2U2ZGVkZQ&p=9&y=5&x=5",t.phtStl320="@1e_1c_0o_0l_399sh_320h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=12&t=52&s=57&color=I2ZmZmZmZg&p=9&y=5&x=5",t.phtStl120="@1e_1c_0o_0l_100sh_120h_120w_90q.src",t.$on("$stateChangeError",console.log.bind(console)),l.setErrorInterceptor(function(t,i,s){if(401===t.status&&(n.remove("token"),l.setDefaultHeaders({"X-API-From":e.from}),l.setDefaultHeaders({"X-Component":e.component})),t.data instanceof ArrayBuffer){var a=new TextDecoder("utf-8").decode(new Uint8Array(t.data)),o=JSON.parse(a);return void c.add("danger",o.errmsg)}t.data&&t.data.errmsg?c.add("danger",t.data.errmsg):c.add("danger","系统错误")}),l.addResponseInterceptor(function(e,t,i,s,a,o){return 205===a.status&&(n.remove("token"),c.add("warning","刷新重新加载本地内容！"),location.reload()),e});var u={"X-API-From":e.from,"X-Component":e.component};l.setDefaultHeaders(u),n.get("token")&&(u.Authorization=n.get("token"),l.setDefaultHeaders(u),r.one("auth").one("info").get().then(function(e){return t.wxUser=e,e.pay_config?void(t.isVerify=e.verify):a.go("bambu.contact")})),t.$on("$stateChangeStart",function(e,t){t.authenticate&&!n.get("token")&&i.path("/login")}),t.$on("$stateChangeSuccess",function(e,i){document.body.scrollTop=document.documentElement.scrollTop=0,t.innerHeight=1300;var n=t.wxUser?t.wxUser.astrict:"ok";t.wxUser?t.wxUser.num:{};_.includes(i.name,"plans")||_.includes(i.name,"bambu")||"ok"===n||d.open({templateUrl:"app/main/null.html",controller:"NullModalCtrl"})})}]),angular.module("serveApp").controller("AlbumCtrl",["$scope",function(e){e.message="Hello"}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("album",{url:"/album",templateUrl:"app/album/album.html",controller:"AlbumCtrl"})}]),angular.module("serveApp").service("RestAlbum",["Restangular",function(e){return e.service("album")}]),function(e,t){e.module("serveApp.constants",[]).constant("appConfig",{uri:"http://api.91songli.cc",uriImg:"https://img.91pintuan.com",uriPht:"https://photo.91pintuan.com",style:{phtStl320160:"@1e_1c_0o_0l_399sh_160h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=8&t=63&s=58&color=I2U2ZGVkZQ&p=9&y=5&x=5",phtStl320:"@1e_1c_0o_0l_399sh_320h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=12&t=52&s=57&color=I2ZmZmZmZg&p=9&y=5&x=5",phtStl120:"@1e_1c_0o_0l_100sh_120h_120w_90q.src"},component:"5581117b5f225e4c401c9259",debug:!1,from:"merchant",commodity:{status:{paytype:"fullpay",collection:0,qrcode:!1,address:!1,shelf:!0,type:1,virtual:1},time:{start:"2017-02-24 17:18",end:"2017-04-24 17:08"},money:{price:0,discount:0,days:1,hours:0,minutes:0,partakers:2,commission:0,prepayment:100,piece:0,stock:0},pois:[],sku:[],stocks:[],logistic:{headReceive:"0",type:"0",uniformFreight:0},consumeType:"0",poitag:{id:"574e8ee63027e17c4b56c0bc",name:"全部门店",num:0},virtualComm:{consumeCredentialType:0}},allPoiObj:{id:"574e8ee63027e17c4b56c0bc",name:"全部门店",num:0},tinymceOptions:{language:"zh_CN",baseURL:"https://img.91pintuan.com/bower_components/tinymce",language_url:"https://img.91pintuan.com/serve/tinymce.zh_CN.js",convert_urls:!1,menubar:!1,content_css:"https://img.91pintuan.com/serve/tinymce.css",plugins:["textcolor link image insertdatetime paste code emoticons preview autoresize"],toolbar_items_size:"small",toolbar:" bold italic underline | bullist numlist | alignleft aligncenter alignright alignjustify | forecolor backcolor fontsizeselect | link image emoticons insertdatetime | removeformat undo redo | code preview",fontsize_formats:"8pt 10pt 12pt 14pt 16pt 18pt 24pt 36pt",statusbar:!1,resize:!0,width:"100%",autoresize_min_height:394,autoresize_max_height:1e3,insertdatetime_formats:["%Y年%m月%d号","%H点%M分"],object_resizing:!1,image_description:!1,image_dimensions:!1,image_class_list:[{title:"默认",value:"img-responsive"},{title:"圆角",value:"img-rounded"},{title:"圆形",value:"img-circle"},{title:"边框",value:"img-thumbnail"}],file_picker_types:"image"},app:{"www.dev.songni.cc":{api:"http://apidev.91songli.cc",name:"91送礼开发版",wechat:"91送礼",telephone:"010-84988362",icp:"京ICP证060911",suffix:".def"},"www.91songli.cc":{api:"https://api.91songli.cc",name:"91送礼",wechat:"91送礼",telephone:"010-84988362",icp:"京ICP证060911",suffix:".def"},"www.91songli.com":{api:"https://api.91songli.com",name:"91送礼",wechat:"91送礼",telephone:"010-84988362",icp:"京ICP证060911",suffix:".def"},"www.dalibao.com":{api:"http://api.dalibao.com",name:"大礼包",wechat:"村村乐",telephone:"010-51692648",icp:"京公网安备11010102001340号",suffix:".cuncunle"}}})}(angular),angular.module("serveApp").controller("BambuCtrl",["$scope","$rootScope","$cookies","Merchant",function(e,t,i,n){t.title="自助服务",i.get("vecter")&&(e.merchant={},e.merchant={info:{agent:i.get("vecter")}}),n.get().then(function(t){t.info||(t.info={}),!t.info.agent&&i.get("vecter")&&(t.info.agent=i.get("vecter")),e.merchant=t})}]).controller("BambuContactCtrl",["$scope","$rootScope","$state","$uibModal","Merchant",function(e,t,i,n,s){t.title="完善商家信息",e.aggrement="YES",e.submitted=!1,e.agmMdl=function(){n.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"agreement"}}})},e.master={},e.isUnchanged=function(t){return angular.equals(t,e.master)},e.post=function(t){return e.submitted=!0,e.master=angular.copy(e.merchant),"NO"!==e.aggrement&&(!t.$invalid&&void(e.merchant.id?e.merchant.put().then(function(){i.go("bambu.config.pay")}):s.post("",e.merchant).then(function(){i.go("bambu.config.pay")})))}}]).controller("BambuServiceCtrl",["$scope","$rootScope","$uibModal","$state","Merchant",function(e,t,i,n,s){s.get().then(function(e){e&&e.id||n.go("bambu.contact")}),t.title="选择服务方式",e.bambu={service:"self"},e.svcArr={deploy:"客服配置服务",counselor:"客服顾问服务"},e.dltSltSvc=function(){e.bambu.service=""},e.start=function(){var t=e.bambu.service;"self"===t&&n.go("bambu.config.pay"),"deploy"===t&&n.go("plans.service",{type:t,from:"bambu"}),"counselor"===t&&n.go("plans.counselor")},e.howtoMdl=function(){i.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"merchantHelp"}}})}}]).controller("BambuConfigCtrl",["$scope","$rootScope","$state","$uibModal","Restangular",function(e,t,i,n,s){t.title="公众号配置",s.service("wechat/pay").one().get().then(function(t){e.pay=t}),e.submitted=!1,e.post=function(t){if(e.submitted=!0,t.$invalid)return!1;if(!$("input[type=file]")[0].files[0])return void alert("请上传资质证书！");var i=new FormData;i.append("mch_id",e.pay.mch_id),i.append("key",e.pay.key),i.append("pfx",$("input[type=file]")[0].files[0]),e.pay.withHttpConfig({transformRequest:angular.identity}).customPOST(i,void 0,void 0,{"Content-Type":void 0}).then(function(){e.popup(function(){location.href="/"})})},e.popup=function(e){var t=n.open({templateUrl:"app/main/main.popup.html",controller:"MainCtrl",resolve:{type:function(){return"agreement"}}});t.result.then(e,e)},e.howtoMdl=function(){n.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"agreement"}}})}}]).controller("BambuCounselorCtrl",function(){}),angular.module("serveApp").config(["$stateProvider",function(e){e.state("bambu",{url:"/bambu",templateUrl:"app/bambu/bambu.html",controller:"BambuCtrl",authenticate:!0,ncyBreadcrumb:{label:"自助服务",ico:"stethoscope"}}).state("bambu.contact",{url:"/contact",templateUrl:"app/bambu/bambu.contact.html",controller:"BambuContactCtrl",authenticate:!0,ncyBreadcrumb:{label:"填写商家信息"}}).state("bambu.config",{url:"/config",template:"<ui-view/>",controller:"BambuServiceCtrl",authenticate:!0,ncyBreadcrumb:{label:"选择服务方式"}}).state("bambu.config.pay",{url:"/pay",templateUrl:"app/bambu/bambu.config.pay.html",controller:"BambuConfigCtrl",authenticate:!0,ncyBreadcrumb:{label:"公众号配置"}}).state("bambu.counselor",{url:"/counselor",templateUrl:"app/bambu/bambu.counselor.html",controller:"BambuCounselorCtrl",authenticate:!0,ncyBreadcrumb:{label:"客服顾问服务"}})}]),angular.module("serveApp").controller("BigpackOrderListCtrl",["$scope","$rootScope","$uibModal","RestOrderGift",function(e,t,i,n){e.itemsPerPageArr=[10,20,50,100,200],e.chgPerPage=function(){e.pagi.itemsPerPage=(void 0).page},e.status={online:"",nickname:null},e.findByNickame=function(){e.pagi.nickname=e.status.nickname},e.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10,nickname:null},e.$watchCollection("[status.online,pagi.currentPage,pagi.itemsPerPage,pagi.nickname]",function(t){n.one("count").get({online:t[0],nickname:t[3],"status.bigpack":"true"}).then(function(t){e.pagi.totalItems=t}),n.getList({online:t[0],page:t[1],limit:t[2],nickname:t[3],"status.bigpack":"true"}).then(function(t){e.orders=t})}),e.modalStartVideo=function(){i.open({templateUrl:"app/bigpack/video.html",size:""})},e.modalBigpackLink=function(e){i.open({templateUrl:"app/bigpack/bigpack.order.link.modal.html",controller:"BigpackOrderLinkCtrl",size:"",resolve:{order:function(){return e}}})},e.countShipping=function(e){var t=0;return e.receivers.forEach(function(e){e.status.shipping&&t++}),t}}]).controller("BigpackOrderDetailCtrl",["$scope","RestOrderGift","$rootScope","order","$uibModal","$log","RestExp","RestSuborder",function(e,t,i,n,s,a,o,l){i.title="礼包详情",e.order=n,e.order.shipping=n.receivers.filter(function(e){return e.status.shipping}).length,o.one("company").get().then(function(t){e.companies=t}),e.shippingModel=function(t){var i=s.open({animation:!0,templateUrl:"app/gift/gift.order.shipping.html",controller:"GiftOrderShippingCtrl",resolve:{order:function(){return e.order},companies:function(){return e.companies},receiver:function(){return t}}});return i.result.then(function(e){t.status.shipping=e},function(){a.info("在: "+new Date+"解散模")}),!1},e.exportSuborders=function(){l.one("export").one("orders").withHttpConfig({responseType:"arraybuffer"}).get({order:e.order.id}).then(function(t){try{var i=new Blob([t],{type:"application/vnd.openxmlformats"});saveAs(i,e.order.id+".xlsx")}catch(n){console.warn(n)}})},e.exportCards=function(){var e=this.order;!e.receivers||!e.receivers.length||e.receivers.filter(function(e){return e.telephone}).length<=0||t.one("export").one("cards").one(e.id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(t){var i=new Blob([t],{type:"application/octet-stream;charset=utf-8"});saveAs(i,e.serial+".zip")})},e.exportCard=function(i){i.card?l.one(i.id||i._id).one("export").one("card").withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(e){var t=new Blob([e],{type:"image/png"});saveAs(t,i._id||i.id+".png")}):t.one("export").one("card").one(i.order.id||i.order._id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(t){var i=new Blob([t],{type:"image/png"});saveAs(i,e.order.serial+".png")})}}]).controller("BigpackOrderLinkCtrl",["$scope","$rootScope","$sce","order",function(e,t,i,n){e.order=n;var s=t.wxUser.uri+"/bigpack/"+n.id;e.text=s,e.url=i.trustAsResourceUrl(s),e.getTextToCopy=function(){return e.text},e.doSomething=function(){alert("复制成功！")}}]).controller("BigpackOrderAddCtrl",["$scope","$rootScope","$state","$uibModal","RestGift","Alert",function(e,t,i,n,s,a){e.order={},e.modalCommodity=function(){n.open({templateUrl:"app/bigpack/bigpack.commodities.modal.html",controller:"BigpackCommoditiesCtrl",size:"lg",resolve:{order:function(){return e.order}}})},e.$watch("order.capacity",function(t){return e.checkStock(e.order)}),e.checkStock=function(t){var i=t.gift;return i&&i.num&&i.num.stock>0&&t.capacity>i.num.stock?(e.stockError=!0,!0):(e.stockError=!1,!1)},e.modalConfirm=function(){var e=n.open({templateUrl:"app/bigpack/bigpack.order.add.confirm.html",controller:"BigpackOrderAddConfirmCtrl",size:""});return e},e.post=function(){return e.submitted=!0,!e.bigpackOrderAddForm.$invalid&&(!e.checkStock(e.order)&&void e.modalConfirm().result.then(function(t){s.one(e.order.gift.id).one("order/preorder").post(null,e.order).then(function(t){a.add("success",t),e.submitted=!1,i.go("bigpack.list")})}))}}]).controller("BigpackOrderAddConfirmCtrl",["$scope","$uibModalInstance",function(e,t){e.cancel=function(){return t.dismiss("cancel")},e.submit=function(){return t.close("submit")}}]).controller("BigpackCommoditiesCtrl",["$scope","$uibModalInstance","RestGift","Alert","order",function(e,t,i,n,s){e.selectedGift=null,e.chgPerPage=function(){e.pagi.itemsPerPage=(void 0).page},e.status={online:!0,name:null},e.findByName=function(){e.pagi.name=e.status.name},e.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10,name:null},e.$watchCollection("[status.online,pagi.currentPage,pagi.itemsPerPage,pagi.name]",function(t){i.one("count").get({online:t[0],name:t[3]}).then(function(t){e.pagi.totalItems=t}),i.getList({online:t[0],page:t[1],limit:t[2],name:t[3]}).then(function(t){e.gifts=t})}),e.selectCommodity=function(t){e.selectedGift=t},e.submit=function(){s.gift=e.selectedGift,t.dismiss("cancel")}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("bigpack",{"abstract":!0,url:"/bigpack",template:"<ui-view/>",authenticate:!0,ncyBreadcrumb:{label:"大客户礼包"}}).state("bigpack.list",{url:"/list",templateUrl:"app/bigpack/bigpack.order.list.html",controller:"BigpackOrderListCtrl",authenticate:!0,ncyBreadcrumb:{label:"大客户礼包"}}).state("bigpack.add",{url:"/add",templateUrl:"app/bigpack/bigpack.order.add.html",controller:"BigpackOrderAddCtrl",authenticate:!0,ncyBreadcrumb:{label:"新建礼包"}}).state("bigpack.detail",{url:"/:id",templateUrl:"app/bigpack/bigpack.order.detail.html",controller:"BigpackOrderDetailCtrl",authenticate:!0,ncyBreadcrumb:{label:"礼包详情"},resolve:{order:["$stateParams","RestOrderGift",function(e,t){return t.one(e.id).get()}]}})}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("breadcrumb",{url:"/breadcrumb",templateUrl:"app/breadcrumb/breadcrumb.html",controller:"BreadcrumbCtrl"})}]),angular.module("serveApp").controller("DocumentCtrl",["$scope",function(e){e.title="文档管理"}]).controller("DocumentModalCtrl",["$scope","$uibModalInstance","$sce","RestDoc","type",function(e,t,i,n,s){s=s||"doc",n.one(s).get().then(function(t){t.document=i.trustAsHtml(t.document),e.document=t}),e.cancel=function(){t.dismiss("cancel")}}]).service("RestDocument",["Restangular",function(e){return e.service("document")}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("document",{url:"/document",templateUrl:"app/document/document.html",controller:"DocumentCtrl"})}]),angular.module("serveApp").service("RestDoc",["Restangular",function(e){return e.service("document")}]),angular.module("serveApp").directive("stockValidate",function(){return{require:"ngModel",link:function(e,t,i,n){function s(e){if(o){var t=0,i=l;return t&&n.$setValidity("smin",e>=t),i&&n.$setValidity("smax",e<=i),r=e>=t&&e<=i}if(0==e)return n.$setValidity("smin",!0),n.$setValidity("smax",!0),r=!0;var s=a.num.subpay||a.num.receivers||0,c=l;s&&n.$setValidity("smin",e>=s),c&&n.$setValidity("smax",e<=c);var d=e>=s&&e<=c;return d}var a=JSON.parse(i.stockValidate),o=!a.id,l=999999,r=!1;n.$parsers.unshift(function(e){var t=s(e);return t?e:void 0}),n.$formatters.unshift(function(e){return e&&s(e),e})}}}).controller("GiftCtrl",["$scope","$rootScope",function(e,t){t.title="礼物管理"}]).controller("GiftPostCtrl",["$scope","$rootScope","$state","$stateParams","$uibModal","appConfig","RestGift","RestAlbum","RestCate","Alert","gift",function(e,t,i,n,s,a,o,l,r,c,d){var p=e.wxUser?e.wxUser.num.poi:0,m={id:"574e8ee63027e17c4b56c0bc",name:"全部门店",num:p};t.title="发布礼物",n.id&&(e.gift=d),e.gift||(e.gift={poitag:m,status:{type:1,logistics:!0}});var u=d&&d.num&&d.num.stock,g=function(){return!!(e.gift.id&&e.gift.num.pay>0&&e.gift.num.stock>u)};e.gift.poitag||(e.gift.poitag=m),e.gift.status.poi&&(e.consumeType={type:"poi"}),e.gift.status.logistics&&(e.consumeType={type:"logistics"}),e.gift.id&&e.gift.num.pay>0&&(e.isAllowUpdate=!0),e.$watch("consumeType.type",function(t){var i=["poi","logistics"],n=e.gift.status;i.forEach(function(e){n[e]=e===t})}),e.submitted=!1,e.config=config,e.tinymceOptions={},_.assign(e.tinymceOptions,{contenteditable:!1},_.omit(a.tinymceOptions,"baseURL"),{language_url:"/assets/i18n/tinymce.zh_CN.js",skin_url:"/bower_components/tinymce-dist/skins/lightgray",content_css:"/assets/css/tinymce.css",file_picker_callback:function(e,t,i){"image"===i.filetype&&$("<input />").attr({type:"file",name:"file"}).trigger("click").change(function(){var t=new FormData,i=$(this)[0].files[0];t.append("file",i),e("上传中，请稍后...",{alt:"上传中"}),l.one("up").withHttpConfig({transformRequest:angular.identity}).customPOST(t,void 0,void 0,{"Content-Type":void 0}).then(function(t){t.link&&e(t.link,{alt:t.name})})})}}),e.post=function(){if(e.submitted=!0,e.giftForm.$invalid)return!1;'<p><br data-mce-bogus="1"></p>'===e.gift.info.detail&&(e.gift.info.detail="");var t=new FormData;t.append("name",e.gift.info.name),t.append("price",e.gift.info.price),t.append("stock",e.gift.num&&e.gift.num.stock?e.gift.num.stock:0),t.append("poetry",e.gift.info.poetry?e.gift.info.poetry:""),t.append("detail",e.gift.info.detail?e.gift.info.detail:""),t.append("lead",e.gift.info.lead?e.gift.info.lead:""),t.append("cover",e.uploadFile),t.append("poitag",e.gift.poitag?JSON.stringify(e.gift.poitag):""),t.append("status",e.gift.status?JSON.stringify(e.gift.status):""),t.append("logistics",e.gift.logistics),t.append("append",!!g()||""),e.gift.info.benedictory&&t.append("benedictory",JSON.stringify(e.gift.info.benedictory)),n.id?e.gift.withHttpConfig({transformRequest:angular.identity}).customPUT(t,void 0,void 0,{"Content-Type":void 0}).then(function(t){c.add("success",t.message),e.submitted=!1,i.go("gift.detail.qrcode",{id:n.id})}):o.one().withHttpConfig({transformRequest:angular.identity}).customPOST(t,void 0,void 0,{"Content-Type":void 0}).then(function(t){c.add("success",t.message),e.submitted=!1,i.go("gift.detail.qrcode",{id:t.id})})};var b=function(){r.getList({type:"poi_tag"}).then(function(t){t=t.plain();for(var i in t){var n=t[i];n.group="门店分组",t[i]=n}t.unshift(m),e.poitags=t})};b(),e.modalPoiTag=function(e){var t=s.open({templateUrl:"app/poi/poi.tags.modal.html",controller:"PoiListCtrl",size:"lg",resolve:{tag:function(){return e}}});t.result.then(function(){return b()},function(){return b()})},e.selPoiTagCB=function(t,i){0===i.num&&(e.modalPoiTag(i),"574e8ee63027e17c4b56c0bd"!==i.id&&(c.add("danger","【"+i.name+"】分组没有门店,请设置！"),e.gift.poitag=m))}}]).controller("GiftListCtrl",["$scope","$rootScope","RestGift","Alert",function(e,t,i,n){t.title="礼物列表",t.ico="list-alt",e.giftorders=[],e.chgPerPage=function(){e.pagi.itemsPerPage=this.page},e.status={online:"",name:null},e.findByName=function(){e.pagi.name=e.status.name},e.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10,name:null},e.$watchCollection("[status.online,pagi.currentPage,pagi.itemsPerPage,pagi.name]",function(t){i.one("count").get({online:t[0],name:t[3]}).then(function(t){e.pagi.totalItems=t}),i.getList({online:t[0],page:t[1],limit:t[2],name:t[3]}).then(function(t){e.gifts=t})}),e.offShelf=function(){var e=confirm("确认下架吗？"),t=this.gift;return e!==!1&&(t.status.online=!1,void t.one("offshelf").put().then(function(e){n.add("success",e.message)}))}}]).controller("GiftQrcodeCtrl",["$scope","$rootScope","$sce","gift","RestWechat",function(e,t,i,n,s){t.title="礼物链接二维码";var a=t.wxUser.uri+"/gift/"+n.id;e.text=a,e.url=i.trustAsResourceUrl(a),e.getTextToCopy=function(){return e.text},e.doSomething=function(){alert("复制成功！")}}]).controller("GiftOrderCtrl",["$state","$scope","$rootScope","$log","$uibModal","RestOrderGift","RestExp","Alert",function(e,t,i,n,s,a,o,l){i.title="订单管理",i.ico="list-alt",t.giftorders=[],t.forms={},t.itemsPerPageArr=[10,20,50,100,200],t.chgPerPage=function(e){t.pagi.itemsPerPage=e},t.clientUri=config.clientUri,t.status={shipping:"",pay:!0,checked:!1,startTime:null,endTime:null,startTimePopup:{opened:!1},endTimePopup:{opened:!1},order:"",serial:""},t.altInputFormats=["M!/d!/yyyy"],t.openStarttimePopup=function(){t.status.startTimePopup.opened=!0},t.openEndtimePopup=function(){t.status.endTimePopup.opened=!0},t.searchByCondition=function(){return t.forms.orderForm.$invalid?(t.submitted=!0,!1):t.status.startTime&&!t.status.endTime?void l.add("danger","请填写结束时间"):t.status.endTime&&!t.status.startTime?void l.add("danger","请填写起始时间"):t.status.endTime&&t.status.startTime&&!moment(t.status.startTime).isBefore(t.status.endTime)?void l.add("danger","起始时间必须小于结束时间"):(t.pagi.startTime=t.status.startTime,t.pagi.endTime=t.status.endTime,t.pagi.order=t.status.order,void(t.pagi.serial=t.status.serial))},t.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10},t.countShipping=function(e){var t=0;return e.receivers.forEach(function(e){e.status.shipping&&t++}),t},t.$watchCollection("[status.shipping,status.pay,pagi.currentPage,pagi.itemsPerPage,pagi.startTime,pagi.endTime,pagi.order,status.finish, pagi.serial]",function(e){t.giftorders=[],a.one("count").get({shipping:e[0],pay:e[1],startTime:e[4],endTime:e[5],order:e[6],finish:e[7],serial:e[8],"status.bigpack":!1}).then(function(e){t.pagi.totalItems=e}),a.getList({shipping:e[0],pay:e[1],page:e[2],limit:e[3],startTime:e[4],endTime:e[5],order:e[6],finish:e[7],serial:e[8],"status.bigpack":!1}).then(function(e){t.orders=e})}),t.qrcodeModel=function(){var e=this.order.id,t=this.order.sender.info.nickname,i=this.order.receiver.name;return s.open({templateUrl:"app/gift/gift.order.qrcode.html",controller:"GiftOrderQrcodeCtrl",size:"sm",resolve:{orderId:function(){return e},saveas:function(){return t+"送给"+i+"的声音二维码.png"}}}),!1},t.wxQrcodeModel=function(){var e=this.order.id;this.order.sender.info.nickname,this.order.receiver.name;return s.open({templateUrl:"app/gift/gift.order.wx.qrcode.html",controller:"GiftWxOrderQrcodeCtrl",size:"sm",resolve:{orderId:function(){return e}}}),!1},t.detailModel=function(){var e=this.order;return s.open({animation:!0,templateUrl:"app/gift/gift.order.detail.html",controller:"GiftOrderDetailCtrl",resolve:{order:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return e})}}),!1},t.shipping=function(){var e=confirm("确认发货吗？");return e!==!1&&(this.order.status.shipping=!0,void a.one(this.order.id).one("shipping").put().then(function(e){l.add("success",e.message)}))},o.one("company").get().then(function(e){t.companies=e}),t.exportCard=function(){a.one("export").one("card").one(order.id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(e){var t=new Blob([e],{type:"image/png"});saveAs(t,order.serial+".png")})},t.exportOrders=function(){a.one("export").one("orders").withHttpConfig({responseType:"arraybuffer"}).get({shipping:t.status.shipping,pay:t.status.pay,page:t.pagi.currentPage,limit:t.pagi.itemsPerPage}).then(function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats"});saveAs(t,"Orders.xlsx")})},t.exportCards=function(){a.one("export").one("cards").withHttpConfig({responseType:"arraybuffer"}).get({shipping:t.status.shipping,pay:t.status.pay,page:t.pagi.currentPage,limit:t.pagi.itemsPerPage,ext:"wx"}).then(function(e){if(!e.byteLength)return void l.add("danger","无可用语音码");var t=new Blob([e],{type:"application/octet-stream;charset=utf-8"});saveAs(t,"语音卡.zip")})}}]).controller("GiftOrderDetailCtrl",["$scope","$rootScope","$stateParams","$uibModal","order","RestOrderGift","RestSuborder","Alert","$log",function(e,t,i,n,s,a,o,l,r){t.title="订单详情",e.order=s,e.order.shipping=0,s.receivers.forEach(function(t){t.status.shipping&&e.order.shipping++}),e.config=config,e.order.url="http://"+t.wxUser.appid+"."+config.clientUri+"/gift/listen/"+s.id,e.shippingAll=function(){var e=this.order;a.one(e.id).put().then(function(e){l.add("success",e.message)},function(e){l.add("error","设置失败！"),r.error("RestOrderGift",e)})},e.shippingModel=function(t){var i=n.open({animation:!0,templateUrl:"app/gift/gift.order.shipping.html",controller:"GiftOrderShippingCtrl",resolve:{order:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return s}),companies:function(){return e.companies},receiver:function(){return t}}});return i.result.then(function(e){t.status.shipping=e},function(){r.info("在: "+new Date+"解散模")}),!1},e.exportCards=function(){var e=this.order;!e.receivers||!e.receivers.length||e.receivers.filter(function(e){return e.telephone}).length<=0||a.one("export").one("cards").one(e.id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(t){var i=new Blob([t],{type:"application/octet-stream;charset=utf-8"});saveAs(i,e.serial+".zip")})},e.exportCard=function(t){t.card?o.one(t.id||t._id).one("export").one("card").withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(e){var i=new Blob([e],{type:"image/png"});saveAs(i,t._id||t.id+".png")}):a.one("export").one("card").one(t.order.id||t.order._id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(t){var i=new Blob([t],{type:"image/png"});saveAs(i,e.order.serial+".png")})}}]).controller("GiftOrderQrcodeCtrl",["$scope","$rootScope","$uibModalInstance","orderId","saveas",function(e,t,i,n,s){e.url="http://"+t.wxUser.appid+"."+config.clientUri+"/gift/listen/"+n,e.saveas=s,e.cancel=function(){i.dismiss("cancel")}}]).controller("GiftWxOrderQrcodeCtrl",["$scope","$rootScope","$uibModalInstance","RestGift","orderId",function(e,t,i,n,s){n.one("wx_qrcode").one(s).get().then(function(t){e.qrcode_ticket=t}),e.cancel=function(){i.dismiss("cancel")}}]).controller("GiftOrderShippingCtrl",["$scope","$uibModalInstance","Alert","RestOrderGift","order","companies","$log","receiver",function(e,t,i,n,s,a,o,l){e.express={companies:a},e.exp={type:0},e.order=s,e.receiver=l,e.submitted=!1,e.cancel=function(){t.dismiss("cancel")},e.shipping=function(){if(!l)return i.add("warn","一键发货，暂不支持");if(e.submitted=!0,!e.giftOrderShippingForm||!e.giftOrderShippingForm.$invalid){var a=n.one(s.id).one(l.id),r=null;"logistics"===e.receiver.scene?0==e.exp.type?r=a.customPUT({express:{no:e.exp.no,type:e.exp.type,company:{id:e.exp.company.id,name:e.exp.company.name}}}):1==e.exp.type&&(r=a.customPUT({express:{type:e.exp.type}})):r=a.put(),r.then(function(e){i.add("success",e.message),t.close(!0)},function(e){i.add("error","设置失败！"),o.error("RestOrderGift",e)})}}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("gift",{"abstract":!0,url:"/gift",templateUrl:"app/gift/gift.html",authenticate:!0,ncyBreadcrumb:{label:"送你"}}).state("gift.post",{url:"/post",templateUrl:"app/gift/gift.post.html",controller:"GiftPostCtrl",authenticate:!0,resolve:{gift:function(){return null}},ncyBreadcrumb:{label:"发布商品"}}).state("gift.list",{url:"/list",templateUrl:"app/gift/gift.list.html",controller:"GiftListCtrl",authenticate:!0,ncyBreadcrumb:{label:"商品列表"}}).state("gift.order",{url:"/order",templateUrl:"app/gift/gift.order.html",controller:"GiftOrderCtrl",authenticate:!0,ncyBreadcrumb:{label:"订单列表"}}).state("gift.order.detail",{url:"/:id",templateUrl:"app/gift/gift.order.detail.html",controller:"GiftOrderDetailCtrl",authenticate:!0,ncyBreadcrumb:{label:"订单状态"},resolve:{order:["$stateParams","RestOrderGift",function(e,t){return t.one(e.id).get()}]}}).state("gift.detail",{"abstract":!0,url:"/:id",template:"<ui-view/>",resolve:{gift:["Restangular","$stateParams",function(e,t){return e.one("gift",t.id).get()}]},authenticate:!0,ncyBreadcrumb:{label:"商品详情"}}).state("gift.detail.edit",{url:"/edit",templateUrl:"app/gift/gift.post.html",controller:"GiftPostCtrl",authenticate:!0,ncyBreadcrumb:{label:"编辑礼物"}}).state("gift.detail.qrcode",{url:"/qrcode",templateUrl:"app/gift/gift.qrcode.html",controller:"GiftQrcodeCtrl",authenticate:!0,ncyBreadcrumb:{label:"商品链接二维码"}})}]),angular.module("serveApp").service("RestGift",["Restangular",function(e){return e.service("gift")}]).service("RestOrderGift",["Restangular",function(e){return e.service("gift/order")}]).service("RestExp",["Restangular",function(e){return e.service("exp")}]),angular.module("serveApp").controller("LoginCtrl",["$scope","$rootScope","RestWecom",function(e,t,i){t.title="登录",e.wechat=function(){i.get().then(function(e){location.href=e.link})}}]).controller("LogoutCtrl",["$scope","$rootScope","$cookieStore","$state","$timeout",function(e,t,i,n,s){i.remove("token"),t.wxUser=void 0,s(function(){n.go("login")},1e3),t.isVerify=!1}]).controller("ExperienceCtrl",["$scope","$rootScope","RestWecom",function(e,t,i){t.title="发起授权页的体验URL",e.wechat=function(){i.get().then(function(e){location.href=e.link})}}]).controller("ExpCtrl",["$cookieStore","$stateParams","RestWechat",function(e,t,i){i.one("experience").get({uid:t.uid}).then(function(t){e.put("token",t.token),location.href="/"})}]).controller("LoginWorkerCtrl",["$scope","$cookieStore","RestWorker",function(e,t,i){e.login=function(){return e.loginForm.$invalid?(e.submitted=!0,!1):void i.one("login").post("",e.user).then(function(e){e.token&&t.put("token",e.token),location.href="/"})}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginCtrl",ncyBreadcrumb:{label:"登陆"}}).state("logout",{url:"/logout",templateUrl:"app/login/logout.html",controller:"LogoutCtrl",ncyBreadcrumb:{label:"退出"}}).state("experience",{url:"/experience?token",templateUrl:"app/login/login.html",controller:"ExperienceCtrl",ncyBreadcrumb:{label:"体验"}}).state("exp",{url:"/exp?uid",templateUrl:"app/login/login.html",controller:"ExpCtrl",ncyBreadcrumb:{label:"测试"}})}]);var academyList=[{time:"2017.01.05",num:"NO.26期",coverImg:"diershiliuqi.jpg",vcodeImg:"new-years.png",type:"payLesson",share:"银川万达嘉华酒店市场传讯部掌门人",shareName:"张巍弋",title:"0广告费卖出1000张高客单价自助餐券?",logoImg:"logo2.png"},{time:"2016.12.29",num:"NO.25期",coverImg:"diershiwuqi.jpg",oneHref:"302965815/86867918.shtml",share:"91资深营销讲师",shareName:"李庆旭",title:"年底微信送礼怎么玩?可口可乐这招你也可以用"},{time:"2016.12.22",num:"NO.24期",coverImg:"diershisiqi.jpg",vcodeImg:"vcode-ershisi.jpg",type:"payLesson",share:"昆山鲜果乐园运营经理",shareName:"莫汉生",title:"不用微信群，我照样可以3天流水84万！",logoImg:"logo2.png"},{time:"2016.12.13",num:"NO.23期",coverImg:"diershisan.jpg",oneHref:"302965815/86868344.shtml",share:"洋果子部落创始人",shareName:"方科寅",title:"阶梯团+社群，3天4000人！宁波洋果子怎么玩？",logoImg:"logo2.png"},{time:"2016.12.06",num:"NO.22期",coverImg:"diershierqi.jpg",vcodeImg:"vcode-1206.png",type:"payLesson",share:"91资深客服顾问",shareName:"陆婷婷",title:"手把手教你玩转91送礼营销新武器"},{time:"2016.11.22",num:"NO.21期",coverImg:"ershiyi.jpg",vcodeImg:"ershiyi-code.png",type:"payLesson",share:"江西宜春的创业者",shareName:"李哲",title:"联合网红将流量变现，生鲜行业小白逆袭社交电商"
},{time:"2016.11.15",num:"NO.20期",coverImg:"ershiqi.jpg",vcodeImg:"ershiqi-code.png",type:"payLesson",share:"91资深服务商牵手哥",shareName:"卢国栋",title:"县城小店如何利用微信拼团3次活动盈利20万"},{time:"2016.11.03",num:"NO.18期",coverImg:"dishijiuqi.png",oneHref:"302965815/85896098.shtml",share:"91明星商家丹东水果先生",shareName:"创始人",title:"连续3个月单日流水100元后如何扭亏为盈",logoImg:"logo2.png"},{time:"2016.10.25",num:"NO.17期",coverImg:"halloween_4.png",vcodeImg:"lqx_lessoncode.png",type:"payLesson",share:"91拼团资深营销讲师",shareName:"李庆旭",title:"零广告费3天做出千人团，手把手教你微信群营销"},{time:"2016.10.19",num:"NO.16期",coverImg:"halloween_2.png",vcodeImg:"xdx_lessoncode.png",type:"payLesson",share:"91资深社交电商讲师",shareName:"小东邪",title:"零粉丝到8000单，手把手教你拼团分销三步法"},{time:"2016.10.11",num:"NO.15期",coverImg:"halloween_3.png",otherHref:"26784467.html",share:"91明星商家婆婆家水果工厂创始人",shareName:"张磊",title:"如何24小时打败同城拥有6家门店的竞争对手？",logoImg:"logo2.png"},{time:"2016.09.27",num:"NO.14期",coverImg:"halloween_1.png",otherHref:"26732280.html",share:"91明星商家天善智能",shareName:"高阔",title:"2000人小社群如何做到流水13万？",logoImg:"logo2.png"},{time:"2016.09.22",num:"NO.13期",coverImg:"dishisanqi.png",href:"id_XMTczNDk2ODMyOA==.html",share:"91明星商家檬果生活",shareName:"姜伟",title:"以上的生鲜电商怎么玩？",logoImg:"logo2.png"},{time:"2016.09.08",num:"NO.12期",coverImg:"dishierqi.png",href:"id_XMTczMDE5MTM2OA==.html",share:"小黄人科技的创始人",shareName:"唐三藏老师",title:"想一年增粉200万？14个涨粉方式今天一次教给你"},{time:"2016.09.01",num:"NO.11期",coverImg:"dishiyiqi.png",href:"id_XMTcwOTg4MzA0NA==.html?beta&",share:"鲜牛记联合创始人",shareName:"韩永坤",title:"这家餐厅如何靠病毒营销种子轮估值3000万？"},{time:"2016.08.25",num:"NO.10期",coverImg:"dishiqi.png",href:"id_XMTcwMDQ4MzEzMg==.html",share:"91创始人",shareName:"周磊",title:"91送礼营销新武器"},{time:"2016.08.18",num:"NO.9期",coverImg:"dijiuqi.png",href:"id_XMTY5MDg0MzgyMA==.html",share:"91明星商家星美高端版永久定妆中心创始人",shareName:"Gina",title:"从40平扩张到240平的美容机构如何做到加单由极致的口碑营销",logoImg:"logo2.png"},{time:"2016.08.11",num:"NO.8期",coverImg:"dibaqi.png",href:"id_XMTY4MTMyMzI0NA==.html",share:"91明星商家元宝妈妈",shareName:"蒋君",title:"召集6000妈妈粉丝助力幼教机构两天报名近千人",logoImg:"logo2.png"},{time:"2016.08.04",num:"NO.7期",coverImg:"diqiqi.png",href:"id_XMTY3MjA3MTI2NA==.html",share:"91优秀江苏服务商",shareName:"王怀乾",title:"用拼团玩转会员卡 门店引流 / 会员卡二合一"},{time:"2016.07.28",num:"NO.6期",coverImg:"diliuqi.png",href:"id_XMTY2Nzg0MjM4NA==.html",share:"91优秀服务商",shareName:"周维中",title:"线下门店如何高效引流？"},{time:"2016.07.21",num:"NO.5期",coverImg:"juzihui.png",href:"id_XMTY1OTg4NjgxNg==.html",share:"桔子会创始人",shareName:"廖江涛",title:"社群+教育如何成为大杀器？"},{time:"2016.07.14",num:"NO.4期",coverImg:"disiqi.png",href:"id_XMTY1OTg4NDc4MA==.html",share:"91资深服务商",shareName:"樊莉昌",title:"一次活动为门店引流千人｜山鲜生水果案例分享"},{time:"2016.07.07",num:"NO.3期",coverImg:"disanqi.png",href:"id_XMTY1OTg4MzQ0NA==.html",share:"91资深客服顾问",shareName:"小东邪",title:"拼海鲜零粉丝三个月做出6000单"},{time:"2016.06.30",num:"NO.2期",coverImg:"dierqi.png",href:"id_XMTY1OTg4MjU4NA==.html",share:"91资深客服顾问",shareName:"陆婷婷",title:"30平米水果店，拼团单日盈利5000元?"},{time:"2016.06.23",num:"NO.1期",coverImg:"diyiqi.png",href:"id_XMTY1OTg4MDk2MA==.html",share:"91资深客服顾问",shareName:"Coco",title:"0粉丝到日均1000订单，社群电商4步法首次公开"},{time:"2016.05.25",num:"大咖课",coverImg:"yuxiansheng.png",href:"id_XMTY1OTg3NjYwOA==.html",share:"91创始人周磊",title:"91拼团创始人周磊对话鱼先生水果创始人！",logoImg:"logo2.png"},{time:"2016.05.18",num:"大咖课",coverImg:"guoranfeng.png",href:"id_XMTY1OTg3MTA0OA==.html",share:"91明星商家果然丰",title:"一个人就能玩转的千人水果拼团",logoImg:"logo2.png"},{time:"2016.05.11",num:"大咖课",coverImg:"caomojia.png",href:"id_XMTY1OTg1ODE2MA==.html",share:"91明星商家草摩家的水果",title:"传统水果商向新实体水果跨越的那些坑和风口",logoImg:"logo2.png"}];angular.module("serveApp").controller("MainCtrl",["$scope","$stateParams","$cookieStore","$cookies","$window","$location","RestWecom","RestWechat",function(e,t,i,n,s,a,o,l){e.wechat=function(){o.get().then(function(e){location.href=e.link})},t.auth_code&&o.one("auth").get({auth_code:t.auth_code}).then(function(e){i.put("token",e.token),s.location.href=a.path()}),t.vecter&&n.put("vecter",t.vecter),e.wxUser;var r=!1;e.$watch("wxUser",function(e,t){return!!e&&(!r&&void(r=!0))},!0),e.screen={width:s.innerWidth,height:s.innerHeight}}]).controller("NullModalCtrl",["$scope","$state","$uibModalInstance",function(e,t,i){e.cancel=function(){t.go("plans.center"),i.dismiss("cancel")}}]).controller("academyController",["$scope",function(e){e.academy=academyList,e.videoUrl="http://v.youku.com/v_show/",e.otherUrl="http://www.le.com/ptv/vplay/",e.oneUrl="http://my.tv.sohu.com/us/",e.ptSrc="https://img.91pintuan.com/home/academy/";var t,i=e.academy.length;t=i%3==0?parseInt(i/3):parseInt(i/3)+1,e.line=t}]).controller("SwiperCtrl",["$scope","$rootScope","$stateParams","$cookies","$uibModal","$http","Merchant","appConfig","RestDocument",function(e,t,i,n,s,a,o,l,r){e.swiper={},e.visualHeight={height:""+screen.height+"px"},e.inputWidth={width:""+(screen.width-25)+"px"},e.halfScreen={width:""+screen.width/2+"px",height:""+screen.width/2+"px","float":"left"},r.one("service_phone").get().then(function(t){e.phone=t.document});var c=n.get("vecter");e.vecter=c,e.submitted=!1,e.submit=function(){return e.leadsForm.$invalid?(e.submitted=!0,!1):void o.one("leads").post(null,{alias:e.vecter,pubno:e.pubno,linkman:e.linkman,telephone:e.telephone}).then(function(t){e.content=t.number,s.open({templateUrl:"app/main/main.mobile.success.html",controller:"SwiperCtrl",size:"lg"})})},console.log(l.uri),a({method:"GET",url:l.uri+"/agent/prp/number?alias="+e.vecter}).then(function(t){e.data=t.data})}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("main",{url:"/?auth_code&vecter",templateUrl:"app/main/main.html",controller:"MainCtrl",ncyBreadcrumb:{label:"首页"}}).state("/",{url:"/guide",templateUrl:"app/main/guide.mobile.html",controller:"SwiperCtrl"})}]),angular.module("serveApp").controller("MerchantCtrl",["$scope","$rootScope","$state","Merchant",function(e,t,i,n){t.title="商家资料管理",n.get().then(function(t){return t.id?(e.merchant=t,void(e.cfgClientUri=config.clientUri)):void i.go("merchant.post")})}]).controller("MerchantPostCtrl",["$scope","$rootScope","$state","$modal","Merchant","Alert",function(e,t,i,n,s,a){t.title="提交商家资料",e.aggrement="YES",e.submitted=!1,e.agmMdl=function(){n.open({templateUrl:"app/document/document.html",controller:"DocMdlAgmCtrl"})},e.master={},e.isUnchanged=function(t){return angular.equals(t,e.master)},e.post=function(){return e.submitted=!0,e.master=angular.copy(e.merchant),"NO"!==e.aggrement&&(!form.$invalid&&void(e.merchant.id?e.merchant.put().then(function(e){a.add("success",e.message),i.go("merchant")}):s.post("",e.merchant).then(function(e){a.add("success",e.message),i.go("merchant.upload")})))}}]).controller("MerchantUploadCtrl",["$scope","$rootScope","$http","$stateParams","FileUploader","$cookieStore",function(e,t,i,n,s,a){t.title="上传资质文件",e.select=function(){return $("input:file").trigger("click"),!1};var o=e.uploader=new s({headers:{Authorization:a.get("token"),"X-API-From":config.from,"X-Component":config.component},url:config.uri+"/merchant/upload"});o.filters.push({name:"imageFilter",fn:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(t)!==-1}}),o.onWhenAddingFileFailed=function(e,t,i){console.info("onWhenAddingFileFailed",e,t,i)},o.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},o.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},o.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},o.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},o.onProgressAll=function(e){console.info("onProgressAll",e)},o.onSuccessItem=function(e,t,i,n){console.info("onSuccessItem",e,t,i,n)},o.onErrorItem=function(e,t,i,n){console.info("onErrorItem",e,t,i,n)},o.onCancelItem=function(e,t,i,n){console.info("onCancelItem",e,t,i,n)},o.onCompleteItem=function(e,t,i,n){console.info("onCompleteItem",e,t,i,n)},o.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",o)}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("merchant",{url:"/merchant",templateUrl:"app/merchant/merchant.html",controller:"MerchantCtrl",ncyBreadcrumb:{label:"商家管理",ico:"bank"}}).state("merchant.post",{url:"/post",templateUrl:"app/merchant/form.html",controller:"MerchantPostCtrl",ncyBreadcrumb:{label:"申请"}}).state("merchant.edit",{url:"/edit",templateUrl:"app/merchant/form.html",controller:"MerchantPostCtrl",ncyBreadcrumb:{label:"编辑信息"}}).state("merchant.upload",{url:"/upload",templateUrl:"app/merchant/upload.html",controller:"MerchantUploadCtrl",ncyBreadcrumb:{label:"上传资质文件"}})}]),angular.module("serveApp").service("Merchant",["Restangular",function(e){return e.one("merchant")}]),angular.module("serveApp").directive("phone",function(){return{require:"ngModel",link:function(e,t,i,n){var s=/^1[34578][0-9][0-9]{8}$/;n.$parsers.unshift(function(e){return s.test(e)?(n.$setValidity("phone",!0),e):void n.$setValidity("phone",!1)})}}}),angular.module("serveApp").controller("PlansCtrl",["$scope","$rootScope","$interval","$uibModal","Alert","RestPlans",function(e,t,i,n,s,a){t.title="订购中心",e.pay={type:"wepay",combo:"order"},e.choosePay=function(t){e.pay.type=t},e.chooseCombo=function(t){e.pay.combo=t},e.$watch("pay.combo",function(t){"order"===t&&a.getList({limit:3}).then(function(t){e.plans=t,e.plan=t[0]}),"counselor"===t&&a.one("service").get({category:"counselor"}).then(function(t){e.plan=t})}),e.selected=0,e.selPlan=function(){e.plan=this.plan,e.pay.type="wepay",e.selected=this.$index},e.payModal=function(){return"wepay"===e.pay.type&&n.open({templateUrl:"app/plans/plans.qrcode.html",resolve:{plan:function(){return e.plan}},controller:"PlansPayModalCtrl"}),"alipay"===e.pay.type&&s.add("warning","支付宝支付开发中"),!1},a.one("numbers").get().then(function(t){e.numbers=t})}]).controller("PlansListCtrl",["$scope","RestPlansOrder",function(e,t){t.getList().then(function(t){e.planOrders=t})}]).controller("PlansServiceCtrl",["$scope","$rootScope","$stateParams","$uibModal","Alert","RestPlans",function(e,t,i,n,s,a){t.title="购买服务",e.pay={type:"wepay"},e.choosePay=function(t){e.pay.type=t},e.choosePay=function(t){e.pay.type=t},e.type=i.type,i.type&&a.one("service").get({category:i.type}).then(function(t){e.plan=t}),e.payModal=function(){return"wepay"===e.pay.type&&n.open({templateUrl:"app/plans/plans.qrcode.html",resolve:{plan:function(){return e.plan}},controller:"PlansPayModalCtrl"}),"alipay"===e.pay.type&&s.add("warning","支付宝支付开发中"),!1}}]).controller("PlansPayModalCtrl",["$scope","$rootScope","$state","$uibModalInstance","plan","RestPlans",function(e,t,i,n,s,a){e.plan=s,e.$watchCollection("[plan,wxUser]",function(t){if(!t[0])return!1;if(!t[1])return!1;var i={plan_id:t[0].id,pubno_id:t[1].appid};a.one("qrcode").get(i).then(function(t){e.qrcode=t})}),e.cancel=function(){n.dismiss("cancel")},e.finishPay=function(){i.reload(),n.close("finishPay")}}]).controller("PlansCounselorCtrl",["$scope","$state","$uibModal",function(e,t,i){e.aggrement="YES",e.openService=function(){t.go("plans.service",{type:"counselor",from:"bambu"})},e.counselorMdl=function(){i.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"counselor"}}})}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("plans",{url:"/plans",templateUrl:"app/plans/plans.html","abstract":!0,authenticate:!0,ncyBreadcrumb:{label:"套餐"}}).state("plans.center",{url:"/center",templateUrl:"app/plans/plans.center.html",controller:"PlansCtrl",ncyBreadcrumb:{label:"充值中心"}}).state("plans.list",{url:"/list",templateUrl:"app/plans/plans.list.html",controller:"PlansListCtrl",ncyBreadcrumb:{label:"列表"}}).state("plans.service",{url:"/service?type&from",templateUrl:"app/plans/plans.service.html",controller:"PlansServiceCtrl",ncyBreadcrumb:{label:"购买服务"}}).state("plans.counselor",{url:"/counselor",templateUrl:"app/plans/plans.counselor.html",controller:"PlansCounselorCtrl",ncyBreadcrumb:{label:"顾问"}})}]),angular.module("serveApp").service("RestPlans",["Restangular",function(e){return e.service("plans")}]).service("RestPlansOrder",["Restangular",function(e){return e.service("plans/order")}]).service("RestPlansNumbers",["Restangular",function(e){return e.service("plans/numbers")}]),angular.module("serveApp").controller("PoiCtrl",function(){}).controller("PoiListCtrl",["$scope","$rootScope","$state","$stateParams","$uibModal","$log","$location","Alert","RestPoi","RestCate",function(e,t,i,n,s,a,o,l,r,c){var d=this;t.title="门店管理",t.ico="location-arrow",e.reload=!1,e.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:15,all:0,tag:""},e.sort={select:"",list:[{key:"default",name:"默认"},{key:"commodity",name:"商品"},{key:"partaker",name:"订单"},{key:"scan_partaker",name:"核销订单"},{key:"amount",name:"销售额"},{key:"scan_amount",name:"核销额度"},{key:"scanner",name:"扫码员"}]},r.one("count").get().then(function(t){e.pagi.all=t||0});var p="[pagi.currentPage,pagi.itemsPerPage,area.province,area.city,area.district,area.keyword,sort.select,pagi.tag,reload]";e.$watchCollection(p,function(t){var i={page:t[0],limit:t[1]};t[2]&&(i.province=t[2].name),t[3]&&(i.city=t[3].name),t[4]&&(i.district=t[4].name),t[5]&&(i.keyword=t[5]),t[6]&&(i.sort=t[6].key),t[7]&&(i.tag=t[7].id),r.one("count").get(i).then(function(t){e.pagi.totalItems=t||0}),r.getList(i).then(function(t){e.pois=t}),e.loadTags()},!0),e.flushPoiList=function(){r.one("flush").put().then(function(e){l.add("success",e.message),location.reload()})},e.delPoi=function(){var e=confirm("确认删除该门店吗？");if(e===!1)return!1;var t=this.poi;r.one(t.id).remove().then(function(e){l.add("success",e.errmsg),i.reload()})},e.provinces=[{id:999999,name:"全部",py:"all"},{id:11e4,name:"北京市",py:"beijing"},{id:31e4,name:"上海市",py:"shanghai"},{id:33e4,name:"浙江省",py:"zhejiang"},{id:32e4,name:"江苏省",py:"jiangsu"},{id:44e4,name:"广东省",py:"guangdong"},{id:21e4,name:"辽宁省",py:"liaoning"},{id:52e4,name:"贵州省",py:"guizhou"},{id:34e4,name:"安徽省",py:"anhui"},{id:5e5,name:"重庆市",py:"chongqing"},{id:35e4,name:"福建省",py:"fujian"},{id:51e4,name:"四川省",py:"sichuan"},{id:12e4,name:"天津省",py:"tianjin"},{id:13e4,name:"河北省",py:"hebei"},{id:43e4,name:"湖南省",py:"hunan"},{id:46e4,name:"海南省",py:"hainan"},{id:37e4,name:"山东省",py:"shandong"},{id:14e4,name:"山西省",py:"shanxi"},{id:61e4,name:"陕西省",py:"shan3xi"},{id:23e4,name:"黑龙江省",py:"heilongjiang"},{id:22e4,name:"吉林省",py:"jilin"},{id:41e4,name:"河南省",py:"henan"},{id:42e4,name:"湖北省",py:"hubei"},{id:36e4,name:"江西省",py:"jiangxi"},{id:15e4,name:"内蒙古自治区",py:"neimenggu"},{id:64e4,name:"宁夏回族自治区",py:"ningxia"},{id:63e4,name:"青海省",py:"qinghai"},{id:65e4,name:"新疆维吾尔自治区",py:"xinjiang"},{id:54e4,name:"西藏自治区",py:"xizang"},{id:53e4,name:"云南省",py:"yunnan"},{id:62e4,name:"甘肃省",py:"ganshu"},{id:45e4,name:"广西壮族自治区",py:"guangxi"}],e.area={province:"",city:"",district:""},e.$watch("area.province",function(t){if(t)return e.area.city={},e.area.district={},"all"===t.py?void(e.area.province=""):void r.one("city").get({province:t.py}).then(function(t){e.cities=t.city})}),e.$watch("area.city",function(t){t&&(e.area.district={})}),e.add_tags={tag:"",close:!1},e.loadTags=function(){c.getList({type:"poi_tag"}).then(function(t){e.tags=t.plain()})},e.addTag=function(){c.one("add_poi_tag").post("",{tag:e.add_tags.tag}).then(function(){e.loadTags(),e.add_tags.close=!1})},e.editTag=function(){var e=this.tag;c.one(e.id).post("",{name:e.name}).then(function(){})},e.delTag=function(){var t=confirm("确认删除该标签吗？");if(t===!1)return!1;var i=this.tag;c.one(i.id).remove().then(function(){i=void 0,e.pagi.tag={}})},e.poiAddTag=function(){var t=this.poi;t.put().then(function(i){t.tagspop=!1,l.add("success",i.message),e.reload=!e.reload}),c.one("stats").one("tags").post("",{tags:e.seltags}).then(function(){e.loadTags()})},e.seltags=[],e.poiSelTag=function(t){if(t)return!1;var i=this.tag.id;_.includes(e.seltags,i)||e.seltags.push(i)},e.poiAddTagCancel=function(){this.poi.tagspop=!1,e.reload=!e.reload},e.selpoi={selall:!1,tagspop:!1,ids:[],tags:[]},e.selAll=function(){if(e.selpoi.selall){var t=[],i=e.pois.plain();for(var n in i)t.push(i[n].id);e.selpoi.ids=t}else e.selpoi.ids=[]},e.poisAddTag=function(){var t=e.selpoi,i=[];for(var n in t.tags)i.push(t.tags[n].id);r.one("batch").one("tags").post("",{pois:t.ids,tags:i}).then(function(i){t.tagspop=!1,e.selpoi.tags=[],e.selpoi.ids=[],e.selpoi.selall=!1,l.add("success",i.message),e.reload=!e.reload})},e.poisClose=function(){e.selpoi.tagspop=!1},e.addScanner=function(t){var i=s.open({templateUrl:"app/poi/poi.scanner.html",controller:"PoiScannerModalCtrl",resolve:{poi:function(){return t}}});i.result.then(function(t){e.reload=t},function(){a.info("Modal dismissed at: "+new Date)})},e.stockup=function(e){var t=s.open({templateUrl:"app/poi/poi.stockup.modal.html",controller:"PoiStockupModalCtrl",resolve:{poi:function(){return e}}});t.result.then(function(){},function(){a.info("Modal dismissed at: "+new Date)})},e.addDevice=function(){var t=d.poi,i=d.device,n=s.open({templateUrl:"app/poi/device.html",controller:"DeviceCtrl",size:"sm",resolve:{poi:function(){return t},device:function(){return i}}});n.result.then(function(t){e.reload=!e.reload},function(e){a.info("Modal dismissed at: "+new Date)})}}]).controller("PoiScannerModalCtrl",["$scope","$uibModalInstance","poi",function(e,t,i){i.one("scanner").one("qrcode").one("ticket").get().then(function(t){e.qrcodeTicket=t}),e.ok=function(){var e=Math.floor(6*Math.random()+1);t.close(e)}}]).controller("PoiStockupModalCtrl",["$scope","$uibModalInstance","RestGift","poi",function(e,t,i,n){e.poi=n,i.one("poi").get({poi:n.id}).then(function(t){e.comms=t})}]).controller("DeviceCtrl",["$scope","$uibModalInstance","Alert","poi","device",function(e,t,i,n,s){e.submitted=!1,s?e.device=s:e.device={company:{name:"客来乐",id:"kelaile"}},e.poi=n,e.setDevice=function(){return e.deviceForm.$invalid?(e.submitted=!0,!1):void n.one("device").post("",e.device).then(function(e){i.add("success",e.message),t.close(e.message)})},e.delDevice=function(){n.one("device").one(s.id).remove().then(function(e){i.add("success",e.message),t.close(e.message)})}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("poi",{url:"/poi",template:"<ui-view/>",controller:"PoiCtrl","abstract":!0,authenticate:!0,ncyBreadcrumb:{label:"门店管理",ico:"street-view"}}).state("poi.manage",{url:"/manage?tag",templateUrl:"app/poi/poi.manage.html",controller:"PoiListCtrl",resolve:{tag:function(){return""}},authenticate:!0,ncyBreadcrumb:{label:"门店统计"}}).state("poi.tags",{url:"/tags?id",templateUrl:"app/poi/poi.tags.html",controller:"PoiListCtrl",resolve:{tag:function(){return""}},authenticate:!0,ncyBreadcrumb:{label:"门店分组"}}).state("poi.comm",{url:"/comm?id",templateUrl:"app/poi/poi.comm.html",controller:"PoiCommCtrl",authenticate:!0,ncyBreadcrumb:{label:"门店备货"}})}]),angular.module("serveApp").service("RestPoi",["Restangular",function(e){return e.service("poi")}]),angular.module("serveApp").controller("SubOrderListCtrl",["$scope","$rootScope","$interval","$log","$uibModal","$stateParams","Alert","RestGift","RestExp","RestOrderGift","RestSuborder",function(e,t,i,n,s,a,o,l,r,c,d){t.title="发货管理",e.suborders=[],e.forms={},e.filter={delivery:"all"},e.clientUri=config.clientUri,e.status={startTime:null,endTime:null,startTimePopup:{opened:!1},endTimePopup:{opened:!1},pay:!0,order:"",serial:"",shipping:"all",refresh:!1},e.searchByCondition=function(){return e.forms.suborderForm.$invalid?(e.submitted=!0,!1):e.status.startTime&&!e.status.endTime?void o.add("danger","请填写结束时间"):e.status.endTime&&!e.status.startTime?void o.add("danger","请填写起始时间"):e.status.endTime&&e.status.startTime&&!moment(e.status.startTime).isBefore(e.status.endTime)?void o.add("danger","起始时间必须小于结束时间"):(e.pagi.startTime=e.status.startTime,e.pagi.endTime=e.status.endTime,e.pagi.order=e.status.order,void(e.pagi.serial=e.status.serial))},r.one("company").get().then(function(t){e.companies=t}),e.shippingModel=function(t){var i=t.order;t.id=t.id||t._id,i.id=i.id||i._id;var a=s.open({animation:!0,templateUrl:"app/gift/gift.order.shipping.html",controller:"GiftOrderShippingCtrl",resolve:{order:function(){return i},companies:function(){return e.companies},receiver:function(){return t}}});return a.result.then(function(t){e.status.refresh=!e.status.refresh},function(){n.info("在: "+new Date+"解散模")}),!1},e.exportCards=function(){d.one("export").one("cards").withHttpConfig({responseType:"arraybuffer"}).get({shipping:e.status.shipping,pay:e.status.pay,page:e.pagi.currentPage,limit:e.pagi.itemsPerPage,ext:"wx"}).then(function(e){if(!e.byteLength)return void o.add("danger","无可用语音码");var t=new Blob([e],{type:"application/octet-stream;charset=utf-8"});saveAs(t,"语音卡.zip")})},e.exportCard=function(e){e.card?d.one(e.id||e._id).one("export").one("card").withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(t){var i=new Blob([t],{type:"image/png"});saveAs(i,e._id+".png")}):c.one("export").one("card").one(e.order.id||e.order._id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(t){var i=new Blob([t],{type:"image/png"});saveAs(i,e.order.serial+".png")})},e.exportSuborders=function(){d.one("export").one("orders").withHttpConfig({responseType:"arraybuffer"}).get({page:e.pagi.currentPage,limit:e.pagi.itemsPerPage,startTime:e.pagi.startTime,endTime:e.pagi.endTime,order:e.pagi.order,serial:e.pagi.serial,shipping:e.status.shipping,pay:e.status.pay}).then(function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats"});saveAs(t,"suborders."+(new Date).getTime()+".xlsx")})},e.$watchCollection("[pagi.currentPage,pagi.itemsPerPage,pagi.startTime,pagi.endTime,pagi.order,pagi.serial,status.shipping,status.pay,status.refresh]",function(t){e.suborders=[];var i={page:t[0],limit:t[1],startTime:t[2],endTime:t[3],order:t[4],serial:t[5],shipping:t[6],pay:t[7]};a.poi&&(i.poi=a.poi),l.one("suborder").get(i).then(function(t){e.suborders=t.suborders,e.pagi.totalItems=t.count})}),e.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10},e.altInputFormats=["M!/d!/yyyy"],e.openStarttimePopup=function(){e.status.startTimePopup.opened=!0},e.openEndtimePopup=function(){e.status.endTimePopup.opened=!0}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("suborder",{url:"/suborder",template:'<div ui-view=""></div>',"abstract":!0,authenticate:!0,ncyBreadcrumb:{label:"套餐"}}).state("suborder.list",{url:"/list?poi",templateUrl:"app/suborder/suborder.list.html",controller:"SubOrderListCtrl",ncyBreadcrumb:{label:"发货管理"}})}]),angular.module("serveApp").service("RestSuborder",["Restangular",function(e){return e.service("gift/suborder")}]),angular.module("serveApp").controller("UserCtrl",function(){}).controller("UserListCtrl",["$scope","$rootScope","$state","$stateParams","RestUser","Alert",function(e,t,i,n,s,a){t.title="用户列表",t.ico="user",e.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:50,category:"client"},e.$watchCollection("[pagi.category, pagi.currentPage, pagi.itemsPerPage]",function(t){var i={category:t[0],page:t[1],limit:t[2]};n.poi&&(i.poi=n.poi),s.getList(i).then(function(t){console.warn(t.plain()),e.users=t}),s.one("count").get(i).then(function(t){e.pagi.totalItems=t.count})}),e.setClient=function(e){this.user.role.client=e,this.user.put().then(function(e){a.add("success",e.errmsg)})},e.unlinkPrinter=function(){this.user.printer="",this.user.put().then(function(e){a.add("success",e.errmsg)})},e.selPrtr=function(e,t){"点击添加打印机"===t.printname&&i.go("printer.manage")},e.linkUserPrinter=function(){this.user.put().then(function(e){a.add("success",e.errmsg)})}}]).controller("OperatorCtrl",["$scope","$rootScope","RestUser",function(e,t,i){i.one("operator").one("qrcode").get({scene_id:1}).then(function(t){e.qrcodeTicket=t})}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("user",{url:"/user",templateUrl:"app/user/user.html",controller:"UserCtrl","abstract":!0,authenticate:!0,ncyBreadcrumb:{label:"用户管理"}}).state("user.qrcode",{url:"/qrcode",templateUrl:"app/user/operator.qrcode.html",controller:"OperatorCtrl",ncyBreadcrumb:{label:"添加扫码员"}}).state("user.list",{url:"/list?poi",templateUrl:"app/user/user.list.html",controller:"UserListCtrl",ncyBreadcrumb:{label:"扫码员列表"}})}]),angular.module("serveApp").service("RestUser",["Restangular",function(e){return e.service("user")}]),angular.module("serveApp").controller("WechatCtrl",["$scope","$log",function(e,t){}]).controller("WechatProfileCtrl",function(){}).controller("WechatMenuCtrl",["$scope","$rootScope","RestWxMenu","Alert",function(e,t,i,n){t.title="设置微信菜单",e.menu="{}",i.get().then(function(t){e.menu=JSON.stringify(t.content,null,"    "),e.menus=t.content}),e.saveMenu=function(){i.patch(e.menu).then(function(t){e.menu=JSON.stringify(t.menus,null,"    "),e.menus=t.menus,n.add("success",t.message)})},e.setMenu=function(){i.put().then(function(e){n.add("success",e.message)})}}]).controller("WechatPayCtrl",["$scope","$rootScope","$state","Restangular","Alert",function(e,t,i,n,s){t.title="设置微信支付选项",n.service("wechat/pay").one().get().then(function(t){e.pay=t}),e.submitted=!1,e.clientUri=config.clientUri,e.post=function(){if(e.submitted=!0,e.form.$invalid)return!1;var t=new FormData;t.append("mch_id",e.pay.mch_id),t.append("key",e.pay.key),t.append("pfx",e.uploadFile),e.pay.withHttpConfig({transformRequest:angular.identity}).customPOST(t,void 0,void 0,{"Content-Type":void 0}).then(function(t){s.add("success",t.message),e.pay.key="",e.submitted=!1})}}]).controller("WechatAutoreplyCtrl",["$scope","$rootScope","RestWxReply","Alert",function(e,t,i,n){t.title="关注回复",e.reply={},i.getList().then(function(t){e.reply=t[0]}),e.post=function(){e.reply.put().then(function(e){n.add("success",e.message)})}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("wechat",{url:"/wechat","abstract":!0,templateUrl:"app/wechat/wechat.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"公号管理",ico:"wechat"}}).state("wechat.pay",{url:"/pay",templateUrl:"app/wechat/pay.html",controller:"WechatPayCtrl",ncyBreadcrumb:{label:"公号配置"}}).state("wechat.menu",{url:"/menu",templateUrl:"app/wechat/menu.html",controller:"WechatMenuCtrl",ncyBreadcrumb:{label:"设置菜单"}}).state("wechat.autoreply",{url:"/autoreply",templateUrl:"app/wechat/autoreply.html",controller:"WechatAutoreplyCtrl",ncyBreadcrumb:{label:"关注回复"}}).state("wechat.message",{url:"/message",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"消息管理"}}).state("wechat.user",{url:"/user",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"用户管理"}}).state("wechat.shop",{url:"/shop",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"小店管理"}}).state("wechat.service",{url:"/service",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"客服管理"}}).state("wechat.notice",{url:"/notice",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"业务通知"}}).state("wechat.coupon",{url:"/coupon",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"卡券管理"}}).state("wechat.material",{url:"/material",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"素材管理"}}).state("wechat.rock",{url:"/rock",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"摇一摇"}})}]),angular.module("serveApp").service("RestWechat",["Restangular",function(e){return e.service("wechat")}]).service("RestWecom",["Restangular",function(e){return e.one("wechat").one("component")}]).service("RestWxMenu",["RestWechat",function(e){return e.one("menu")}]).service("RestWxReply",["Restangular",function(e){return e.service("wechat/reply")}]),angular.module("serveApp").controller("WorkerCtrl",["$scope","$rootScope",function(e,t){t.title="员工管理",e.ico="male"}]).controller("WorkerListCtrl",["$scope","$rootScope","$state","RestWorker","Alert",function(e,t,i,n,s){t.title="员工管理",e.ico="male",e.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10,lock:""},e.$watchCollection("[pagi.lock,pagi.currentPage,pagi.itemsPerPage]",function(t){var i={lock:t[0],page:t[1],limit:t[2]};n.one("count").get(i).then(function(t){e.pagi.totalItems=t||0}),n.getList(i).then(function(t){e.workers=t})}),e.lock=function(){var e=this.worker;e.status.lock=!e.status.lock,e.one("lock").post("",{lock:e.status.lock}).then(function(e){s.add("success",e.message),i.reload()})},e.copyText="复制",e.getTextToCopy=function(){return window.location.origin+"/worker/login"},e.doSomething=function(){e.copyText="复制成功!"}}]).controller("WorkerFormCtrl",["$scope","$rootScope","$state","$stateParams","$interval","RestWorker","Alert",function(e,t,i,n,s,a,o){t.title="添加员工",e.ico="male",e.getCpcTxt="获取验证码",e.getedCpc=!1,e.getVerificationCode=function(t){return t.telephone.$invalid?(alert("请正确填写手机号!"),!1):void a.one("captcha").post("",{telephone:e.worker.info.telephone}).then(function(t){e.getedCpc=!0,o.add("success",t.message),e.Countdown=120;var i=s(function(){e.Countdown--,e.getCpcTxt=e.Countdown,0===e.Countdown&&(s.cancel(i),e.getCpcTxt="重发")},1e3)})},n.id&&(t.title="编辑员工",a.one(n.id).get().then(function(t){e.worker=t})),e.post=function(){return e.workerForm.$invalid?(e.submitted=!0,!1):void(e.worker.id?e.worker.put().then(function(e){o.add("success",e.message),i.go("worker.list")}):a.post(e.worker.info).then(function(e){o.add("success",e.message),i.go("worker.list")}))}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("worker",{url:"/worker",templateUrl:"app/worker/worker.html","abstract":!0}).state("worker.list",{url:"/list",templateUrl:"app/worker/worker.list.html",controller:"WorkerListCtrl",authenticate:!0,ncyBreadcrumb:{label:"员工管理"}}).state("worker.add",{url:"/add",templateUrl:"app/worker/worker.form.html",controller:"WorkerFormCtrl",authenticate:!0,ncyBreadcrumb:{label:"添加员工"}}).state("worker.edit",{url:"/edit?id",templateUrl:"app/worker/worker.form.html",controller:"WorkerFormCtrl",authenticate:!0,ncyBreadcrumb:{label:"编辑员工"}}).state("worker.login",{url:"/login",templateUrl:"app/login/login.worker.html",controller:"LoginWorkerCtrl"})}]),angular.module("serveApp").service("RestWorker",["Restangular",function(e){return e.service("worker")}]),angular.module("serveApp").service("Alert",["$rootScope","$timeout",function(e,t){var i={};return e.alerts=[],i.add=function(n,s){e.alerts.push({type:n,msg:s,close:function(){i.closeAlert(this)}}),t(function(){i.closeAlert(this)},5e3)},i.closeAlert=function(t){i.closeAlertIdx(e.alerts.indexOf(t))},i.closeAlertIdx=function(t){e.alerts.splice(t,1)},i}]),angular.module("serveApp").directive("ngPrint",function(){function e(e,n,s){n.on("click",function(){var e=document.getElementById(s.printElementId);e&&t(e)}),window.onafterprint=function(){i.innerHTML=""}}function t(e){var t=e.cloneNode(!0);i.innerHTML="",i.appendChild(t),window.print()}var i=document.getElementById("printSection");return i||(i=document.createElement("div"),i.id="printSection",document.body.appendChild(i)),{link:e,restrict:"A"}}),angular.module("serveApp").directive("nosyPagi",function(){return{restrict:"E",transclude:!0,scope:{pagi:"=pagi",dropup:"@"},controller:["$scope",function(e){e.pages=[10,20,50,100,200,500,1e3],e.chgPage=function(){e.pagi.itemsPerPage=this.page,e.pagi.currentPage=1}}],template:'<uib-pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" max-size="pagi.maxSize" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination><div class="btn-group btn-group-sm pull-left pagi-per-page" ng-class="{\'dropup\':dropup}" uib-dropdown><button type="button" class="btn btn-metis-5 btn-line btn-sm" uib-dropdown-toggle>{{pagi.itemsPerPage}}条/页 <span class="caret"></span></button><ul class="dropdown-menu"><li ng-repeat="page in pages"><a href="#" ng-click="chgPage()">{{page}}条/页</a></li></ul></div>'}}),angular.module("serveApp").directive("validFile",function(){return{require:"ngModel",link:function(e,t,i,n){t.bind("change",function(){
e.$apply(function(){n.$setViewValue(t.val()),n.$render()})})}}}),angular.module("serveApp").factory("Modal",["$rootScope","$modal",function(e,t){function i(i,n){var s=e.$new();return i=i||{},n=n||"modal-default",angular.extend(s,i),t.open({templateUrl:"components/modal/modal.html",windowClass:n,scope:s})}return{confirm:{"delete":function(e){return e=e||angular.noop,function(){var t,n=Array.prototype.slice.call(arguments),s=n.shift();t=i({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+s+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(e){t.close(e)}},{classes:"btn-default",text:"Cancel",click:function(e){t.dismiss(e)}}]}},"modal-danger"),t.result.then(function(t){e.apply(t,n)})}}}}}]),angular.module("serveApp").controller("NavbarCtrl",["$rootScope","$scope","$location",function(e,t,i){t.menu=[{title:"充值中心",link:"plans.center",show:!(!e.wxUser||!e.wxUser.pay_config)},{title:"公号配置",link:"wechat.pay",show:!(!e.wxUser||!e.wxUser.pay_config)},{title:"退出",link:"logout",show:!0}],t.isCollapsed=!0,t.isActive=function(e){return e===i.path()}}]).controller("MenuCtrl",["$scope","$state",function(e,t){e.menus=[{menu:!0,title:"发货管理",link:"suborder.list",icon:"icon1",iconSelected:"icon11"},{header:!0,title:"商品管理",icon:"icon2",iconSelected:"icon22"},{menu:!0,title:"发布商品",link:"gift.post"},{menu:!0,title:"商品列表",link:"gift.list"},{header:!0,title:"订单管理",icon:"icon3",iconSelected:"icon33"},{menu:!0,title:"订单列表",link:"gift.order"},{menu:!0,title:"大客户礼包",link:"bigpack.list"},{header:!0,title:"门店管理",icon:"icon4",iconSelected:"icon44"},{menu:!0,title:"门店分组",link:"poi.tags"},{menu:!0,title:"门店统计",link:"poi.manage"},{header:!0,title:"员工管理",icon:"icon5",iconSelected:"icon55"},{menu:!0,title:"员工账号",link:"worker.list"},{menu:!0,title:"扫码员列表",link:"user.list"},{menu:!0,title:"添加扫码员",link:"user.qrcode"}],e.isActive=function(e){return t.is(e)}}]),angular.module("serveApp").service("RestCate",["Restangular",function(e){return e.service("cate")}]),angular.module("serveApp").run(["$templateCache",function(e){e.put("components/footer.html",'<div class="container"><div class="row"><div class="col-xs-3">联系我们<br>GET IN TOUCH</div><div class="col-xs-3">合作联络<br>{{app.telephone}}</div><div class="col-xs-3">关注我们的微信号<br><a href="#" tooltip-html="qrcode"><i class="fa fa-weixin"></i> {{app.wechat}}</a></div><div class="col-xs-3">{{app.icp}}</div></div></div>'),e.put("components/header.html",'<div class="container" ng-controller="NavbarCtrl"><div class="row"><div class="col-xs-4"><img src="https://img.91pintuan.com/songli/server/logo/logo{{app.suffix}}.png" class="img-responsive"></div><div class="col-xs-8"><div class="navbar navbar-default gift-navbar" ng-controller="NavbarCtrl"><div class="container-fluid"><div class="navbar-header"><button class="navbar-toggle" type="button" ng-click="isCollapsed = !isCollapsed"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><div collapse="isCollapsed" class="navbar-collapse collapse" id="navbar-main"><ul class="nav navbar-nav"><li ng-if="wxUser"><a ui-sref="main">{{wxUser.nick_name}} 商家中心</a> <span>|</span></li><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}" ng-show="item.show"><a ui-sref="{{item.link}}">{{item.title}}</a></li><li ng-if="!wxUser"><img src="assets/images/icon24_wx_button.png" class="img-responsive center-block wx-tp-lg-btn" ng-click="wechat()"></li></ul></div></div></div></div></div></div>'),e.put("components/sidebar.html",'<nav class="gift-sidebar hidden-print affix-top" ng-controller="MenuCtrl" style="margin-top:39px"><ul class="nav sidenav"><li ng-repeat="menu in menus" ng-class="{active: isActive(menu.link)}"><a ui-sref="{{menu.link}}">{{menu.title}}</a></li></ul></nav>'),e.put("app/album/album.html",'<div class="col-md-12">This is the album view.</div>'),e.put("app/bambu/bambu.config.html",'<div ui-view=""><div class="row"><dic class="col-xs-10 col-xs-offset-1"><div class="well"><h3 class="well-h3 mywell-h3">完成系统配置，打通91拼团与微信服务号</h3><div class="djktdiv"><img ng-src="{{appConfig.uriImg+\'/serve/imgs/gantanhao.png\'}}"> <span style="color: #898989">配置前请确保您的微信公众号为<span style="color: #459ae9">已认证微信服务号，并已开通微信支付</span></span> <a target="_blank" style="color: #898989" href="http://kf.qq.com/faq/120911VrYVrA130805byM32u.html">如何开通?</a></div><ul class="bambu_step bambu_step1"><li>实现每笔交易额走商户自己的微支付账户，直接到账；</li><li>实现消费者完成支付后自动关注微信服务号，为商家积累粉丝；</li><li>消费者可在微信端实时跟进订单状态，查看火爆拼团，我的团等；</li><li>不与其他任何微信第三方应用冲突，配置完成后有10个免费试用订单；</li><li>我们的客服人员将电话联系您，如有问题91客服会为您解答；</li></ul><div><a ui-sref="bambu.config.pay" class="btn mybnt">下一步</a></div></div></dic></div></div>'),e.put("app/bambu/bambu.config.pay.html",'<div ui-view=""><div class="row bam-config"><form class="form-horizontal con-form" name="form" ng-submit="post(form)" novalidate><div class="row con-head"><div class="col-xs-1" style="width: 65px"></div><div class="col-xs-10"><span>下载配置文档，按照配置文档完成以下配置</span> <a href="http://91pt.oss-cn-beijing.aliyuncs.com/contract/91%E9%80%81%E7%A4%BC%E6%94%AF%E4%BB%98%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B%E5%89%AF%E6%9C%AC.pdf" target="_blank" class="btn xzwdbtn">下载配置文档 <i class="fa fa-long-arrow-down"></i></a></div><div class="col-xs-1" style="width: 65px"></div></div><div class="row con-body"><div class="col-xs-1 col1"></div><div class="col-xs-5 right"><!--商户号--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pay.mch_id\'].$valid && submitted,\r\n                                            \'has-error\' : form[\'pay.mch_id\'].$invalid && submitted }"><div class="col-xs-2"><label for="pay.mch_id" class="control-label config-name">商户号</label></div><div class="col-xs-10"><input id="from-cntrol1" type="text" class="form-control form-config" ng-model="pay.mch_id" name="pay.mch_id" placeholder="请输入微信支付分配的商户号" required><p ng-show="form[\'pay.mch_id\'].$error.required && submitted" class="help-block">商户号必须填写.</p></div></div><!--API密钥--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pay.key\'].$valid && submitted,\r\n                                            \'has-error\' : form[\'pay.key\'].$invalid && submitted }"><div class="col-xs-2"><label for="pay.key" class="control-label config-name">API密钥</label></div><div class="col-xs-10"><input id="from-cntrol2" type="text" class="form-control form-config" name="pay.key" ng-model="pay.key" placeholder="请输入API签名密钥" required><p ng-show="form[\'pay.key\'].$error.required && submitted" class="help-block">API签名密钥必须填写.</p></div></div><!--API证书--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pfx\'].$valid && submitted,\r\n                                            \'has-error\' : form[\'pfx\'].$invalid && submitted }"><div class="col-xs-2"><label for="pfx" class="control-label config-name">API证书</label></div><div class="col-xs-10 uploadFlie"><input id="from-cntrol3" type="file" class="form-control" name="pfx" required><p ng-show="form[\'pfx\'].$error.required && submitted" class="help-block">API证书必须填写.</p></div></div><!--支付授权目录--><div class="row config-font"><div class="col-xs-2">支付授权目录</div><div class="col-xs-10">{{ wxUser.pubdom }}/wepay/</div></div><!--JS接口安全域名--><div class="row config-font"><div class="col-xs-2">JS接口安全域名</div><div class="col-xs-10">{{ wxUser.pubdom }}</div></div><!--企业域名--><div class="row config-font"><div class="col-xs-2">企业域名</div><div class="col-xs-10">{{ wxUser.pubdom }}</div></div><!--微信公号模板消息--><div class="row config-font"><div class="col-xs-2">微信公号模板消息</div><div class="col-xs-10">确认微信公众号模板消息行业为IT/科技 电子商务<br><small class="small">如果不是,请修改</small></div></div><!--编辑按钮--><div class="row btn-foot"><div class="col-xs-3"><div class="fanhui" ui-sref="bambu.contact"><a>返回</a></div></div><div class="col-xs-4"><button id="mybtn1" type="submit" class="btn btn-danger btn-block">完 成</button></div></div></div><div class="col-xs-5"></div><div class="col-xs-1"></div></div></form></div></div>'),e.put("app/bambu/bambu.contact.html",'<div class="row bamcont"><div class="col-xs-6 bambu-left"><form class="form-horizontal wssjxx" name="form" ng-submit="post(form)" novalidate><!--商家名称--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.name\'].$valid && submitted,\n\t                                      \'has-error\' : form[\'info.name\'].$invalid && submitted }"><div class="col-xs-2"><label for="info.name" class="mw hidden-xs control-label label-name">商家名称</label></div><div class="col-xs-10"><input type="text" name="info.name" class="form-control input-lg test bambu-input" placeholder="输入商家名称" ng-model="merchant.info.name" required mongoose-error><p ng-show="form[\'info.name\'].$error.required && form[\'info.name\'].$pristine && submitted" class="help-block">商家名称必须填写.</p><p class="help-block" ng-show="form[\'info.name\'].$error.mongoose">{{ errors[\'info.name\'] }}</p></div></div><!--联系人--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.linkman\'].$valid && submitted,\n\t                                      \'has-error\': form[\'info.linkman\'].$invalid && submitted }"><div class="col-xs-2"><label for="info.linkman" class="mw control-label label-name">联系人</label></div><div class="col-xs-10"><input type="text" name="info.linkman" class="form-control input-lg test bambu-input" placeholder="输入联系人姓名" ng-model="merchant.info.linkman" required><p class="help-block" ng-show="form[\'info.linkman\'].$error.required && submitted">姓名必须填写</p><p class="help-block" ng-show="form[\'info.linkman\'].$error.mongoose">{{ errors[\'info.linkman\'] }}</p></div></div><!--联系电话--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.telephone\'].$valid && submitted,\n\t                                      \'has-error\': form[\'info.telephone\'].$invalid && submitted }"><div class="col-xs-2"><label for="info.telephone" class="mw control-label label-name">联系电话</label></div><div class="col-xs-10"><input type="text" name="info.telephone" class="form-control input-lg test bambu-input" placeholder="输入联系人手机号" ng-model="merchant.info.telephone" required phone><p class="help-block" ng-show="form[\'info.telephone\'].$error.required && submitted">联系电话必须填写</p><p class="help-block" ng-show="form[\'info.telephone\'].$error.phone">联系电话格式不正确</p><p class="help-block" ng-show="form[\'info.telephone\'].$error.mongoose">{{ errors[\'info.telephone\'] }}</p></div></div><!--座机号--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.phone\'].$valid && submitted,\n\t                                      \'has-error\': form[\'info.phone\'].$invalid && submitted }"><div class="col-xs-2"><label class="mw control-label label-name">座机号</label></div><div class="col-xs-10"><input type="text" name="info.phone" class="form-control input-lg test bambu-input" placeholder="输入商家电话，方便消费者联系" ng-model="merchant.info.phone"><p class="help-block" ng-show="form[\'info.phone\'].$error.mongoose">{{ errors[\'info.linkman\'] }}</p></div></div><!--地址--><div class="form-group" ng-class="{ \'has-success\': form[\'info.address\'].$valid && submitted,\'has-error\' : form[\'info.address\'].$invalid && submitted}" ng-if="false"><div class="col-xs-2"><label for="info.address" class="hidden-xs control-label label-name">地 址</label></div><div class="col-xs-10"><input type="text" name="info.address" class="form-control input-lg test bambu-input" placeholder="输入商家地址" ng-model="merchant.info.address" required mongoose-error><p ng-show="form[\'info.address\'].$error.required && form[\'info.address\'].$pristine && submitted" class="help-block">商家地址必须填写.</p><p class="help-block" ng-show="form[\'info.address\'].$error.mongoose">{{ errors[\'info.address\'] }}</p></div></div><!--服务号--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.agent\'].$valid && submitted,\n                \'has-error\': form[\'info.agent\'].$invalid && submitted }"><div class="col-xs-2"><label for="info.agent" class="mw control-label label-name label-name1">服务商编码(选填)</label></div><div class="col-xs-10"><input type="text" name="info.agent" class="form-control input-lg test bambu-input" placeholder="如果是服务商客户，请输入服务商编码" ng-model="merchant.info.agent"><p class="help-block" ng-show="form[\'info.agent\'].$error.mongoose">{{ errors[\'info.agent\'] }}</p></div></div><!--协议--><!--<div class="form-group"\r\n\t\t  \t\t ng-class="{ \'has-success\': aggrement === \'YES\' && submitted,\r\n\t                                      \'has-error\': aggrement === \'NO\' && submitted }" >\r\n\t\t    <div class="col-xs-2"></div>\r\n\t\t    <div class="col-xs-10">\r\n\t\t      <div class="checkbox">\r\n\t\t        <label>\r\n\t\t         <div class="checker">\r\n\t\t           <span class="checked">\r\n\t\t            <input class="uniform" name="aggrement" type="checkbox" \r\n\t\t            \tng-model="aggrement" ng-true-value="\'YES\'" ng-false-value="\'NO\'">\r\n\t\t           </span>\r\n\t\t         </div><a class="mysyxy" href="" ng-click="agmMdl()">91拼团使用协议</a>\r\n\t\t        </label>\r\n\t\t      </div>\r\n\t\t      <p class="help-block" ng-show="aggrement === \'NO\' && submitted">\r\n\t\t      \t请确认是否同意商户协议。\r\n\t\t      </p>\r\n\t\t    </div>\r\n\t\t  </div>--><!--下一步--><div class="row bambu-btn"><div class="col-xs-2"></div><div class="col-xs-5"><button class="btn btn-danger btn-lg btn-block mynext" type="submit" ng-disabled="form.$invalid || isUnchanged(merchant) || aggrement === \'NO\'">{{merchant.id?\'下一步\':\'下一步\'}}</button></div></div></form></div><div class="col-xs-6"></div></div>'),e.put("app/bambu/bambu.html",'<!--<div class="row bambu-grid" ng-if="!(\'bambu.config.pay\' | isState)">--><div class="row bambu-grid"><div class="col-xs-6" ui-sref-active="active"><a class="bambu-tab" ui-sref="bambu.contact">填写商家信息</a></div><div class="col-xs-6" ui-sref-active="active"><a class="bambu-tab" ui-sref="bambu.config.pay">配置公众号</a></div></div><div ui-view=""></div>'),e.put("app/bigpack/bigpack.commodities.modal.html",'<div class="bigpack_comm"><div class="modal_title"><span>选择商品</span> <span ng-click="$dismiss()">X</span></div><div class="panel-body comm_main"><div class="row panel-search"><input type="text" class="s-input" ng-model="status.name" placeholder="按找商品名查找"> <span ng-click="findByName()" class="s-span"><i class="fa fa-search"></i></span></div><table class="table table-condensed gift-list tab_comm" id="exportable"><thead><tr><th width="10%">选择</th><th width="30%">商品名称</th><th width="15%">单价</th><th width="15%">发布时间</th><th width="15%">订单数</th><th width="15%">发货数</th></tr></thead><tbody><tr ng-repeat="gift in gifts" ng-click="selectCommodity(gift)"><td><input type="checkbox" ng-checked="selectedGift.id === gift.id"></td><td class="word-break">{{ gift.info.name }}</td><td>{{ gift.info.price | currency }}</td><td>{{ gift.time.add | date : \'yyyy.MM.dd hh:mm\' }}</td><td>{{ gift.num.pay }}</td><td>{{ gift.num.delivery }}</td></tr></tbody></table><div class="panel-body text-right"><pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div><div class="pag"><nosy-pagi pagi="pagi"></nosy-pagi></div></div><div class="modal_foot"><input type="button" value="确定" ng-disabled="!selectedGift" ng-click="submit()"> <input type="button" value="取消" ng-click="$dismiss()"></div></div>'),e.put("app/bigpack/bigpack.order.add.confirm.html",'<div class="confirm"><div class="modal_title"><span>确认创建大礼包</span> <span ng-click="cancel()">X</span></div><div class="confirm_main">点击［确认创建］后系统将生成礼包订单。该商品库存将对应扣减该礼包所含礼物数量，订单使用量按照礼物数量对应扣减。确认创建吗？</div><div class="modal_foot"><input type="button" value="确认创建" ng-click="submit()"> <input type="button" value="取消" ng-click="cancel()"></div></div>'),e.put("app/bigpack/bigpack.order.add.html",'<div class="bigpack_add"><form name="bigpackOrderAddForm" ng-submit="post()" novalidate><div class="row bigpack_order"><label class="col-xs-2 bigpack_label">选择商品</label><div class="col-xs-10 bigpack_comm"><span>从在架商品中选择一种商品</span> <input name="order.gift.id" type="hidden" ng-model="order.gift.id" required> <span class="gift_name">{{ order.gift.info.name }}</span> <input type="button" value="选择商品" class="commodity" ng-click="modalCommodity()"><p class="help-block" ng-show="bigpackOrderAddForm[\'order.gift.id\'].$error.required && submitted">请选择商品</p></div></div><div class="row bigpack_order"><label class="col-xs-2 bigpack_label">设置数量</label><div class="col-xs-10 bigpack_comm"><span>设置该大客户礼包的礼物数量，不能超出该商品剩余库存</span> <input required name="order.capacity" type="text" ng-model="order.capacity" class="num"><span class="nums">份</span><p class="help-block clear" ng-show="bigpackOrderAddForm[\'order.capacity\'].$error.required && submitted">请填写商品数量</p><p class="help-block clear" ng-show="stockError && submitted">库存不足</p></div></div><div class="row bigpack_order padbot"><div class="col-xs-2"></div><div class="col-xs-10 bigpack_comm"><span>确认创建后系统将生成礼包订单，同时扣减该商品库存</span> <input type="submit" value="确认创建" class="btn_sure"></div></div></form><div class="blank_box"></div></div>'),e.put("app/bigpack/bigpack.order.detail.html",'<div ui-view class="panel panel-default gift-order gift-info"><table class="table table-condensed table-head"><!--<thead>\n      <tr>\n        <th>订单号：{{order.serial}}</th>\n        <th>买方：{{order.sender.name}}</th>\n        <th>支付时间：{{order.time.add | date : \'yyyy.MM.dd hh:mm\'}}</th>\n      </tr>\n    </thead>--><tbody><tr><td width="40%"><img ng-src="{{order.gift.info.cover ? appConfig.uriPht + order.gift.info.cover:\'assets/images/present_sent_demo.png\'}}" alt="..."><div class="order-info"><div class="info-name"><a>{{order.gift.info.name}}</a></div><div>商品价格：{{order.gift.info.price | currency}}</div><!--<div>实付金额：{{order.gift.info.price * order.capacity | currency}}</div>--></div></td><td width="20%"><p>买家：{{order.sender.name}}</p><p>订单号：{{order.serial}}</p><p>创建时间：{{order.time.add | date : \'yyyy.MM.dd hh:mm\'}}</p><p>购买数量：{{order.capacity}}</p></td><td width="20%" class="center"><div><span>已发货 ({{order.shipping}})</span><br><span class="shipping">待发货 ({{order.receivers.length - order.shipping}})</span></div></td><td width="20%" class="downcode"><!--<qrcode data="{{order.url}}" version="5" error-correction-level="M" size="100" download="来自{{order.sender.name}}的礼物"></qrcode>--> <button ng-click="exportCards()" class="btn btn-code">批量下载语音码</button> <button ng-click="exportSuborders()" class="btn btn-code btn_suborder">批量导出子订单</button></td></tr></tbody></table><table class="table table-condensed"><thead><tr><th>子订单单号（序列号）</th><th>发货方式</th><th>收货人信息</th><th>时间</th><th class="text-center" width="90">发货管理</th><th class="text-center" width="90">语音码</th></tr></thead><tbody><tr ng-repeat="item in order.receivers"><td>{{item.id}}</td><td><span>{{item.scene === \'poi\' ? \'门店自提\' : \'物流配送\'}}</span></td><td ng-if="item.telephone"><span>{{item.consignee || item.name}}</span> <span ng-if="item.scene === \'logistics\'">{{item.address}}</span> <span ng-if="item.scene === \'poi\'">{{item.poi.base_info.business_name}}</span> <span>{{item.telephone}}</span></td><td ng-if="!item.telephone"><span style="color: #90c132">暂未领取</span></td><td><p>创建时间－{{ item.fillinDate | date: \'yyyy-MM-dd HH:mm:ss\' }}</p><p ng-if="item.status.shipping_date">发货时间－{{ item.status.shipping_date | date: \'yyyy-MM-dd HH:mm:ss\' }}</p><p ng-if="item.status.read_date">收货时间－{{ item.status.read_date | date: \'yyyy-MM-dd HH:mm:ss\' }}</p></td><td align="center"><span ng-if="item.status.shipping">已发货</span> <button ng-if="!item.status.shipping && item.telephone" ng-click="shippingModel(item)" class="btn btn-primary btn-outline btn-xs btn-ship">发货</button> <button ng-if="!item.status.shipping && !item.telephone" ng-disabled="true" ng-click="shippingModel(item)" class="btn btn-primary btn-outline btn-xs">－</button></td><td align="center"><button ng-click="exportCard(item)" class="btn btn-primary btn-outline btn-xs btn-ship-down">下载</button></td></tr></tbody></table></div>'),e.put("app/bigpack/bigpack.order.link.modal.html",'<div class="link_modal"><div class="modal_title"><span>获取大礼包链接</span> <span ng-click="$dismiss()">X</span></div><div class="modal_cont"><div class="row line"><label class="col-xs-3">所选商品：</label><div class="col-xs-9"><div class="img_giftname"><img ng-src="{{order.gift.info.cover ? appConfig.uriPht + order.gift.info.cover : \'assets/images/present_sent_demo.png\'}}"> <span>{{ order.gift.info.name }}</span></div></div></div><div class="row clear"><label class="col-xs-3">礼包链接：</label><div class="col-xs-9 cont_right"><span>请复制该大礼包链接，并发放给客户使用</span> <input type="text" class="link_cont" name="url" ng-model="url"> <button type="button" class="link_btn" clip-copy="getTextToCopy()" clip-click="doSomething()">复制</button></div></div><!--<div class="row clear">\r\n      <label class="col-xs-3">二维码链接：</label>\r\n      <div class="col-xs-9 cont_right qrcode">\r\n        <span>扫码获取大礼包链接</span>\r\n        <qrcode version="8" error-correction-level="H" size="200" data="{{text}}"></qrcode>\r\n      </div>\r\n    </div>--></div><!--<div class="modal_foot">\r\n\t\t<input type="button" value="取消" ng-click="$dismiss()"/>\r\n\t</div>--></div>'),e.put("app/bigpack/bigpack.order.list.html",'<div ui-view class="panel panel-default gift-order bigpack-order"><div ng-hide="true"><button ng-click="modalStartVideo()">点击</button></div><div class="row introduce"><div class="col-xs-2"><img ng-src="https://img.91pintuan.com/songli/server/images/bigpack_icon.png" alt=""></div><div class="col-xs-10"><span>功能介绍</span> <span>对于购买商品总额超出微信单笔支付上限的大客户，和需对公结算的客户，商家可直接创建大客户礼包，另行结算；</span> <span>商家也可通过创建大客户礼包，发放给合作自媒体意见领袖等，建立流量合作关系；</span> <span><em>1</em>新建大客户礼包 <em>2</em>把链接通过微信发给合作渠道 <em>3</em>渠道手机端录音 <em>4</em>完成，开始送礼</span></div></div><div class="panel-body"><div class="row"><div class="col-xs-3"><input type="text" class="form-control form-number" ng-model="status.nickname" placeholder="按客户姓名搜索"> <span ng-click="findByNickame()" class="btn btn-primary btn-outline btn-sub"><i class="fa fa-search"></i></span></div><div class="col-xs-9 new_pack"><a ui-sref="bigpack.add" type="button" class="btn"><span>+</span>新建礼包</a></div></div><div class="row pag" style="float: left"><nosy-pagi pagi="pagi"></nosy-pagi></div></div><table class="table table-condensed gift-orderlist table_bigpack" id="exportable"><thead><tr><th width="15%">礼包订单号</th><th width="8%">客户姓名</th><th width="20%">所购商品</th><th width="12%">创建时间</th><th width="8%">礼物单价</th><th width="8%">礼物数量</th><th width="14%">发货状态</th><th class="hidden-print" width="15%">操作</th></tr></thead><tbody><tr ng-repeat="order in orders" ng-init="giftorders[$index]={\n          serial:\'[\'+order.serial+\']\',\n          time:(order.time.add | date : \'yyyy-MM-dd  hh:mm\'),\n          nickname:order.sender.info.nickname,\n          name:order.receiver.consignee,\n          address:order.receiver.address,\n          telephone:order.receiver.telephone,\n          gift:order.gift.info.name\n        };"><td><a class="blankfont" ui-sref="gift.order.detail({id:order.id})">{{order.serial}}</a></td><td align="center" ng-class="{\'blankfont\' : order.sender.info.nickname}" class="redfont">{{order.sender.info.nickname ? order.sender.info.nickname : \'未使用\'}}</td><td><a class="grayfont shopname" ui-sref="gift.detail.qrcode({id:order.gift.id})">{{order.gift.info.name}}</a></td><td class="grayfont">{{order.time.add | date : \'yyyy.MM.dd hh:mm\'}}</td><td class="grayfont" align="center">{{order.gift.info.price | currency}}</td><td align="center" class="blankfont">{{order.capacity}}</td><!--发货状态--><td align="center" ng-if="!order.sender.info.nickname"><span class="redfont">- -</span></td><td align="center" class="redfont" ng-if="order.sender.info.nickname"><div>已发货 ({{countShipping(order)}})</div><div class="waitting" ng-if="order.receivers.length-countShipping(order) === 0">待发货 (0)</div><button class="waitting" ng-if="order.receivers.length-countShipping(order) != 0" ui-sref="bigpack.detail({id:order.id})">待发货 ({{order.receivers.length-countShipping(order)}})</button></td><td ng-if="false" class="hidden-print"><span ng-class="{\'bg-danger\':order.status.pay}">{{order.status.pay?\'已付\':\'未付\'}}</span></td><!--操作--><td align="center" class="hidden-print"><button ng-click="modalBigpackLink(order)" class="btn btn-default btn-xs btn-xq blankfont btn_link">获取礼包链接</button> <button class="btn btn-default btn-xs btn-xq blankfont" ui-sref="bigpack.detail({id:order.id})">查看订单详情</button></td></tr></tbody></table><div class="panel-body text-right"><pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div></div>'),e.put("app/bigpack/video.html",'<video src="https://img.91pintuan.com/home/academy/video.mp4" controls="controls"></video>'),e.put("app/breadcrumb/breadcrumb.html",'<ol class="breadcrumb"><li ng-repeat="step in steps" ng-class="{active: $last}" ng-switch="$last || !!step.abstract"><i class="fa fa-{{step.ncyBreadcrumb.ico}}"></i> <a ng-switch-when="false" href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a> <span ng-switch-when="true">{{step.ncyBreadcrumbLabel}}</span></li></ol>'),e.put("app/document/document.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">{{document.title}}</h4></div><div class="modal-body"><div ng-bind-html="document.document"></div></div><div class="modal-footer"><button class="btn btn-default btn-sm" ng-click="cancel()">关闭</button></div>'),e.put("app/gift/gift.html",'<div ui-view=""><ul class="ng-scope"><li><a ui-sref="gift.post" ui-sref-opts="" class="ng-binding" href="/gift/post"><i class="fa fa-angle-right"></i>&nbsp;发布礼物</a></li><li><a ui-sref="gift.list" ui-sref-opts="" class="ng-binding" href="/gift/list"><i class="fa fa-angle-right"></i>&nbsp;礼物管理</a></li><li><a ui-sref="gift.order" ui-sref-opts="" class="ng-binding" href="/gift/order"><i class="fa fa-angle-right"></i>&nbsp;订单管理</a></li></ul></div>'),e.put("app/gift/gift.list.html",'<div class="panel panel-default"><div class="panel-body"><div class="row panel-search"><div class="col-xs-7"><div><input type="text" class="s-input" ng-model="status.name" placeholder="按找商品名查找"> <span ng-click="findByName()" class="s-span"><i class="fa fa-search"></i></span></div></div><div class="col-xs-4 select"><span>筛选：</span> <span>每页条数：</span></div><div class="col-xs-1 pagi-r"><nosy-pagi pagi="pagi"></nosy-pagi></div></div><div class="row online"><div class="col-xs-6 left"><div class="btn-group btn-danger btn-group-sm"><label class="btn" ng-model="status.online" uib-btn-radio="\'\'">全部</label><label class="btn" ng-model="status.online" uib-btn-radio="true">上架</label><label class="btn" ng-model="status.online" uib-btn-radio="false">下架</label></div></div><div class="col-xs-6 right"><nosy-pagi pagi="pagi"></nosy-pagi></div></div></div><table class="table table-condensed gift-list" id="exportable"><thead><tr><th width="30%">商品名称</th><th width="15%">单价</th><th width="15%">发布时间</th><th width="10%">库存</th><th width="15%">订单数</th><th width="15%">发货数</th><th></th><th>操作</th><th></th></tr></thead><tbody><tr ng-repeat="gift in gifts"><td class="word-break">{{gift.info.name}}</td><td>{{gift.info.price | currency}}</td><td>{{gift.time.add | date : \'yyyy.MM.dd hh:mm\'}}</td><td>{{gift.num.stock}}</td><td>{{gift.num.pay}}</td><td>{{gift.num.delivery}}</td><td align="center" class="vcode"><a class="btn btn-primary btn-xs" ui-sref="gift.detail.qrcode({id:gift.id})">二维码</a></td><td align="center" class="compile"><a class="btn btn-success btn-xs" ui-sref="gift.detail.edit({id:gift.id})">编辑</a></td><td align="center" class="soldOut"><button class="btn btn-warning btn-xs" ng-click="offShelf()" ng-if="gift.status.online === true">下架</button> <span ng-if="gift.status.online === false">已下架</span></td></tr></tbody></table><div class="panel-body text-right"><pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div></div>'),e.put("app/gift/gift.order.detail.html",'<div ui-view class="panel panel-default gift-order gift-info"><table class="table table-condensed table-head"><!--<thead>\n      <tr>\n        <th>订单号：{{order.serial}}</th>\n        <th>买方：{{order.sender.name}}</th>\n        <th>支付时间：{{order.time.add | date : \'yyyy.MM.dd hh:mm\'}}</th>\n      </tr>\n    </thead>--><tbody><tr><td width="40%"><img ng-src="{{order.gift.info.cover ? appConfig.uriPht + order.gift.info.cover:\'assets/images/present_sent_demo.png\'}}" alt="..."><div class="order-info"><div class="info-name"><a>{{order.gift.info.name}}</a></div><div>商品价格：{{order.gift.info.price | currency}}</div><div>实付金额：{{order.gift.info.price * order.capacity | currency}}</div></div></td><td width="20%"><p>买家：{{order.sender.name}}</p><p>订单号：{{order.serial}}</p><p>支付时间：{{order.time.add | date : \'yyyy.MM.dd hh:mm\'}}</p><p>购买数量：{{order.capacity}}</p></td><td width="20%" class="center"><div><span>已发货 ({{order.shipping}})</span><br><span class="shipping">待发货 ({{order.receivers.length - order.shipping}})</span></div></td><td width="20%" class="downcode"><!--<qrcode data="{{order.url}}" version="5" error-correction-level="M" size="100" download="来自{{order.sender.name}}的礼物"></qrcode>--> <button ng-click="exportCards()" class="btn btn-code">批量下载语音码</button></td></tr></tbody></table><table class="table table-condensed"><thead><tr><th>子订单单号（序列号）</th><th>发货方式</th><th>收货人信息</th><th>时间</th><th class="text-center" width="90">发货管理</th><th class="text-center" width="90">语音码</th></tr></thead><tbody><tr ng-repeat="item in order.receivers"><td>{{item.id}}</td><td><span>{{item.scene === \'poi\' ? \'门店自提\' : \'物流配送\'}}</span></td><td ng-if="item.telephone"><span>{{item.consignee || item.name}}</span> <span ng-if="item.scene === \'logistics\'">{{item.address}}</span> <span ng-if="item.scene === \'poi\'">{{item.poi.base_info.business_name}}</span> <span>{{item.telephone}}</span></td><td ng-if="!item.telephone"><span style="color: #90c132">暂未领取</span></td><td><p>创建时间－{{ item.fillinDate | date: \'yyyy-MM-dd HH:mm:ss\' }}</p><p ng-if="item.status.shipping_date">发货时间－{{ item.status.shipping_date | date: \'yyyy-MM-dd HH:mm:ss\' }}</p><p ng-if="item.status.read_date">收货时间－{{ item.status.read_date | date: \'yyyy-MM-dd HH:mm:ss\' }}</p></td><td align="center"><span ng-if="item.status.shipping">已发货</span> <button ng-if="!item.status.shipping && item.telephone" ng-click="shippingModel(item)" class="btn btn-primary btn-outline btn-xs btn-ship">发货</button> <button ng-if="!item.status.shipping && !item.telephone" ng-disabled="true" ng-click="shippingModel(item)" class="btn btn-primary btn-outline btn-xs">－</button></td><td align="center"><button ng-click="exportCard(item)" class="btn btn-primary btn-outline btn-xs btn-ship-down">下载</button></td></tr></tbody></table></div>'),e.put("app/gift/gift.order.html",'<div ui-view class="panel panel-default gift-order"><div class="panel-body"><!-- in v2, v1\'s toolbar is refactored --><!-- https://github.com/arrking/songni/issues/84 --><!-- <div class="btn-group btn-group-sm btn-danger" ng-if="env === \'dev\'">\n      <label class="btn" ng-model="status.pay" btn-radio="\'\'">全部(测试用)</label>\n      <label class="btn" ng-model="status.pay" btn-radio="true">已付</label>\n      <label class="btn" ng-model="status.pay" btn-radio="false">未付</label>\n    </div>\n\n    <div class="btn-group btn-group-sm btn-danger">\n      <label class="btn" ng-model="status.shipping" btn-radio="\'\'">全部</label>\n      <label class="btn" ng-model="status.shipping" btn-radio="true">已发货</label>\n      <label class="btn" ng-model="status.shipping" btn-radio="false">未发货</label>\n    </div>  --><!--button type="button" class="btn btn-primary btn-sm" ng-click="exportCards()" style="margin-left:10px;">下载声音卡</button--><form class="form-horizontal order-warp" name="forms.orderForm" ng-submit="searchByCondition()" novalidate><div class="row order-head"><div class="col-xs-5 order-time"><div class="start col-xs-5"><div class="form-group" ng-class="{ \'has-error\' : forms.orderForm.starttime.$invalid && submitted}"><div class="input-group pull-left"><input type="text" class="form-control" name="starttime" uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model="status.startTime" is-open="status.startTimePopup.opened" close-text="Close" placeholder="起始时间" alt-input-formats="altInputFormats"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openStarttimePopup()"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 font-span"><span>至</span></div><div class="end col-xs-5"><div class="form-group" ng-class="{ \'has-error\' : forms.orderForm.endtime.$invalid && submitted}"><!--<label for="endtime" class="control-label"> —— </label>--><div class="input-group pull-left"><input type="text" class="form-control" name="endtime" uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model="status.endTime" is-open="status.endTimePopup.opened" close-text="Close" placeholder="结束时间" alt-input-formats="altInputFormats"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openEndtimePopup()"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 btn-col1"><button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div></div><!--序列号--><div class="col-xs-3"><input type="number" class="form-control form-number" ng-model="status.serial" placeholder="按订单号查找"> <button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div><!--订单号--><!--<div class="col-xs-3">\n        \t<div class="form-group">\n\t          <input type="text" class="form-control form-number" ng-model="status.order" placeholder="输入订单号查找">\n\t        \t<button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub">搜索</button>\n\t\t      </div>\n        </div> --><!--分页--><div class="col-xs-1 form-pagi"><nosy-pagi pagi="pagi"></nosy-pagi></div><div class="col-xs-3 print"><button type="button" class="btn btn-primary btn-outline btn-sm" ng-click="exportOrders()">导出订单</button></div></div></form><!--订单筛选--><div class="from-group online"><div class="col-xs-6 left left1"><div class="btn-group btn-danger btn-group-sm"><label class="btn" ng-model="status.finish" uib-btn-radio="\'all\'">全部订单<span ng-if="status.finish === \'all\'">({{pagi.totalItems}})</span></label><label class="btn" ng-model="status.finish" uib-btn-radio="false">未完成<span ng-if="status.finish === false">({{pagi.totalItems}})</span></label><label class="btn" ng-model="status.finish" uib-btn-radio="true">已完成<span ng-if="status.finish === true">({{pagi.totalItems}})</span></label></div></div><div class="col-xs-6 right pag"><nosy-pagi pagi="pagi"></nosy-pagi></div></div></div><table class="table table-condensed gift-orderlist table_bigpack" id="exportable"><thead><tr><th width="15%">订单号</th><th width="8%">买家</th><th width="20%">所购商品</th><th width="12%">支付时间</th><th width="8%">实付金额</th><th width="8%">购买数量</th><th width="14%">发货状态</th><th class="hidden-print" width="15%">订单详情</th></tr></thead><tbody><tr ng-repeat="order in orders" ng-init="giftorders[$index]={\n          serial:\'[\'+order.serial+\']\',\n          time:(order.time.add | date : \'yyyy-MM-dd  hh:mm\'),\n          nickname:order.sender.info.nickname,\n          name:order.receiver.consignee,\n          address:order.receiver.address,\n          telephone:order.receiver.telephone,\n          gift:order.gift.info.name\n        };"><td><a class="blankfont" ui-sref="gift.order.detail({id:order.id})">{{order.serial}}</a></td><td class="blankfont" align="center">{{order.sender.info.nickname}}</td><td><a class="grayfont shopname" ui-sref="gift.detail.qrcode({id:order.gift.id})">{{order.gift.info.name}}</a></td><td class="grayfont">{{order.time.add | date : \'yyyy.MM.dd hh:mm\'}}</td><td class="grayfont" align="center">{{order.gift.info.price * order.capacity | currency}}</td><td align="center">{{order.capacity}}</td><td align="center"><div class="redfont">已发货 ({{countShipping(order)}})</div><div class="waitting" ng-if="order.receivers.length-countShipping(order) === 0">待发货 (0)</div><button class="waitting" ng-if="order.receivers.length-countShipping(order) != 0" ui-sref="gift.order.detail({id:order.id})" class="btn btn-primary btn-xs btn-dfh">待发货 ({{order.receivers.length-countShipping(order)}})</button></td><td ng-if="false" class="hidden-print"><span ng-class="{\'bg-danger\':order.status.pay}">{{order.status.pay?\'已付\':\'未付\'}}</span></td><!--td align="center" class="hidden-print">\n          <button class="btn btn-primary btn-xs" ng-click="exportCard()">下载</button>\n          <button class="btn btn-primary btn-xs" ng-click="wxQrcodeModel()" ng-if="env === \'dev\'">微信二维码</button>\n          <a href="http://{{wxUser.appid}}.{{clientUri}}/gift/listen/{{order.id}}" target="_blank" class="btn btn-primary btn-xs" ng-if="env === \'dev\'">试听</a>\n        </td--><td align="center" class="hidden-print"><!-- <div>{{order.status.pay?\'已付款\':\'待支付\'}}</div>--><!--see issue #133--> <button class="btn btn-default btn-xs btn-xq" ui-sref="gift.order.detail({id:order.id})">详情</button><!--button class="btn btn-primary btn-xs" ng-click="shippingModel()" ng-if="!order.status.shipping">发货</button--></td></tr></tbody></table><div class="panel-body text-right"><pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div></div>'),
e.put("app/gift/gift.order.qrcode.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">下载声音卡</h3></div><div class="modal-body"><qrcode data="{{url}}" version="5" error-correction-level="M" size="200" download="{{saveas}}"></qrcode></div><div class="modal-footer">点击二维码下载</div>'),e.put("app/gift/gift.order.shipping.html",'<!--<div class="modal-header">\r\n  <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button>\r\n  <h4 class="modal-title">{{order.status.shipping?\'修改快递单号\':\'发货确认\'}}</h4>\r\n</div>\r\n<div class="modal-body">\r\n  <form class="form-horizontal" name="giftOrderShippingForm">\r\n    <div ng-if="receiver.scene === \'logistics\'">\r\n      <div class="form-group">\r\n        <label class="col-xs-3 control-label">快递公司</label>\r\n        <div class="col-xs-8">\r\n          <select name="exp.company" class="form-control" ng-model="exp.company" ng-options="com.name for com in express.companies" required>\r\n            <option value="">请选择</option>\r\n          </select>\r\n        </div>\r\n        <p ng-show="giftOrderShippingForm[\'exp.company\'].$error.required && submitted" class="help-block">\r\n        商家名称必须填写.\r\n        </p>\r\n      </div>\r\n      <div class="form-group">\r\n        <label class="col-xs-3 control-label">快递单号</label>\r\n        <div class="col-xs-8">\r\n          <input name="exp.no" type="text" class="form-control" ng-model="exp.no" placeholder="请输入快递单号" required>\r\n        </div>\r\n        <p ng-show="giftOrderShippingForm[\'exp.no\'].$error.required && submitted" class="help-block">\r\n        商家名称必须填写.\r\n        </p>\r\n      </div>\r\n      <div class="form-group has-warning">\r\n          <p class="help-block text-center">填写完整的快递信息后,点击<kbd>发货</kbd>将会通过您的微信公众号给客户发送一条通知</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div ng-if="receiver.scene === \'poi\'">\r\n        <div class="form-group has-warning">\r\n          <p class="help-block text-center">确定发货？点击<kbd>发货</kbd>将会通过您的微信公众号给客户发送一条通知</p>\r\n        </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n<div class="modal-footer">\r\n  <button type="button" class="btn btn-default" ng-click="cancel()">取消</button>\r\n  <button type="button" class="btn btn-primary" ng-click="shipping()">发货</button>\r\n</div>--><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">{{order.status.shipping?\'修改快递单号\':\'发货确认\'}}</h4></div><div class="modal-body"><!--物流发货--><div ng-show="receiver.scene === \'logistics\'"><div class="radio-exp"><div class="col-xs-2">配送方式</div><div class="col-xs-10"><label class="radio-inline"><input type="radio" ng-model="exp.type" value="0" name="exp.type">快递配送</label><label class="radio-inline"><input type="radio" ng-model="exp.type" value="1" name="exp.type">自主配送</label></div></div><!--快递配送--><form class="form-horizontal form-exp" name="giftOrderShippingForm" ng-if="exp.type == 0"><div class="form-group"><label class="col-xs-2 control-label">快递公司</label><div class="col-xs-10"><select name="exp.company" class="form-control" ng-model="$parent.exp.company" ng-options="com.name for com in express.companies" required><option value="">请选择</option></select><p ng-show="giftOrderShippingForm[\'exp.company\'].$error.required && submitted" class="help-block">快递公司必须填写.</p></div></div><div class="form-group"><label class="col-xs-2 control-label">快递单号</label><div class="col-xs-10"><input name="exp.no" type="text" class="form-control" ng-model="$parent.exp.no" placeholder="请输入快递单号" required><p ng-show="giftOrderShippingForm[\'exp.no\'].$error.required && submitted" class="help-block">快递单号必须填写.</p></div></div><div class="form-group has-warning"><p class="help-block text-exp col-xs-12">填写完整的快递信息，点击［确定发货］完成发货。发货后，系统将会通过商家公号派发给消费者一条发货通知，以告知消费者已发货以及快递单号等物流信息。</p></div></form><!--自主配送--><div ng-show="exp.type == 1" class="div-self"><p class="col-xs-12 help-block">自主配送方式适用于有自主配送团队的商家发货使用。发货时无需填写快递单号等物流信息，点击［确定发货］即可完成发货。</p></div></div><!--门店发货--><div ng-if="receiver.scene === \'poi\'"><div class="form-group has-warning"><p class="help-block text-center">确定发货？点击<kbd>发货</kbd>将会通过您的微信公众号给客户发送一条通知</p></div></div></div><div class="modal-footer form-btn"><button type="button" class="btn btn-com btn-sure_exp" ng-click="shipping()">发货</button> <button type="button" class="btn btn-com btn-cancel_exp" ng-click="cancel()">取消</button></div>'),e.put("app/gift/gift.order.wx.qrcode.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">下载声音卡</h3></div><div class="modal-body"><img src="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket={{qrcode_ticket}}" style="width:200px"></div><div class="modal-footer">点击二维码下载</div>'),e.put("app/gift/gift.post.html",'<p class="gift-post-title"><i class="fa fa-gift"></i> <span>填写礼物详情</span></p><form name="giftForm" ng-submit="post()" class="form-horizontal form-post" novalidate><!--礼物标题--><div class="row form-group gift-common" ng-class="{ \'has-success\': giftForm[\'gift.name\'].$valid && submitted,\n                    \'has-error\' : giftForm[\'gift.name\'].$invalid && submitted }"><div class="col-xs-1"><label for="gift.name" class="control-label control-label-cust">礼物标题：</label></div><div class="col-xs-11"><input type="text" name="gift.name" ng-model="gift.info.name" ng-disabled="isAllowUpdate" class="form-control" ng-maxlength="500" required><p ng-show="giftForm[\'gift.name\'].$error.required && submitted" class="help-block">礼物标题必须填写.</p><p ng-show="giftForm[\'gift.name\'].$error.maxlength" class="help-block">最多15个字.</p></div></div><!--副标题--><div class="form-group row gift-common" ng-class="{ \'has-success\': giftForm[\'gift.lead\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.lead\'].$invalid && submitted }"><div class="col-xs-1"><label for="gift.lead" class="control-label control-label-cust">副标题 ：</label></div><div class="col-xs-11"><textarea name="gift.lead" ng-model="gift.info.lead" ng-disabled="isAllowUpdate" class="form-control" rows="5" placeholder="引导消费者送礼的营销文案，如：“送一杯咖啡，对ta说谢谢...” "></textarea><p ng-show="giftForm[\'gift.lead\'].$error.required && submitted" class="help-block">礼物副标题必须填写.</p></div></div><!--礼物单价--><div class="form-group row gift-common" ng-class="{ \'has-success\': giftForm[\'gift.price\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.price\'].$invalid && submitted }"><div class="col-xs-1"><label for="gift.price" class="control-label control-label-cust">商品价格：</label></div><div class="col-xs-3"><div class="input-group"><span class="input-group-addon"><i class="fa fa-rmb"></i></span> <input type="text" name="gift.price" ng-model="gift.info.price" ng-disabled="isAllowUpdate" class="form-control" required></div><p ng-show="giftForm[\'gift.price\'].$error.required && submitted" class="help-block">礼物价格必须填写.</p></div></div><!--库存--><div class="form-group row gift-common" ng-class="{ \'has-success\': giftForm[\'gift.num.stock\'].$valid && submitted, \'has-error\' : giftForm[\'gift.num.stock\'].$invalid && submitted }"><div class="col-xs-1"><label for="gift.num.stock" class="control-label control-label-cust">库存：</label></div><div class="col-xs-3"><div class="input-group"><input type="number" stock-validate="{{gift}}" name="gift.num.stock" ng-model="gift.num.stock" class="form-control" placeholder="0"> <span class="input-group-addon">件</span></div><p class="noteStock">库存数字默认为0，代表无库存限制</p><p ng-show="giftForm[\'gift.num.stock\'].$error.smin && submitted" class="help-block"><span ng-if="isAllowUpdate">库存必须大于出货量{{ gift.num.subpay || gift.num.receivers }} </span><span ng-if="!isAllowUpdate">库存必须大于0</span></p><p ng-show="giftForm[\'gift.num.stock\'].$error.smax && submitted" class="help-block">库存必须小于9999999</p></div></div><!--轮播图--><ng-form name="giftCoverForm"><div class="form-group row gift-common" ng-class="{ \'has-success\': uploadFile && submitted,\n                                        \'has-error\' : !uploadFile && submitted }"><div class="col-xs-1"><label for="gift.cover" class="control-label control-label-cust">轮播图：</label></div><div class="col-xs-3"><div class="pull-left preview-image"><img ng-src="{{previewImage}}" ng-if="previewImage" width="80px" height="80px"> <img ng-src="{{config.uriPht + gift.info.cover}}" ng-disabled="isAllowUpdate" ng-if="gift.info.cover && !previewImage" width="80px" height="80px"> <img holder="holder.js/100px80?text=暂无封面&bg=b5b6b6&fg=ffffff" class="img-responsive center-block" ng-if="!gift.info.cover && !previewImage" width="80px" height="80px"></div><div class="upload-file"><file-field class="btn btn-primary" ng-disabled="isAllowUpdate" ng-model="uploadFile" preview="previewImage">选择图片</file-field></div><p class="img-ratio">建议长宽比例1:1</p></div></div></ng-form><!--\n  <div class="form-group" ng-class="{ \'has-success\': giftForm[\'gift.poetry\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.poetry\'].$invalid && submitted }">\n    <label for="gift.poetry" class="col-xs-1 control-label">诗词</label>\n    <div class="col-xs-11">\n      <textarea name="gift.poetry" ng-model="gift.info.poetry" class="form-control" rows="3" placeholder="输入诗词"></textarea>\n      <p ng-show="giftForm[\'gift.poetry\'].$error.required && submitted" class="help-block">\n      礼物名称必须填写.\n      </p>\n    </div>\n  </div>\n  --><!--礼物详情--><div class="form-group row gift-common gift-details" ng-class="{\'has-success\': giftForm[\'gift.detail\'].$valid && submitted,\'has-error\' : giftForm[\'gift.detail\'].$invalid && submitted }"><div class="col-xs-1"><label for="gift.detail" class="hidden-xs control-label control-label-cust">礼物详情：</label></div><div class="col-xs-11 tinymceEdit"><textarea type="text" name="gift.detail" class="form-control" placeholder="输入礼物详情" ng-model="gift.info.detail" ui-tinymce="tinymceOptions" required></textarea><p ng-show="giftForm[\'gift.detail\'].$error.required && submitted" class="help-block">礼物详情必须填写.</p><!--禁止编辑详情时出现遮层--><div ng-show="isAllowUpdate" class="disabled-shade"></div></div></div><!--消费方式--><div class="form-group row gift-common gift-consum"><div class="col-xs-1"><label for="gift.detail" class="hidden-xs control-label control-label-cust">消费方式：</label></div><div class="col-xs-11"><div ng-show="false"><div class="col-xs-1">商品类型：</div><div class="col-xs-11"><div class="row"><div class="col-xs-12"><div class="radio-inline"><label for="consumeType4"><input type="radio" ng-model="gift.status.type" ng-disabled="isAllowUpdate" value="1" name="gift.status.type" id="consumeType4">实物商品</label></div><div class="radio-inline"><label for="consumeType3"><input type="radio" ng-model="gift.status.type" ng-disabled="isAllowUpdate" value="2" name="gift.status.type" id="consumeType3">虚拟商品</label></div></div></div></div></div><!--实物商品--><div ng-if="gift.status.type == 1"><!--物流发货--><div class="row"><div class="col-xs-1"><label class="store store-logistics"><input type="radio" ng-disabled="isAllowUpdate" ng-model="consumeType.type" ng-value="\'logistics\'" name="gift.status.poi_logistics">物流发货</label></div><!--门店自提--><div class="col-xs-2"><label class="store"><input type="radio" ng-disabled="isAllowUpdate" ng-model="consumeType.type" ng-value="\'poi\'" name="gift.status.poi_logistics">门店自提</label></div></div><div class="row gift-poi" ng-if="gift.status.poi"><div class="form-group col-xs-7" ng-class="{ \'has-error\' : giftForm[\'gift.poitag\'].$invalid && submitted}"><div class="triangle"></div><div class="poiSelect"><div class="col-xs-2">参与门店：</div><div class="col-xs-6"><ui-select name="gift.poitag" ng-model="gift.poitag" on-select="selPoiTagCB($item, $model)" ng-disabled="isAllowUpdate" ng-required="gift.status.poi"><ui-select-match placeholder="选择该拼团参与的门店"><span ng-bind="$select.selected.name + \'(\' + $select.selected.num + \'家)\'"></span></ui-select-match><ui-select-choices repeat="poitag in (poitags | filter: $select.search) track by $index" group-by="\'group\'"><span ng-bind="poitag.name + (poitag.id === \'574e8ee63027e17c4b56c0bd\' ? \'\' : \'(\' + poitag.num + \'家)\')"></span></ui-select-choices></ui-select></div><div class="col-xs-4"><p class="form-control-static"><button class="new-poi" href="#" ng-disabled="isAllowUpdate" ng-click="modalPoiTag()">新建门店分组</button></p></div></div></div><!--扫码设备--><!--<div class="form-group form-scanner">\n          \t<div class="col-xs-1">扫码设备： \t</div>\n          \t<div class="col-xs-11">\n          \t\t<div ng-include src="\'/scanner.html\'"></div>\n          \t</div>\n          </div>--></div></div></div></div><!--分享页祝福语模板--><div class="form-group row gift-common editGreeting"><div class="col-xs-1"><label for="gift.detail" class="hidden-xs control-label control-label-cust">其他设置：</label><span class="choise">(选填)</span></div><div class="col-xs-11 showHide"><span>祝福引导语设置</span><span ng-click="hide_detail=!hide_detail">{{hide_detail ? \'展开\' : \'收起\'}} <span class="btn-tigger" ng-class="{up_img : hide_detail, down_img : !hide_detail}"></span></span></div><div class="col-xs-11 edit" ng-hide="hide_detail"><div class="col-xs-7 edit-img"><!--<span>商家可以自定义左图中的祝福语，默认如左图显示：</span>--> <img src="https://img.91pintuan.com/songli/client/guide-shared_new.png" alt=""></div><div class="col-xs-5 edit-main"><div class="col-xs-12 guide"><span>商家可以自定义左图中的祝福文字，默认文字如左图：</span><br><span>已有8人收到了礼物 其中8为当前人数</span></div><!--标题--><div class="row edit-title" ng-class="{ \'has-success\': giftForm[\'gift.info.benedictory.title\'].$valid && submitted,\'has-error\' : giftForm[\'gift.info.benedictory.title\'].$invalid && submitted }"><label class="label-left col-xs-3" for="gift.info.benedictory.title">祝福语标题：</label><input type="text" name="gift.info.benedictory.title" placeholder="默认：已有{NUM}人收到了礼物 " ng-model="gift.info.benedictory.title" ng-disabled="isAllowUpdate" ng-maxlength="40" class="col-xs-9" ng-pattern="/^[^\\{NUM\\}]*\\{NUM\\}[^\\{NUM\\}]*$/"><p class="col-xs-12 note">说明: {NUM} 为占位符</p><p ng-show="giftForm[\'gift.info.benedictory.title\'].$error.maxlength && submitted" class="help-block col-xs-12">最多15个字</p><p ng-show="giftForm[\'gift.info.benedictory.title\'].$error.pattern && submitted" class="help-block col-xs-12">{NUM}只能出现一次且必须出现一次</p></div><!--祝福语--><div class="row edit-title"><div class="col-xs-12" ng-class="{ \'has-success\': giftForm[\'gift.info.benedictory.content\'].$valid && submitted,\'has-error\' : giftForm[\'gift.info.benedictory.content\'].$invalid && submitted }"><label class="label-left col-xs-3" for="gift.info.benedictory.content">祝福语：</label><input type="text" name="gift.info.benedictory.content" placeholder="默认：{RECEIVER}收到了礼物" ng-model="gift.info.benedictory.content" ng-disabled="isAllowUpdate" class="col-xs-9" ng-maxlength="30" ng-pattern="/^[^\\{RECEIVER\\}]*\\{RECEIVER\\}[^\\{RECEIVER\\}]*$/"><p class="col-xs-12 note">说明: {RECEIVER} 为占位符</p><p class="help-block col-xs-12" ng-show="giftForm[\'gift.info.benedictory.content\'].$error.maxlength && submitted">最多十个字</p><p class="help-block col-xs-12" ng-show="giftForm[\'gift.info.benedictory.content\'].$error.pattern && submitted">{RECEIVER}只能出现一次且必须出现一次</p></div><!-- \n          <div class="col-xs-12"\n            ng-class="{ \'has-success\': giftForm[\'gift.info.benedictory.one2one\'].$valid && submitted,\'has-error\' : giftForm[\'gift.info.benedictory.one2one\'].$invalid && submitted }">\n            <label class="label-left col-xs-3" for="gift.info.benedictory.one2one">送单人祝福语：</label>\n            <input type="text" name="gift.info.benedictory.one2one"\n               placeholder="默认：{SENDER} 谢谢 {RECEIVER} ..."\n               ng-model="gift.info.benedictory.one2one"\n               class="col-xs-9"\n               ng-maxlength="30"\n               ng-pattern="/^[^\\{SENDER\\}|\\{RECEIVER\\}]*\\{SENDER\\}(.*)\\{RECEIVER\\}[^\\{SENDER\\}|\\{RECEIVER\\}]*$/"\n            >\n            <p class="col-xs-12 note">说明: {SENDER} {RECEIVER} 为占位符</p>\n            <p ng-show="giftForm[\'gift.info.benedictory.one2one\'].$error.maxlength && submitted" class="help-block col-xs-12">最多10个字</p>\n            <p ng-show="giftForm[\'gift.info.benedictory.one2one\'].$error.pattern && submitted" class="help-block col-xs-12">{SENDER}和{RECEIVER}只能出现一次且必须出现一次</p>\n          </div>\n          <div class="col-xs-12" \n            ng-class="{ \'has-success\': giftForm[\'gift.info.benedictory.one2many\'].$valid && submitted,\'has-error\' : giftForm[\'gift.info.benedictory.one2many\'].$invalid && submitted }">\n            <label class="label-left col-xs-3 " for="gift.info.benedictory.one2many">送多人祝福语：</label>\n            <input type="text" name="gift.info.benedictory.one2many"\n               placeholder="默认：{SENDER} 谢谢 TA的朋友们"\n               ng-model="gift.info.benedictory.one2many"\n               class="col-xs-9"\n               ng-maxlength="30"\n               ng-pattern="/^[^\\{SENDER\\}]*\\{SENDER\\}[^\\{SENDER\\}]*$/"\n            >\n            <p class="col-xs-12 note">说明: {SENDER} 为占位符</p>\n            <p class="help-block col-xs-12" ng-show="giftForm[\'gift.info.benedictory.one2many\'].$error.maxlength && submitted">最多十个字</p>\n            <p class="help-block col-xs-12" ng-show="giftForm[\'gift.info.benedictory.one2many\'].$error.pattern && submitted">\n              {SENDER}只能出现一次且必须出现一次\n            </p>\n          </div>\n          --></div></div></div></div><!--上架--><div class="form-group row form-submit"><div class="col-xs-3 form-foot"><button type="submit" class="btn btn-primary btn-block btn-ground" ng-bind="gift.id ? \'更 新\' :  \'发 布\'"></button></div></div></form>'),e.put("app/gift/gift.qrcode.html",'<p class="gift-post-title"><i class="fa fa-gift"></i> <span>商品二维码</span></p><form class="form-horizontal row form-url" role="form"><div class="col-xs-1"><label for="url" class="control-label">商品地址</label></div><div class="col-xs-10"><input type="text" name="url" class="form-control" ng-model="url"></div><div class="col-xs-1"><button type="button" clip-copy="getTextToCopy()" clip-click="doSomething()" class="btn btn-default">复制链接</button></div></form><div class="row form-shop"><div class="col-xs-6"><div class="text-center text-code"><qrcode version="8" error-correction-level="H" size="200" data="{{text}}"></qrcode><p>商品二维码</p><p>扫描即可查看礼物</p></div></div><div class="col-xs-6"><div class="panel panel-default"><div class="panel-heading">{{commodity.info.name}}</div><div class="panel-body" style="padding:0"><iframe ng-src="{{url}}" width="100%" height="517px" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="auto" allowtransparency="yes"></iframe></div></div></div></div>'),e.put("app/login/login.html",'<h1 class="text-center">欢迎使用送你微信公众号第三方平台</h1><div class="text-center"><img src="assets/images/icon_button3_1.png" ng-click="wechat()"></div>'),e.put("app/login/login.worker.html",'<div style="width:320px;margin:50px auto"><form name="loginForm" ng-submit="login()" novalidate><div class="form-group" ng-class="{ \'has-error\' : loginForm.telephone.$invalid && submitted}"><div class="input-group"><span class="input-group-addon"><i class="fa fa-phone fa-2 fa-fw"></i></span> <input type="tel" name="telephone" class="form-control" placeholder="请输入您的手机号码" ng-model="user.telephone" required phone></div><p ng-show="loginForm.telephone.$invalid && submitted" class="help-block">手机号不符合规则</p></div><div class="form-group" ng-class="{ \'has-error\' : loginForm.password.$invalid &&  submitted}"><div class="input-group"><span class="input-group-addon"><i class="fa fa-key fa-2 fa-fw"></i></span> <input type="password" name="password" class="form-control" placeholder="请输入密码" ng-model="user.password" required></div><p ng-show="loginForm.password.$invalid && submitted" class="help-block">请输入密码需要</p></div><div class="form-group"><button type="submit" class="btn btn-block btn-primary">登录</button></div></form></div>'),e.put("app/login/logout.html",'<div class="text-center"><i class="fa fa-spinner fa-spin fa-5x"></i></div>'),e.put("app/main/guide.mobile.html",'<div ng-show="vecter" class="vecter_container" ng-style="visualHeight"><div class="vecter-logo middle"><img src="https://img.91pintuan.com/songli/server/index/mobile/91songlilogo.png"></div><div class="vecter-form"><span>请完善您的商家信息</span><form name="leadsForm" novalidate><div class="form-group"><label for="alias" class="hide">服务商编码</label><input type="hidden" id="alias" name="alias" placeholder="请输入服务商编码" value="{{ vecter }}" readonly="readonly"></div><div class="form-group"><label for="pubno" class="hide">公号名称:</label><input type="text" id="pubno" name="pubno" placeholder="请输入您企业或个人的公众号名称" ng-value="pubno" ng-style="inputWidth" ng-model="pubno" ng-minlength="1" ng-maxlength="50" required><p ng-show="leadsForm.pubno.$error.required && submitted" class="help-block">* 公众号名称必须填写.</p><p ng-show="leadsForm.pubno.$error.minlength && submitted" class="help-block">* 公众号名称字数太少.</p><p ng-show="leadsForm.pubno.$error.maxlength && submitted" class="help-block">* 公众号名称字数太多.</p></div><div class="form-group"><label for="linkman" class="hide">姓名:</label><input type="text" id="linkman" name="linkman" placeholder="请输入姓名" ng-model="linkman" ng-value="linkman" ng-style="inputWidth" ng-minlength="1" ng-maxlength="10" required><p ng-show="leadsForm.linkman.$error.required && submitted" class="help-block">* 姓名必须填写.</p><p ng-show="leadsForm.linkman.$error.minlength && submitted" class="help-block">* 姓名字数太少.</p><p ng-show="leadsForm.linkman.$error.maxlength && submitted" class="help-block">* 姓名字数太多.</p></div><div class="form-group"><label for="telephone" class="hide">手机号:</label><input type="telephone" id="telephone" name="telephone" ng-value="telephone" ng-model="telephone" ng-style="inputWidth" placeholder="请输入手机号" phone required><p ng-show="leadsForm.telephone.$error.required && submitted" class="help-block">* 手机号码必须填写.</p><p ng-show="leadsForm.telephone.$error.phone && submitted" class="help-block">* 手机号码输入不正确.</p></div></form><button type="submit" class="btn_submit" ng-click="submit()">提交</button></div></div><div ng-show="!vecter" class="noVecter"><img src="https://img.91pintuan.com/songli/server/index/mobile/91songli_logo.png"><div class="link"><span>请用电脑登陆91送礼官网</span> <a href="http://www.91songli.com">www.91songli.com</a><p>{{ (phone).slice(0, 15) }}</p><p>{{ (phone).slice(16, 50) }}</p></div></div>'),e.put("app/main/main.home.academy.html",'<div class="mgtop"></div><div ng-controller="academyController"><!--首图--><div class="banner"><div class="img"><a><img ng-src="{{ ptSrc + \'20170115.jpg\' }}" alt=""></a></div><div class="logo" ng-hide="true"><img ng-src="{{ ptSrc + \'logo1.png\' }}" alt=""><!--右上角logo: logo1 正在报名；logo11 报名结束 --></div><!--<a ng-hide="false" ng-href="{{ oneUrl + \'302965815/86868344.shtml\' }}" class="point"></a>--></div><div class="course"><!--课程标题--><div class="c_head"><div class="c_img"><img ng-src="{{ptSrc + \'title-lesson.png\' }}" alt=""></div><div class="c_bd"></div></div><!--课程视频--><div class="c_body"><ul class="ul-list" style="height: {{line * 370}}px"><li class="li-list" ng-repeat="item in academy"><!--收费课程--><div ng-if="item.type" class="top"><a href=""><img ng-src="{{ ptSrc + item.coverImg }}" alt=""></a><div class="box-top"><p>该课程为付费课程</p><p>收看该课程视频，请先参团购买</p><div class="vcode-lesson"><img ng-src="{{ ptSrc + item.vcodeImg }}" alt=""></div><p>请用微信扫码参团</p></div></div><!--免费课程--><div ng-if="!item.type" class="top"><div ng-if="videoUrl && item.href"><a ng-href="{{ videoUrl + item.href }}"><img ng-src="{{ ptSrc + item.coverImg }}" alt=""></a><a ng-href="{{ videoUrl + item.href }}" class="point"></a></div><div ng-if="otherUrl && item.otherHref"><a ng-href="{{ otherUrl + item.otherHref }}"><img ng-src="{{ ptSrc + item.coverImg }}" alt=""></a><a ng-href="{{ otherUrl + item.otherHref }}" class="point"></a></div><div ng-if="oneUrl && item.oneHref"><a ng-href="{{ oneUrl + item.oneHref }}"><img ng-src="{{ ptSrc + item.coverImg }}" alt=""></a><a ng-href="{{ oneUrl + item.oneHref }}" class="point"></a></div></div><div class="bottom"><p>{{ item.title }}</p><p>分享人：{{ item.share }} {{ item.shareName }}</p><p>时&nbsp;&nbsp;&nbsp;间 ：{{ item.time }} {{ item.num }}</p></div><div ng-if="item.logoImg" class="logo"><img ng-src="{{ ptSrc + item.logoImg }}" alt=""></div></li></ul></div></div><!--专题分享--><div class="share"><div class="s_head"><div class="s_img"><img ng-src="{{ ptSrc + \'title2.png\'}} " alt=""></div><div class="s_bd"></div></div><div class="s_body"><div class="box1"><a ng-href="{{ videoUrl + \'id_XMTY1OTg3OTc4NA==.html\' }}"><img ng-src="{{ ptSrc + \'share1.png\' }}" alt=""></a><div class="info"><a href="{{ videoUrl + \'id_XMTY1OTg3OTc4NA==.html\' }}">水果门店的互联网营销</a></div></div><div class="box2"><a href="{{ videoUrl + \'id_XMTY2MDM3ODk3Mg==.html\' }}"><img ng-src="{{ ptSrc + \'share2.png\' }}" alt=""></a><div class="info"><a href="{{ videoUrl + \'id_XMTY2MDM3ODk3Mg==.html\' }}">1天66万公斤车厘子的奇迹</a></div></div><div class="box3"><a href="{{ videoUrl + \'id_XMTY2MDA2NzY0NA==.html\' }}"><img ng-src="{{ ptSrc + \'share3.png\' }}" alt=""></a><div class="info"><a href="{{ videoUrl + \'id_XMTY2MDA2NzY0NA==.html\' }}">美妆店用拼团销量翻6倍？</a></div></div><div class="box4"><a href="{{ videoUrl + \'id_XMTY1OTg3ODQ2OA==.html\' }}"><img ng-src="{{ ptSrc + \'share4.png\' }}" alt=""></a><div class="info"><a href="{{ videoUrl + \'id_XMTY1OTg3ODQ2OA==.html\' }}">告别团购，引爆社群营销的新武器</a></div></div></div></div><div class="code"><div class="code_box"><img ng-src="{{ ptSrc + \'academy-code.png\' }}" alt=""></div></div></div>'),e.put("app/main/main.home.agent.html",'<div class="mgtop"></div><div class="agentbanner"><div class="container"><img src="https://img.91pintuan.com/home/ymyimg/91agentsb.png"><div><p>91诚意与全国各地，有能力为客户提供社会化营销或微信开发配置服务的企业或个人</p><p>建立代理合作关系。具体合作方式，请联系我们：</p><p>📱－13901295243 微信－13901295243</p></div></div></div><div class="agentmiddle"><img class="img" src="https://img.91pintuan.com/home/ymyimg/91agentfws.png"><ul><li><img src="https://img.91pintuan.com/home/ymyimg/1.png"><p class="one">苏州微超人网络科技有限公司</p><p>联系人－吴益斌</p><p class="pnumber">Tel-15370179708</p></li><li><img src="https://img.91pintuan.com/home/ymyimg/2.png"><p class="one">潍坊三邦网络科技有限公司</p><p>联系人－周维中</p><p class="pnumber">Tel-15863623119</p></li><li><img src="https://img.91pintuan.com/home/ymyimg/3.png"><p class="one">武汉微享科技有限公司</p><p>联系人－程传东</p><p class="pnumber">Tel-13886066418</p></li><li><img src="https://img.91pintuan.com/home/ymyimg/4.png"><p class="one">衢州市汇美网络科技有限公司</p><p>联系人－贵国军</p><p class="pnumber">Tel-15372700101</p></li></ul><ul><li><img src="https://img.91pintuan.com/home/ymyimg/5.png"><p class="one">桔子会</p><p>联系人－廖长珍</p><p class="pnumber">Tel-17786409894</p></li><li><img src="https://img.91pintuan.com/home/ymyimg/6.png"><p class="one">山东鲁科讯飞信息技术有限公司</p><p>联系人－林昱良</p><p class="pnumber">Tel-18678365666</p></li><li><img src="https://img.91pintuan.com/home/ymyimg/7.png"><p class="one">内蒙古点客信息技术有限公司</p><p>联系人－张磊</p><p class="pnumber">Tel-18647115660</p></li><li><img src="https://img.91pintuan.com/home/ymyimg/8.png"><p class="one">苏州云润网络科技有限公司</p><p>联系人－张云</p><p class="pnumber">Tel-13918754223</p></li></ul><ul><li><img src="https://img.91pintuan.com/home/ymyimg/9.png"><p class="one">欧洲省钱快讯</p><p>联系人－Thomas Lin</p><p class="pnumber">Tel-3347082575</p></li><!--新添加--><li><img src="https://img.91pintuan.com/home/ymyimg/jinzhengkeji.png"><p class="one">潍坊地标电商服务有限公司</p><p>联系人－王清彬</p><p class="pnumber">Tel-18953612319</p></li><li><img src="https://img.91pintuan.com/home/ymyimg/banmakeji.png"><p class="one">成都斑马网络科技有限公司</p><p>联系人－陶毅</p><p class="pnumber">Tel-17780508081</p></li><li><img src="https://img.91pintuan.com/home/ymyimg/huicaiwangluo.png"><p class="one">山西绘彩网络科技有限公司</p><p>联系人－张乐乐</p><p class="pnumber">Tel-18035706114</p></li></ul><ul><li><img src="https://img.91pintuan.com/home/ymyimg/shanxipintuan.png"><p class="one">山西拼团网络科技有限公司</p><p>联系人－宋振中</p><p class="pnumber">Tel-13333498844</p></li><li><img src="https://img.91pintuan.com/home/ymyimg/caidili.png"><p class="one">菜地里农产品（深圳）有限公司</p><p>联系人－李强</p><p class="pnumber">Tel-13603096775</p></li><li><img src="https://img.91pintuan.com/home/ymyimg/hrblm.jpg"><p class="one">哈尔滨绿麓文化传媒有限公司</p><p>联系人－慕宇</p><p class="pnumber">Tel-15104523732</p></li><li><img src="https://img.91pintuan.com/home/ymyimg/ybsx.png"><p class="one">湖南一步生鲜电子商务有限公司</p><p>联系人－徐健午</p><p class="pnumber">Tel-18684835588</p></li></ul></div><div class="agentbottom"><a href="https://jinshuju.net/f/8d5mh5"><p>成为91服务商<img src="https://img.91pintuan.com/home/ymyimg/jt.png"></p></a></div>'),e.put("app/main/main.home.cuncunle.html",'<div class="nav-sl"><div class="ccl-blank ccl-fl"></div><div class="ccl-fl"><a href="#"><span><img src="https://img.91pintuan.com/cunleImg/nav_logo.png" alt=""></span><span><img src="https://img.91pintuan.com/cunleImg/nav_vertical.png" alt=""></span><span style="vertical-align: -15px"><img src="https://img.91pintuan.com/cunleImg/nav_font.png" alt=""></span></a></div></div><div style="clear: both"></div><div class="main-sl"><div class="ccl-blank ccl-fl"></div><div class="main-l ccl-fl"><div class="img-l"><img src="https://img.91pintuan.com/cunleImg/send/main_left.png" alt=""></div><div class="mbtn"><a href="#"><button class="sign" ng-click="wechat()">商家登录</button></a> <a href="#"><button class="open" ng-click="wechat()">注册开通</button></a></div></div><div class="main-r ccl-fr"><div class="img-r"><img src="https://img.91pintuan.com/cunleImg/send/main_right.png" alt=""></div></div></div><div class="function-sl"><div class="fun-title ccl-mr"><img src="https://img.91pintuan.com/cunleImg/send/fun-title.png" alt=""></div><div class="fun-icon ccl-mr"><img src="https://img.91pintuan.com/cunleImg/send/fun-icon.png" alt=""></div><div class="fun-img"><span><img src="https://img.91pintuan.com/cunleImg/send/fun-img1.png" alt=""></span><span><img src="https://img.91pintuan.com/cunleImg/send/fun-img2.png" alt=""></span><span><img src="https://img.91pintuan.com/cunleImg/send/fun-img3.png" alt=""></span><span><img src="https://img.91pintuan.com/cunleImg/send/fun-img4.png" alt=""></span></div></div><div class="step-sl"><div class="step-title ccl-mr"><img src="https://img.91pintuan.com/cunleImg/send/step-title.png"></div><div class="step-icon ccl-mr"><img src="https://img.91pintuan.com/cunleImg/send/step-icon.png" alt=""></div><div class="step-img"><span><img src="https://img.91pintuan.com/cunleImg/send/step-img1.png" alt=""></span><span><img src="https://img.91pintuan.com/cunleImg/send/step-img2.png" alt=""></span><span><img src="https://img.91pintuan.com/cunleImg/send/step-img3.png" alt=""></span></div></div><div class="foot-sl"><div class="bl"><span>联系我们</span><br><span>GET IN TOUCH</span></div><div class="bl"><span>合作联络</span><br><span>010-51692643</span></div><div class="bl"><span>关注我们的微信号</span><br><div class="follow"><span><img src="https://img.91pintuan.com/cunleImg/send/wx-inco.png" alt=""></span><span>村村乐</span><div class="hideBox"><div class="triangle"></div><div class="vcode"><img src="https://img.91pintuan.com/cunleImg/send/vcode.png" alt=""></div></div></div></div><div class="bl"><span>京CP证060911号</span></div></div>'),e.put("app/main/main.home.def.html",'<div class="tab-content"><div role="tabpanel" class="tab-pane active" id="index"><div class="bg_black" ng-include="\'app/main/main.home.index.html\'"></div></div><div role="tabpanel" class="tab-pane" id="price"><div class="bg_black" ng-include="\'app/main/main.home.price.html\'"></div></div><div role="tabpanel" class="tab-pane" id="academy"><div class="bg_black" ng-include="\'app/main/main.home.academy.html\'"></div></div><div role="tabpanel" class="tab-pane" id="agent"><div class="bg_black" ng-include="\'app/main/main.home.agent.html\'"></div></div></div>'),
e.put("app/main/main.home.footer.html",'<div class="main_footer"><div class="mfooter"><div class="ft_left fl"><div class="tb"><div class="top"><img src="https://img.91pintuan.com/songli/server/index/company_logo.png" alt=""> <span>北京蜘蛛工社移动科技有限公司</span></div><div class="bottom"><span>北京蜘蛛工社移动科技有限公司是一家专注移动互联网社群营销工具开发的公司。主要产品包括91拼团、91送礼等微信第三方应用。其中91拼团为商家提供微信拼团软件云服务。微信拼团适合水果、餐饮、 母婴、美妆、培训及粉丝周边产品，为商家构建自己的社群电商平台。</span></div></div></div><div class="ft_middle fl"><div class="tb"><div class="top"><img src="https://img.91pintuan.com/songli/server/index/open535.png" alt=""> <span ng-click="wechat()">开通91送礼企业版<em>&gt;&gt;</em></span></div><div class="bottom"><img src="https://img.91pintuan.com/songli/server/index/serve-open.png" alt=""> <a href="https://jinshuju.net/f/8d5mh5"><span>申请成为91服务商<em>&gt;&gt;</em></span></a></div></div></div><div class="ft_right fl"><div class="address"><span><img src="https://img.91pintuan.com/songli/server/index/contact.png" alt=""></span><span>北京蜘蛛工社移动有限公司</span> <span>公司地址：北京海淀区学清路16号学知轩大厦</span> <span>微信公众号：91送礼</span></div></div></div></div>'),e.put("app/main/main.home.index.html",'<div class="mgtop"></div><div class="gift_index"><!--轮播图--><div id="carousel-example-generic" class="carousel slide gift_carousel" data-ride="carousel" data-interval="2000"><!-- Indicators --><ol class="carousel-indicators scroll_point"><li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li><li data-target="#carousel-example-generic" data-slide-to="1"></li><li data-target="#carousel-example-generic" data-slide-to="2"></li></ol><!-- Wrapper for slides --><div class="carousel-inner scroll" role="listbox"><div class="item sl_comm scroll_one active"><div class="img"><img src="https://img.91pintuan.com/songli/server/index/scroll_one_bg.png"></div><div ng-click="wechat()" class="btn_comm btn_one"><span>免 费 试 用<em>&gt;&gt;</em></span></div></div><div class="item sl_comm scroll_two"><div class="img"><img src="https://img.91pintuan.com/songli/server/index/scroll_two_bg.png"></div><div ng-click="wechat()" class="btn_comm btn_two"><span>免 费 试 用<em>&gt;&gt;</em></span></div></div><div class="item sl_comm scroll_three"><div class="img"><img src="https://img.91pintuan.com/songli/server/index/scroll_three_bg.png"></div><div ng-click="wechat()" class="btn_comm btn_three"><span>免 费 试 用<em>&gt;&gt;</em></span></div></div></div><!-- Controls --> <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev"><span class="sr-only">Previous</span> </a><a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next"><span class="sr-only">Next</span></a></div><!--详细介绍--><div class="gift_intr"><div class="intr_title"><span>微信轻送礼 - 全新的送礼营销玩法</span> <span><!--裂变积粉的分享团，团长拿外快的佣金团，人越多越便宜的阶梯团！91为商家提供最最全面的拼团玩法！--></span></div><div class="intr_detail"><div class="detail fl"><a href="http://www.le.com/ptv/vplay/27520926.html"><span><img src="https://img.91pintuan.com/songli/server/index/detail_l.png" alt=""></span><span>门店引流新玩法</span> <span>线下门店导流 / 支持多门店</span> <span>多门店数据统计 / 支持LBS</span> <span>详细介绍</span></a></div><div class="detail fl"><a href="http://www.le.com/ptv/vplay/27522312.html"><span><img src="https://img.91pintuan.com/songli/server/index/detail_m.png" alt=""></span><span>礼物电商营销新工具</span> <span>为礼物增值付能，让礼物更有心意</span> <span>同时送多人，一个礼包轻松解决</span> <span>详细介绍</span></a></div><div class="detail dl fl"><a href="http://www.le.com/ptv/vplay/27528399.html"><span><img src="https://img.91pintuan.com/songli/server/index/detai_r.png" alt=""></span><span>大客户礼包</span> <span>商家可以创建无需付费的大礼包</span> <span>建立渠道，建立合作关系</span> <span>详细介绍</span></a></div></div></div><!--套餐--><div class="charge"><div class="charge_title"><span>订单使用量套餐</span></div><div class="charge_list"><span><img src="https://img.91pintuan.com/songli/server/index/charge_l1.png" alt=""></span><span><img src="https://img.91pintuan.com/songli/server/index/charge_m1.png" alt=""></span><span><img src="https://img.91pintuan.com/songli/server/index/charge_r1.png" alt=""></span></div><div class="charge_open" ng-click="wechat()"><span>立 即 开 通</span> <span>&gt;&gt;</span></div></div><!--开通--><div class="sl_open"><div class="step"><img src="https://img.91pintuan.com/songli/server/index/open_step1.png" alt=""></div></div></div><!--手机端的显示--><div class="mobile"><div ng-include="\'app/main/main.mobile.html\'"></div></div>'),e.put("app/main/main.home.navbar.html",'<div class="index_nav"><div class="logo fl"><img src="https://img.91pintuan.com/songli/server/index/songli-logo.png" alt=""></div><ul class="nav_list fl" role="tablist"><li role="presentation" class="active"><a href="#index" role="tab" data-toggle="tab">首页</a></li><li role="presentation"><a href="#price" role="tab" data-toggle="tab">如何收费</a></li><li role="presentation"><a href="#academy" role="tab" data-toggle="tab">91新营销</a></li><li role="presentation"><a href="#agent" role="tab" data-toggle="tab">成为91服务商</a></li></ul><div class="btn_group fl"><button class="btn btn_open" ng-click="wechat()">免费开通</button> <button class="btn btn_sing" ng-click="wechat()">商家登录</button></div></div>'),e.put("app/main/main.home.price.html",'<div class="mgtop"></div><!--套餐--><div class="charge"><div class="charge_title"><span>订单使用量套餐</span></div><div class="charge_list"><span><img src="https://img.91pintuan.com/songli/server/index/charge_l1.png" alt=""></span><span><img src="https://img.91pintuan.com/songli/server/index/charge_m1.png" alt=""></span><span><img src="https://img.91pintuan.com/songli/server/index/charge_r1.png" alt=""></span></div><div class="charge_open" ng-click="wechat()"><span>立 即 开 通</span> <span>&gt;&gt;</span></div></div>'),e.put("app/main/main.html",'<div ng-if="!wxUser && app.suffix === \'.def\' " class="main_nav" ng-include="\'app/main/main.home.navbar.html\'"></div><div ng-if="!wxUser" class="main_body" ng-include="\'app/main/main.home\' + app.suffix + \'.html\'"></div><div ng-if="!wxUser && app.suffix === \'.def\' " ng-include="\'app/main/main.home.footer.html\'"></div><div ng-if="wxUser" ng-include="\'app/main/main.signin.html\'"></div>'),e.put("app/main/main.mobile.html",'<div ng-controller="SwiperCtrl"><ks-swiper-container swiper="swiper" slides-per-column="0" space-between="5" direction="vertical" loop="false"><ks-swiper-slide class="swiper-slide one_page" ng-style="visualHeight"><div class="top"><img src="https://img.91pintuan.com/songli/server/index/mobile/one_page_top.jpg" alt=""></div><div class="bottom"><p>现在开通91送礼</p><p ng-if="vecter">免费领取<span>{{ data.number }}</span>条使用订单</p><a href="/guide">立即开通</a></div></ks-swiper-slide><ks-swiper-slide class="swiper-slide two_page" ng-style="visualHeight"><div class="top"><img src="https://img.91pintuan.com/songli/server/index/mobile/two_page_top.jpg" alt=""></div><div class="bottom"><img ng-style="halfScreen" src="https://img.91pintuan.com/songli/server/index/mobile/two_1.jpg" alt=""> <img ng-style="halfScreen" src="https://img.91pintuan.com/songli/server/index/mobile/two_2.jpg" alt=""> <img ng-style="halfScreen" src="https://img.91pintuan.com/songli/server/index/mobile/two_3.jpg" alt=""> <img ng-style="halfScreen" src="https://img.91pintuan.com/songli/server/index/mobile/two_4.jpg" alt=""></div></ks-swiper-slide><ks-swiper-slide class="swiper-slide three_page" ng-style="visualHeight"><div class="top"><p>马上开通91送礼</p><p ng-if="vecter">免费领取<span>{{ data.number }}</span>条使用订单</p><a href="/guide">立即开通</a></div><div class="bottom"><img src="https://img.91pintuan.com/songli/server/index/mobile/three_page.jpg" alt=""></div></ks-swiper-slide></ks-swiper-container></div>'),e.put("app/main/main.mobile.success.html",'<div class="success" ng-style="visualHeight"><div class="black"></div><img class="icon" src="https://img.91pintuan.com/home/dist/img/success_icon.jpg" alt=""><p class="note_t"><strong class="text-danger" id="number">{{ data.number }}</strong>条使用订单已经领取成功</p><p class="note_b">稍后91客服顾问会联系您并协助您完成后续开通步骤</p><div class="foot"><div class="left"><img src="https://img.91pintuan.com/songli/server/index/mobile/91songli_logo.png"></div><div class="right"><span>{{ (phone).slice(0, 15) }}</span> <span>{{ (phone).slice(16, 50) }}</span> <span>关注微信公众号：91送礼</span></div></div></div>'),e.put("app/main/main.popup.html",'<div class="modal-header popup-head"><button class="close" ng-click="$dismiss()"><span>&times;</span></button></div><div class="modal-body modal-popup"><h1 class="title">欢迎使用91送礼服务</h1><p class="cont">您好，您已成功开通91送礼服务！我们为新商家提供5个免费订单供体验使用。使用完成后可到充值中心进行订单充值，即可继续使用。</p><button class="btn"><button ng-click="$dismiss()">完成</button></button></div>'),e.put("app/main/main.signin.html",'<form class="form-horizontal form-home"><div class="row form-group form-bot bot1"><div class="col-xs-1"><label class="control-label">授权公众号</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.nick_name}}</p></div></div><!--<div class="form-group">\n    <label class="col-sm-2 control-label">头像</label>\n    <div class="col-sm-10">\n      <p class="form-control-static"><img class="media-object img-thumbnail user-img" alt="User Picture" src="{{ wxUser.head_img}}" style="width:64px;"></p>\n    </div>\n  </div>--><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">服务类型</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.service_type_info}}</p></div></div><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">认证类型</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.verify_type_info}}</p></div></div><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">原始ID</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.user_name}}</p></div></div><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">服务商编码</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.info.agent}}</p></div></div><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">微信号</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.alias}}</p></div></div><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">礼物列表</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.uri}}</p></div></div><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">我的礼物</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.uri}}/order/list</p></div></div><!--<div class="form-group">\n    <label class="col-sm-2 control-label">二维码</label>\n    <div class="col-sm-10">\n      <p class="form-control-static">\n        <img src="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket={{qrcode_ticket}}" style="width:320px;">\n      </p>\n    </div>\n  </div>--></form>'),e.put("app/main/null.html",'<div class="modal-header popup-head"><button class="close" ng-click="$dismiss()"><span>&times;</span></button></div><div class="modal-body modal-popup"><div ng-if="wxUser.astrict === \'burst\'"><h1 class="title">订单余额不足提醒</h1><p class="cont">商家您好,您当前的订单使用量不足,为不影响您的正常使用,<br>请尽快到<a ui-sref="plans.center" class="myred">充值中心</a>购买!</p></div><div ng-if="wxUser.astrict === \'expired\'"><h1 class="title">会员过期</h1><p class="cont">商家您好,您当前的会员过期,为不影响您的正常使用,<br>请尽快到<a ui-sref="plans.center" class="myred">充值中心</a>购买!</p></div><button class="btn"><a href="/plans/center">充值中心</a></button></div>'),e.put("app/merchant/form.html",'<form class="form-horizontal" name="form" ng-submit="post(form)" novalidate><div class="form-group" ng-class="{ \'has-success\': form[\'info.name\'].$valid && submitted,\n                                      \'has-error\' : form[\'info.name\'].$invalid && submitted }"><label for="info.name" class="col-sm-2 hidden-xs control-label">商家名称</label><div class="col-sm-10"><input type="text" name="info.name" class="form-control" placeholder="请输入商家名字" ng-model="merchant.info.name" required mongoose-error><p ng-show="form[\'info.name\'].$error.required && form[\'info.name\'].$pristine && submitted" class="help-block">商家名称必须填写.</p><p class="help-block" ng-show="form[\'info.name\'].$error.mongoose">{{ errors[\'info.name\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-success\': form[\'info.address\'].$valid && submitted,\n                                      \'has-error\' : form[\'info.address\'].$invalid && submitted}"><label for="info.address" class="col-sm-2 hidden-xs control-label">地 址</label><div class="col-sm-10"><input type="text" name="info.address" class="form-control" placeholder="请输入商家地址" ng-model="merchant.info.address" required mongoose-error><p ng-show="form[\'info.address\'].$error.required && form[\'info.address\'].$pristine && submitted" class="help-block">商家地址必须填写.</p><p class="help-block" ng-show="form[\'info.address\'].$error.mongoose">{{ errors[\'info.address\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-success\': form[\'info.detail\'].$valid && submitted,\n                                      \'has-error\' : form[\'info.detail\'].$invalid && submitted}"><label for="info.detail" class="col-sm-2 hidden-xs control-label">商家介绍</label><div class="col-sm-10"><textarea type="text" name="info.detail" class="form-control" placeholder="请输入商家简介" ng-model="merchant.info.detail" required mongoose-error></textarea><p ng-show="form[\'info.detail\'].$error.required && form[\'info.detail\'].$pristine && submitted" class="help-block">商家介绍必须填写.</p><p class="help-block" ng-show="form[\'info.detail\'].$error.mongoose">{{ errors[\'info.detail\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-success\': form[\'info.linkman\'].$valid && submitted,\n                                      \'has-error\': form[\'info.linkman\'].$invalid && submitted }"><label for="info.linkman" class="col-xs-2 control-label">联系人</label><div class="col-xs-10"><input type="text" name="info.linkman" class="form-control" placeholder="请输入联系人姓名" ng-model="merchant.info.linkman" required><p class="help-block" ng-show="form[\'info.linkman\'].$error.required && submitted">姓名必须填写</p><p class="help-block" ng-show="form[\'info.linkman\'].$error.mongoose">{{ errors[\'info.linkman\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-success\': form[\'info.telephone\'].$valid && submitted,\n                                      \'has-error\': form[\'info.telephone\'].$invalid && submitted }"><label for="info.telephone" class="col-xs-2 control-label">手机号</label><div class="col-xs-10"><input type="text" name="info.telephone" class="form-control" placeholder="请输入联系人手机号" ng-model="merchant.info.telephone" required phone><p class="help-block" ng-show="form[\'info.telephone\'].$error.required && submitted">手机号必须填写</p><p class="help-block" ng-show="form[\'info.telephone\'].$error.phone">手机号格式不正确</p><p class="help-block" ng-show="form[\'info.telephone\'].$error.mongoose">{{ errors[\'info.telephone\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-success\': aggrement === \'YES\' && submitted,\n                                      \'has-error\': aggrement === \'NO\' && submitted }" ng-if="!merchant.id"><label for="aggrement" class="control-label col-xs-2">商户协议</label><div class="col-xs-8"><div class="checkbox"><label><div class="checker"><span class="checked"><input class="uniform" name="aggrement" type="checkbox" ng-model="aggrement" ng-true-value="\'YES\'" ng-false-value="\'NO\'"></span></div><a href="" ng-click="agmMdl()">使用协议</a></label></div><p class="help-block" ng-show="aggrement === \'NO\' && submitted">请确认是否同意商户协议。</p></div></div><div class="text-center"><button class="btn btn-primary btn-login" type="submit" ng-disabled="form.$invalid || isUnchanged(merchant)">{{merchant.id?\'保存修改\':\'提交申请\'}}</button></div></form>'),e.put("app/merchant/info.html",'<form class="form-horizontal" role="form"><div class="form-group" ng-if="!isVerify"><label class="col-sm-2 control-label">资质文件</label><div class="col-sm-10"><p class="form-control-static"><a ui-sref="merchant.upload" class="btn btn-primary btn-sm">请上传资质文件</a></p></div></div><div class="form-group"><label class="col-sm-2 control-label">名称</label><div class="col-sm-10"><p class="form-control-static">{{merchant.info.name}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">地址</label><div class="col-sm-10"><p class="form-control-static">{{merchant.info.address}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">介绍</label><div class="col-sm-10"><p class="form-control-static">{{merchant.info.detail}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">联系人</label><div class="col-sm-10"><p class="form-control-static">{{merchant.info.linkman}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">联系电话</label><div class="col-sm-10"><p class="form-control-static">{{merchant.info.telephone}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">状态</label><div class="col-sm-10"><p class="form-control-static text-danger">{{wxUser.verify?\'申批\':\'未审批\'}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">前台地址</label><div class="col-sm-10"><p class="form-control-static"><a href="http://{{wxUser.appid}}.{{cfgClientUri}}" target="_blank">http://{{wxUser.appid}}.{{cfgClientUri}}</a></p></div></div><div class="form-group"><label class="col-sm-2 control-label">我的礼物地址</label><div class="col-sm-10"><p class="form-control-static"><a href="http://{{wxUser.appid}}.{{cfgClientUri}}/gift/my" target="_blank">http://{{wxUser.appid}}.{{cfgClientUri}}/order/list</a></p></div></div><div class="form-group"><div class="col-sm-10 col-sm-offset-2"><div class="row"><div class="col-xs-6 col-md-3" ng-repeat="file in merchant.files"><a href="" class="thumbnail"><img ng-src="http://p1.ifindu.cn/crop/w_180/h_170{{file}}"></a></div></div></div></div></form>'),e.put("app/merchant/merchant.html",'<div class="panel panel-default"><div class="panel-body text-right"><div style="margin-right:25px"><a ui-sref="merchant" class="btn btn-primary btn-sm" ui-sref-opts="{reload:true}" ng-if="merchant.id">查看</a> <a ui-sref="merchant.post" class="btn btn-primary btn-sm" ng-if="!merchant.id">申请</a> <a ui-sref="merchant.edit" class="btn btn-primary btn-sm" ng-if="merchant.id">编辑</a> <a ui-sref="merchant.upload" class="btn btn-primary btn-sm" ng-if="!isVerify&&merchant.id">上传资质文件</a></div></div><div ui-view=""><div ng-include="\'app/merchant/info.html\'"></div></div></div>'),e.put("app/merchant/upload.html",'<div class="row" nv-file-drop="" uploader="uploader"><div class="col-md-3"><h4>建议图片尺寸640px*300px</h4><p><button class="btn btn-primary" ng-click="select()">选择图片</button> <input name="cover" type="file" multiple="multiple" ng-hide="true" nv-file-select="" uploader="uploader"></p><div ng-show="uploader.isHTML5"><div class="well my-drop-zone" nv-file-over="" uploader="uploader">或拖拽图片到这里</div></div></div><div class="col-md-9" style="margin-bottom: 40px"><p>上传图片数: {{ uploader.queue.length }}</p><table class="table"><thead><tr><th width="50%">名称</th><th ng-show="uploader.isHTML5">大小</th><th ng-show="uploader.isHTML5">进度</th><th>状态</th><th>动作</th></tr></thead><tbody><tr ng-repeat="item in uploader.queue"><td><strong>{{ item.file.name }}</strong><!-- Image preview --><!--auto height--><!--<div ng-thumb="{ file: item.file, width: 100 }"></div>--><!--auto width--><div ng-show="uploader.isHTML5" ng-thumb="{ file: item.file, height: 100 }"></div><!--fixed width and height --><!--<div ng-thumb="{ file: item.file, width: 100, height: 100 }"></div>--></td><td ng-show="uploader.isHTML5" nowrap="nowrap">{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show="uploader.isHTML5"><div class="progress" style="margin-bottom: 0"><div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div></div></td><td class="text-center"><span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span></td><td nowrap="nowrap"><button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess"><span class="glyphicon glyphicon-upload"></span> 上传</button> <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"><span class="glyphicon glyphicon-ban-circle"></span> 取消</button> <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()"><span class="glyphicon glyphicon-trash"></span> 移除</button></td></tr></tbody></table><div><p>队列进度:</p><div class="progress" style=""><div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div></div><p></p><button type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length"><span class="glyphicon glyphicon-upload"></span> 全部上传</button> <button type="button" class="btn btn-warning btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading"><span class="glyphicon glyphicon-ban-circle"></span> 全部取消</button> <button type="button" class="btn btn-danger btn-s" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length"><span class="glyphicon glyphicon-trash"></span> 全部删除</button></div></div></div>'),e.put("app/plans/plans.center.html",'<table class="ytop"><tr><td><div><div class="media-left media1"><a href="#"><img class="media-object" src="{{wxUser.head_img}}"></a></div><div class="media-body mylht"><p class="plsj">{{wxUser.nick_name}}</p><p class="pldd" ng-if="wxUser.status.charge === \'number\'">截止目前，你已使用订单量为{{wxUser.num.pay}}，剩余可使用订单量<span class="ts">{{numbers-wxUser.num.pay}}</span></p><p class="pldd" ng-if="wxUser.status.charge === \'number\'">{{wxUser.expire | date:\'yyyy年MM月dd日\'}}到期</p><p class="pldd" ng-if="wxUser.status.charge === \'time\'">包年包月{{wxUser.time.deadline | date:\'yyyy年MM月dd日\'}}到期</p><span ng-bind="numbers?\'\':\'暂无购买记录\'" ng-class="{\'text-danger\':po_ct_diff}">numbers</span></div></div></td></tr></table><div class="well well-sm well-plan"><div class="czzx"><span class="czzxp" ng-click="chooseCombo(\'order\')" ng-class="{active:pay.combo===\'order\'}">充值套餐</span><!--<span class="czzxp"\n      ng-click="chooseCombo(\'counselor\')"\n      ng-class="{active:pay.combo===\'counselor\'}">增值服务</span>--></div><form class="form-horizontal formh"><!--选充值套餐显示--><div class="form-group myfp" ng-if="pay.combo===\'order\'"><div class="mycolxs3" ng-repeat="plan in plans"><div class="panel panel-plan mypel" ng-class="{\'panel-danger\':selected === $index}" ng-click="selPlan()"><p class="ddsyl">{{plan.name}}</p><h3 class="h3">{{plan.price | currency}}</h3></div></div></div><!--选增值服务显示--><div class="zztc" ng-if="pay.combo===\'counselor\'"><img class="dgzxing1" ng-src="{{appConfig.uriImg+\'/home/ymyimg/dgzximg1.png\'}}"><div class="zzfwdiv"><p>{{plan.name}}&nbsp;&nbsp;&nbsp;{{plan.price | currency}}</p><img ng-src="{{appConfig.uriImg+\'/home/ymyimg/dgzximg2.png\'}}"></div></div><div class="form-group myfp"><ul class="zffsul"><li ng-click="choosePay(\'wepay\')" ng-class="{myname:pay.type===\'wepay\'}">微信支付</li><li ng-click="choosePay(\'alipay\')" ng-class="{myname:pay.type===\'alipay\'}">支付宝转账</li><li ng-click="choosePay(\'manpay\')" ng-class="{myname:pay.type===\'manpay\'}">对公付款</li><li style="width: 55%"></li></ul><!--微信付款--><div class="wxdiv myydiv" ng-if="pay.type === \'wepay\'"><img class="wxzfsm" ng-src="{{appConfig.uriImg+\'/home/ymyimg/wxsmzf.png\'}}"><div class="zongsty"><div class="wxdiv1"><span>实际付款：</span> <span class="bigzi">{{plan.price | currency}}</span></div><div ng-click="payModal()" class="wxqrzf"><a href="#">确认支付</a></div><a href="{{appConfig.uriImg}}/contract/91%E6%8B%BC%E5%9B%A2%E8%90%A5%E9%94%80%E9%A1%BE%E9%97%AE%E5%A2%9E%E9%95%BF%E6%9C%8D%E5%8A%A1%E5%8D%8F%E8%AE%AE.pdf" target="_blank" class="fwxy">《91送你服务协议》</a></div></div><!--支付宝--><div class="zfbdiv myydiv" ng-if="pay.type === \'alipay\'"><img class="zfbdivimg" ng-src="{{appConfig.uriImg+\'/serve/imgs/alipay_ico.png\'}}" style="width:120px"><ul class="zfbdivul"><li>支付宝账号昵称</li><li>账号</li></ul><ul class="zfbdivul1"><li>北京蜘蛛工社移动科技有限公司</li><li>zzgs1803@163.com</li></ul><ul><li class="dgp">支付宝转账完成后，请将以下两个信息：</li><li class="dgp1">开通公众号名称；</li><li class="dgp1">您的支付宝账号；</li><li class="dgp2">发送到91客服微信：yuanwei9008</li></ul></div><!--对公汇款--><div class="dgzffsdiv myydiv" ng-if="pay.type === \'manpay\'"><ul class="dgzffsdivul"><li>账户名</li><li>账号</li><li>开户行</li></ul><ul class="dgyhname"><li>北京蜘蛛工社移动科技有限公司</li><li>11001018800053011997</li><li>建行和平里支行</li></ul><ul><li class="dgp">完成汇款后，请将以下三个信息：</li><li class="dgp1">开通公众号名称；</li><li class="dgp1">个人姓名或公司名称；</li><li class="dgp1">银行回单截图或凭证照片；</li><li class="dgp2">发送到91客服微信：yuanwei9008</li></ul></div></div></form></div>'),e.put("app/plans/plans.html",'<div ui-view=""><a ui-sref="plans.center">套餐中心</a> <a ui-sref="plans.list">套餐列表</a> <a ui-sref="plans.service">服务套餐</a></div>'),e.put("app/plans/plans.qrcode.html",'<div class="modal-header"><button class="close" ng-click="cancel()"><span>&times;</span></button><h4 class="modal-title">&nbsp;</h4></div><div class="modal-body"><div class="thumbnail plan-thumbnail"><p class="saoma">使用微信支付</p><span class="saomaspan">{{plan.price | currency}}</span> <img src="{{qrcode}}"><div class="caption text-center blue"><p class="bluep">请使用微信扫一扫</p><p class="bluep">扫描二维码完成支付</p></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="cancel()">关闭</button> <button type="button" class="btn btn-primary" ng-click="finishPay()">完成支付</button></div>'),e.put("app/poi/device.html",'<form name="deviceForm" ng-submit="setDevice()" novalidate><div class="modal-header"><button type="button" class="close" ng-click="$dismiss()">&times;</button><h4 class="modal-title">{{poi.base_info.business_name}}:配置设备</h4></div><div class="modal-body"><div class="form-group" ng-class="{ \'has-error\' : deviceForm[\'company\'].$invalid && submitted}"><ui-select name="company" ng-model="device.company" append-to-body="false" required><ui-select-match placeholder="选择设备厂家"><span ng-bind="$select.selected.name"></span></ui-select-match><ui-select-choices repeat="company in (appConfig.device.companies | filter: $select.search) track by $index" group-by="\'group\'"><span ng-bind="company.name"></span></ui-select-choices></ui-select></div><div class="form-group" ng-class="{ \'has-error\' : deviceForm[\'name\'].$invalid && submitted}"><input class="form-control" name="name" placeholder="{{deviceForm[\'name\'].$error.required && submitted?\'设备名称必须输入\':\'请输入设备名称\'}}" ng-model="device.name" required></div><div class="form-group" ng-class="{ \'has-error\' : deviceForm[\'code\'].$invalid && submitted}"><input class="form-control" name="code" placeholder="{{deviceForm[\'code\'].$error.required && submitted?\'设备代码必须输入\':\'请输入设备代码\'}}" ng-model="device.code" required></div></div><div class="modal-footer"><button class="btn btn-primary" type="submit" ng-bind="device.id?\'编辑\':\'添加\'"></button> <button class="btn btn-metis-5" type="button" ng-click="delDevice()" ng-if="device.id">删除</button></div></form>'),e.put("app/poi/poi.add.popover.html",'<div style="min-width:244px"><ol><li>登陆微信公众平台 <a href="https://mp.weixin.qq.com" target="_blank">https://mp.weixin.qq.com</a></li><li>左侧菜单<kbd>添加功能组件</kbd></li><li>选择<kbd>门店管理</kbd></li><li>点击左侧菜单新出现的<kbd>门店管理</kbd></li><li>点击右上角<kbd>新建门店</kbd></li><li>门店添加完成后返回这里，点击<kbd>刷新</kbd>，更新门店数据</li></ol></div>'),e.put("app/poi/poi.add_tags.popover.html",'<form name="tagForm" ng-submit="addTag()" style="min-width:244px"><div class="input-group"><input type="text" class="form-control" name="tag" placeholder="添加新的标签" ng-model="add_tags.tag"> <span class="input-group-btn"><button class="btn btn-default" type="submit">添加</button> <button class="btn btn-default" type="button" ng-click="add_tags.close = false;">取消</button></span></div></form>'),e.put("app/poi/poi.info.popover.html",'<form class="form-horizontal" style="min-width:244px"><div class="form-group"><label class="col-xs-4 control-label">名称</label><div class="col-xs-8"><p class="form-control-static" ng-bind="poi.base_info.business_name"></p></div></div><div class="form-group" ng-if="poi.base_info.branch_name"><label class="col-xs-4 control-label">分店名</label><div class="col-xs-8"><p class="form-control-static" ng-bind="poi.base_info.branch_name"></p></div></div><div class="form-group"><label class="col-xs-4 control-label">省市区</label><div class="col-xs-8"><p class="form-control-static"><span ng-bind="poi.base_info.province"></span> <span ng-bind="poi.base_info.city"></span> <span ng-bind="poi.base_info.district"></span></p></div></div><div class="form-group"><label class="col-xs-4 control-label">地址</label><div class="col-xs-8"><p class="form-control-static" ng-bind="poi.base_info.address"></p></div></div><div class="form-group" ng-if="poi.base_info.telephone"><label class="col-xs-4 control-label">电话</label><div class="col-xs-8"><p class="form-control-static" ng-bind="poi.base_info.telephone"></p></div></div><div class="form-group" ng-if="poi.base_info.categories"><label class="col-xs-4 control-label">类型</label><div class="col-xs-8"><p class="form-control-static" ng-bind="poi.base_info.categories"></p></div></div><div class="form-group" ng-if="poi.base_info.special"><label class="col-xs-4 control-label">服务</label><div class="col-xs-8"><p class="form-control-static" ng-bind="poi.base_info.special"></p></div></div><div class="form-group" ng-if="poi.base_info.introduction"><label class="col-xs-4 control-label">简介</label><div class="col-xs-8"><p class="form-control-static" ng-bind="poi.base_info.introduction"></p></div></div></form>'),e.put("app/poi/poi.manage.html",'<div ui-view=""><div class="manage-poi"><header><!--<h5><i class="fa fa-{{ico}}"></i> {{title}} <small>[{{pagi.totalItems}}]</small></h5>--><!--<h5>{{title}}</h5>--><div class="toolbar"><button type="button" class="btn btn-primary btn-rect btn-sm" uib-popover-template="\'app/poi/poi.add.popover.html\'" popover-placement="bottom-right" popover-trigger="outsideClick">新建门店</button> <button type="button" class="btn btn-default btn-sm" ng-click="flushPoiList()">刷新</button></div></header><div class="manage-main"><!--省市区--><div class="row"><div class="col-xs-1 addr"><ui-select ng-model="area.province"><ui-select-match placeholder="省"><span ng-bind="$select.selected.name"></span></ui-select-match><ui-select-choices repeat="province in (provinces | filter: $select.search) track by province.id"><span ng-bind="province.name"></span></ui-select-choices></ui-select></div><div class="col-xs-1 addr"><ui-select ng-model="area.city"><ui-select-match placeholder="市"><span ng-bind="$select.selected.name"></span></ui-select-match><ui-select-choices repeat="city in (cities | filter: $select.search) track by city.id"><span ng-bind="city.name"></span></ui-select-choices></ui-select></div><div class="col-xs-1 addr"><ui-select ng-model="area.district"><ui-select-match placeholder="区"><span ng-bind="$select.selected.name"></span></ui-select-match><ui-select-choices repeat="district in (area.city.district | filter: $select.search) track by district.id"><span ng-bind="district.name"></span></ui-select-choices></ui-select></div><!--搜索--><div class="col-xs-3 search"><div class="input-group"><input type="text" class="form-control" placeholder="请输入门店名称" ng-model="area.keyword"> <span class="input-group-btn"><button class="btn btn-default" type="button" ng-model="area.keyword"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button></span></div></div><div class="col-xs-4"></div><!--排序--><div class="col-xs-2 sort"><span class="s-left">排序：</span> <span class="s-right"><ui-select ng-model="sort.select" class="sort-container"><ui-select-match placeholder="销售额"><span ng-bind="$select.selected.name"></span></ui-select-match><ui-select-choices repeat="sort in (sort.list | filter: $select.search) track by $index"><span ng-bind="sort.name"></span></ui-select-choices></ui-select></span></div></div><table class="table table-bordered table-condensed table-hover table-striped table-manage"><thead><tr><th>门店信息</th><th>商品</th><th>订单</th><th>销售额</th><th>扫码员</th><!--<th>核销设备</th>--><th>操作</th></tr></thead><tbody><tr ng-repeat="poi in pois" style="background: #FFFFFF"><td class="word-break"><p><a href="#" ng-bind="poi.base_info.business_name+(poi.base_info.branch_name?\'(\'+poi.base_info.branch_name+\')\':\'\')" uib-popover-template="\'app/poi/poi.info.popover.html\'" popover-placement="right-top" popover-trigger="outsideClick"></a></p><p><span ng-bind="poi.base_info.province"></span> <span ng-bind="poi.base_info.city"></span> <span ng-bind="poi.base_info.district"></span> <span ng-bind="poi.base_info.address"></span></p><p ng-bind="poi.base_info.telephone"></p></td><td><a href="#" ng-bind="poi.num.commodity" style="color: #3796F9" ng-click="stockup(poi)"></a></td><td><a ui-sref="suborder.list({poi: poi.id})" ng-bind="poi.num.gift_suborder" style="color: #3796F9"></a></td><td ng-bind="poi.num.amount | currency"></td><td class="word-break"><ul class="list-unstyled"><li ng-repeat="scanner in poi.scanner"><a ui-sref="user.list({poi:poi.id})" ng-bind="scanner.user.name" ng-if="scanner.user.poi&&scanner.user.poi === poi.id"></a> <s ng-if="!scanner.user.poi||scanner.user.poi !== poi.id" ng-bind="scanner.user.name"></s> 核销{{scanner.gift_suborder}}单,{{scanner.amount | currency}}</li></ul></td><!--<td class="word-break">\n            <ul class="list-unstyled">\n              <li ng-repeat="device in poi.device"><a href="#" ng-bind="device.name" ng-click="addDevice()"></a>\n              核销{{device.num.partaker}}单,{{device.num.amount | currency}}</li>\n            </ul>\n          </td>--><td class="text-center"><p><button class="btn btn-metis-2 btn-rect btn-line btn-xs" ng-click="addScanner(poi)">添加扫码员</button></p><!--<p>\n              <button class="btn btn-primary btn-rect btn-line btn-xs" ng-click="addDevice()">添加核销设备</button>\n            </p>--><p><button class="btn btn-metis-5 btn-rect btn-line btn-xs" ng-click="delPoi()">删除</button></p></td></tr></tbody></table><nosy-pagi dropup="true" pagi="pagi"></nosy-pagi></div></div></div>'),
e.put("app/poi/poi.scanner.html",'<div class="modal-header"><button type="button" class="close" ng-click="$dismiss()"><span>&times;</span></button><h3 class="modal-title">微信扫一扫，添加扫码员</h3></div><div class="modal-body text-center"><img ng-if="qrcodeTicket" ng-src="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket={{qrcodeTicket}}" style="width:320px"></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="ok()">完成</button> <button class="btn btn-warning" type="button" ng-click="$dismiss()">关闭</button></div>'),e.put("app/poi/poi.stockup.modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="$dismiss()"><span>&times;</span></button><h3 class="modal-title">门店[{{poi.base_info.business_name+(poi.base_info.branch_name?\'(\'+poi.base_info.branch_name+\')\':\'\')}}]备货</h3></div><div class="modal-body"><table class="table table-striped"><tr><th>商品</th><th>待发货</th></tr><tr ng-repeat="comm in comms"><td>{{comm._id.info.name}}</td><td>{{comm.count}}</td></tr></table></div>'),e.put("app/poi/poi.tags.html",'<div class="col-xs-12 poi-title"><header><div><span class="pic col-xs-1"><img ng-src="{{appConfig.uriImg+\'/home/sjdicon/mdfzicon.png\'}}" alt=""></span><span class="col-xs-11 font"><p>门店分组</p><p>门店分组用以区别管理门店，商家发商品设置参与门店时除了选择全部门店，也可选择某个门店分组。商家通过：新建门店分组—筛选并勾选门店—添加到分组，创建一个新的门店分组。每次发商品即可直接选择门店分组作为参与门店。</p></span></div></header></div><div ng-include="\'app/poi/poi.tags.set.html\'"></div>'),e.put("app/poi/poi.tags.modal.html",'<div class="modal-body" ng-include="\'app/poi/poi.tags.set.html\'"></div><div class="modal-footer"><button class="btn btn-warning" type="button" ng-click="$dismiss()">关闭</button></div>'),e.put("app/poi/poi.tags.popover.html",'<label class="checkbox-inline" ng-repeat="tag in tags"><input type="checkbox" checklist-model="poi.tags" checklist-value="tag" checklist-comparator=".id" ng-change="poiSelTag(checked)"> {{tag.name}}</label><div class="text-right" style="border-top:1px solid #DCDDDD;padding-top:5px;margin-left: -11px;margin-right: -4px"><button class="btn btn-success btn-sm btn-sure" ng-click="poiAddTag()">确定</button></div>'),e.put("app/poi/poi.tags.set.html",'<div class="row"><div class="col-xs-8 poi-left"><div class="box"><div class="allStore"><span>{{pagi.tag.name?pagi.tag.name:\'全部门店\'}} ({{pagi.tag.name?pagi.tag.num:pagi.all}}家)</span></div><div class="body address-poi"><div class="row"><div class="col-xs-2 ssq"><ui-select ng-model="area.province"><ui-select-match placeholder="省"><span ng-bind="$select.selected.name"></span></ui-select-match><ui-select-choices repeat="province in (provinces | filter: $select.search) track by province.id"><span ng-bind="province.name"></span></ui-select-choices></ui-select></div><div class="col-xs-2 ssq"><ui-select ng-model="area.city"><ui-select-match placeholder="市"><span ng-bind="$select.selected.name"></span></ui-select-match><ui-select-choices repeat="city in (cities | filter: $select.search) track by city.id"><span ng-bind="city.name"></span></ui-select-choices></ui-select></div><div class="col-xs-2 ssq"><ui-select ng-model="area.district"><ui-select-match placeholder="区"><span ng-bind="$select.selected.name"></span></ui-select-match><ui-select-choices repeat="district in (area.city.district | filter: $select.search) track by district.id"><span ng-bind="district.name"></span></ui-select-choices></ui-select></div><div class="col-xs-4 search"><div class="input-group"><input type="text" class="form-control" placeholder="请输入门店名称" ng-model="area.keyword"> <span class="input-group-btn"><button class="btn btn-default" type="button" ng-model="area.keyword"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button></span></div></div></div></div><table class="table table-condensed table-hover table-striped table-poi"><tbody><tr class="thead"><td colspan="3"><label><input type="checkbox" ng-model="selpoi.selall" ng-true-value="true" ng-false-value="false" ng-click="selAll()">&nbsp;&nbsp;全选</label><button id="btn" class="btn btn-default btn-sm btn-mr" uib-popover-template="\'app/poi/pois.tags.popover.html\'" popover-placement="bottom" popover-trigger="outsideClick" popover-is-open="selpoi.tagspop" ng-disabled="selpoi.ids.length<1">添加到分组</button></td></tr><tr ng-repeat="poi in pois" ng-init="poi.close=false" ng-mouseenter="poi.close = true" ng-mouseleave="poi.close = false" class="poisList"><td style="width: 30px"><input type="checkbox" checklist-model="selpoi.ids" checklist-value="poi.id"></td><td><a href="" ng-bind="poi.base_info.business_name+(poi.base_info.branch_name?\'(\'+poi.base_info.branch_name+\')\':\'\')" uib-popover-template="\'app/poi/poi.info.popover.html\'" popover-placement="right-top" popover-trigger="outsideClick"></a><p class="text-muted"><span ng-repeat="tag in poi.tags track by $index">{{tag.name}} {{!$last&&tag.name?\'、 \':\'\'}}</span> <span ng-if="poi.tags.length<1">无标签</span> <i class="fa fa-caret-down" uib-popover-template="\'app/poi/poi.tags.popover.html\'" popover-append-to-body="true" popover-placement="bottom" popover-trigger="click" popover-is-open="poi.tagspop"></i></p></td></tr></tbody></table><div class="panel-footer"><nosy-pagi dropup="true" pagi="pagi"></nosy-pagi></div></div></div><div class="col-xs-4 poi-right"><div class="box"><header><h5>门店分组</h5><div class="toolbar"><button class="btn btn-default btn-sm" uib-popover-template="\'app/poi/poi.add_tags.popover.html\'" popover-placement="bottom-right" popover-trigger="outsideClick" popover-is-open="add_tags.close">新建分组</button></div></header><div class="list-group"><div class="list-group-item" ng-class="{\'active\':!pagi.tag.id}"><a href="#" ng-click="pagi.tag = {}">全部门店({{pagi.all}}家)</a></div><div class="list-group-item" ng-class="{\'active\':pagi.tag.id === tag.id}" ng-repeat="tag in tags" ng-mouseenter="tag.close = true" ng-mouseleave="tag.close = false" editable-text="tag.name" e-name="tag.name" e-form="tagForm" onaftersave="editTag()" e-required><a href="#" class="badge btn btn-metis-5 bt-xs btn-line" ng-show="tag.close" ng-click="delTag()">删除</a> <a href="#" class="badge btn btn-metis-6 bt-xs btn-line" ng-show="tag.close" ng-click="tagForm.$show()">编辑</a> <a href="" ng-click="pagi.tag = tag">{{tag.name}}({{tag.num}}家)</a></div></div></div></div></div>'),e.put("app/poi/pois.tags.popover.html",'<label class="checkbox-inline" ng-repeat="tag in tags"><input type="checkbox" checklist-model="selpoi.tags" checklist-value="tag" checklist-comparator=".id"> {{tag.name}}</label><div class="text-right" style="border-top:1px solid #DCDDDD;padding-top:5px;margin-left: -11px;margin-right: -4px"><button class="btn btn-success btn-sm btn-sure" ng-click="poisAddTag()">确定</button><!--<button class="btn btn-success btn-rect btn-sm btn-close"\n      ng-click="poisClose()">取消</button>--></div>'),e.put("app/suborder/suborder.list.html",'<div><form class="form-horizontal order-warp order-warp1" name="forms.suborderForm" ng-submit="searchByCondition()" novalidate><div class="row order-head"><div class="col-xs-5 order-time"><div class="start col-xs-5"><div class="form-group" ng-class="{ \'has-error\' : forms.suborderForm.starttime.$invalid && submitted}"><div class="input-group pull-left"><input type="text" class="form-control" name="starttime" uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model="status.startTime" is-open="status.startTimePopup.opened" close-text="Close" placeholder="起始时间" alt-input-formats="altInputFormats"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openStarttimePopup()"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 font-span"><span>至</span></div><div class="col-xs-5 end"><div class="form-group" ng-class="{ \'has-error\' : forms.suborderForm.endtime.$invalid && submitted}"><div class="input-group pull-left"><input type="text" class="form-control" name="endtime" uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model="status.endTime" is-open="status.endTimePopup.opened" close-text="Close" placeholder="结束时间" alt-input-formats="altInputFormats"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openEndtimePopup()"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 btn-col1"><button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div></div><div class="col-xs-3"><input type="number" class="form-control form-number" ng-model="status.serial" placeholder="输入订单号"> <button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div><!--<div class="col-xs-3">\n          <input type="text" class="form-control form-number" ng-model="status.order" placeholder="输入订单号">\n          <button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub">搜索</button>\n      \t</div>--><div class="col-xs-1 form-pagi"><nosy-pagi pagi="pagi"></nosy-pagi></div><div class="col-xs-3 print"><button type="button" class="btn btn-primary btn-outline btn-sm" ng-click="exportSuborders()">导出当前页订单</button></div></div><div class="row print"><div class="col-xs-12"><button type="button" class="btn btn-primary btn-outline btn-sm btn-card" ng-click="exportCards()">批量下载语音码</button></div></div></form><!--订单筛选--><div class="from-group online online1"><div class="col-xs-6 left"><div class="btn-group btn-danger btn-group-sm"><label class="btn btn-primary" ng-model="status.shipping" uib-btn-radio="\'all\'">全部子订单<span ng-if="status.shipping === \'all\'">({{pagi.totalItems}})</span></label><label class="btn btn-primary" ng-model="status.shipping" uib-btn-radio="\'toshipping\'">待发货<span ng-if="status.shipping === \'toshipping\'">({{pagi.totalItems}})</span></label><label class="btn btn-primary" ng-model="status.shipping" uib-btn-radio="\'shipping\'">已发货<span ng-if="status.shipping === \'shipping\'">({{pagi.totalItems}})</span></label></div></div><div class="col-xs-6 right"><nosy-pagi pagi="pagi"></nosy-pagi></div></div><table class="table suborder"><thead><tr><th>子订单单号 (序列号)</th><th>订单号</th><th>发货方式</th><th>收货人信息</th><th>商品</th><th>时间</th><th>发货管理</th><th>语音码</th></tr></thead><tbody><tr ng-repeat="suborder in suborders"><td>{{ suborder.id || suborder._id }}</td><td>{{ suborder.order.serial }}</td><td>{{ suborder.scene === \'poi\' ? \'门店自提\' : \'物流配送\' }}</td><td><span>{{ suborder.name || suborder.consignee }}</span><br><span>{{ suborder.telephone}}</span><br><span>{{ suborder.scene === \'poi\' ? suborder.poi.base_info.business_name : suborder.address }}</span><br></td><td>{{ suborder.order.gift.info.name }}</td><td><p>创建时间－{{ suborder.fillinDate | date: \'yyyy-MM-dd HH:mm:ss\' }}</p><p ng-if="suborder.status.shipping_date">发货时间－{{ suborder.status.shipping_date | date: \'yyyy-MM-dd HH:mm:ss\' }}</p><p ng-if="suborder.status.read_date">收货时间－{{ suborder.status.read_date | date: \'yyyy-MM-dd HH:mm:ss\' }}</p></td><td ng-if="!suborder.status.shipping"><input class="ship" type="button" ng-click="shippingModel(suborder)" value="发货"></td><td ng-if="suborder.status.shipping"><span class="ifship">已发货</span></td><td><input class="upload" type="button" ng-click="exportCard(suborder)" value="下载"></td></tr></tbody></table></div>'),e.put("app/user/operator.qrcode.html",'<h4>微信扫一扫，添加扫码员</h4><img src="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket={{qrcodeTicket}}" style="width:320px">'),e.put("app/user/user.html",'<div ui-view="">用户管理</div>'),e.put("app/user/user.list.html",'<div ui-view=""><div class="sweep-list"><header><!--<h5><i class="fa fa-{{ico}}"></i> {{title}} <small>[{{pagi.totalItems}}]</small></h5>--><div class="toolbar"><div class="btn-group"><label class="btn btn-sm btn-default" ng-model="pagi.category" uib-btn-radio="\'all\'">全部</label><label class="btn btn-sm btn-default" ng-model="pagi.category" uib-btn-radio="\'subscribe\'">已关注</label><label class="btn btn-sm btn-default" ng-model="pagi.category" uib-btn-radio="\'unsubscribe\'">未关注</label><label class="btn btn-sm btn-default" ng-model="pagi.category" uib-btn-radio="\'client\'">扫码员</label></div></div></header><div class="sw-body"><nosy-pagi pagi="pagi"></nosy-pagi><table class="table table-striped table-sweep"><thead><tr><th>用户头像</th><th>用户名</th><th>核销订单数</th><th>核销总金额</th><th>所属门店</th><!--<th>关联打印机</th>--><th>操作</th></tr></thead><tbody><tr ng-repeat="user in users"><td><img ng-src="{{user.info.headimgurl}}" class="img-responsive img-thumbnail" style="width:60px"></td><td>{{user.info.nickname}}</td><td><a ui-sref="order.list({wrkrId:user.id})">{{user.scan.num}}</a></td><td ng-bind="user.scan.amount | currency"></td><td ng-bind="user.poi.base_info.business_name"></td><!--<td ng-bind="user.printer?(\'[\'+user.printer.company.name+\']\'+user.printer.printname):\'\'"></td>--><td><form data-editable-form name="uiSelectForm"><!--<div editable-ui-select="user.printer"\n                data-e-form="uiSelectForm"\n                data-e-name="printer"\n                name="printer"\n                data-e-ng-model="user.printer"\n                data-e-on-select="selPrtr($item, $model)"\n                onaftersave="linkUserPrinter()"\n                data-e-style="min-width:300px;">\n                <editable-ui-select-match placeholder="请选择打印机">\n                    [{{$select.selected.company.name}}]{{$select.selected.printname}}\n                </editable-ui-select-match>\n                <editable-ui-select-choices repeat="printer in printers | filter: $select.search track by $index">\n                  [{{printer.company.name}}]{{printer.printname}}\n                </editable-ui-select-choices>\n              </div>--><div class="buttons"><button type="button" class="btn btn-default btn-sm" ng-click="setClient(true)" ng-if="!user.role.client&&!uiSelectForm.$visible">设为扫码员</button> <button type="button" class="btn btn-default btn-sm" ng-click="setClient(false)" ng-if="user.role.client&&!uiSelectForm.$visible">取消扫码员</button><!--<button\n                  type="button"\n                  class="btn btn-metis-6 btn-sm"\n                  ng-click="uiSelectForm.$show()"\n                  ng-if="user.role.client&&!user.printer&&!uiSelectForm.$visible">关联打印机\n                </button>\n                <button\n                  type="button"\n                  class="btn btn-default btn-sm"\n                  ng-click="unlinkPrinter()"\n                  ng-if="user.role.client&&user.printer&&!uiSelectForm.$visible">解绑打印机\n                </button>--> <span ng-show="uiSelectForm.$visible"><br><button type="submit" class="btn btn-primary" ng-disabled="uiSelectForm.$waiting">保存</button> <button type="button" class="btn btn-default" ng-disabled="uiSelectForm.$waiting" ng-click="uiSelectForm.$cancel()">取消</button></span></div></form></td></tr></tbody></table><nosy-pagi dropup="true" pagi="pagi"></nosy-pagi></div></div></div>'),e.put("app/wechat/autoreply.html",'<form name="replyForm" ng-submit="post()" class="form-horizontal" novalidate><div class="form-group" ng-class="{\'has-success\': replyForm[\'gift.detail\'].$valid && submitted,\n                                      \'has-error\' : replyForm[\'gift.detail\'].$invalid && submitted }"><textarea type="text" name="add_friend_autoreply_info.content" class="form-control" placeholder="输入关注自动回复内容" ng-model="reply.content.add_friend_autoreply_info.content" required msd-elastic></textarea><p ng-show="replyForm[\'add_friend_autoreply_info.content\'].$error.required && submitted" class="help-block">自动回复内容必须填写.</p></div><div class="form-group" style="background-color:transparent"><div class="col-xs-3"><button type="submit" class="btn btn-primary btn-block" style="margin-left:-15px">保存</button></div></div></form>'),e.put("app/wechat/default.html","微信相关设置"),e.put("app/wechat/menu.html",'<div class="panel panel-default"><div class="panel-body text-right"><button class="btn btn-danger btn-sm" ng-click="saveMenu()">保存</button> <button class="btn btn-danger btn-sm" ng-click="setMenu()">设置</button></div><div class="row"><div class="col-xs-7"><textarea class="form-control" ng-model="menu" msd-elastic></textarea></div><div class="col-xs-5"><div class="thumbnail"><img holder="holder.js/100px380?text=菜单预览&bg=F3F2F2&fg=ffffff" class="img-responsive center-block"><div class="text-center"><div class="btn-group btn-group-justified dropup"><div class="btn-group" ng-repeat="menu in menus.button"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><a href="{{menu.type}}:{{menu.key || menu.url}}">{{menu.name}}</a> <span class="caret" ng-if="menu.sub_button"></span></button><ul class="dropdown-menu" ng-if="menu.sub_button"><li ng-repeat="submenu in menu.sub_button"><a href="{{submenu.type}}:{{submenu.key || submenu.url}}">{{submenu.name}}</a></li></ul></div></div></div></div></div></div></div>'),e.put("app/wechat/pay.html",'<div class="row bam-config"><form class="form-horizontal con-form" name="form" ng-submit="post(form)" novalidate><div class="row con-head con-head1"><div class="col-xs-12"><span>下载配置文档，按照配置文档完成以下配置</span> <a href="http://91pt.oss-cn-beijing.aliyuncs.com/contract/91%E9%80%81%E7%A4%BC%E6%94%AF%E4%BB%98%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B%E5%89%AF%E6%9C%AC.pdf" target="_blank" class="btn xzwdbtn">下载配置文档 <i class="fa fa-long-arrow-down"></i></a></div></div><div class="row con-body con-body1"><div class="col-xs-6"><!--商户号--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pay.mch_id\'].$valid && submitted,\n                                            \'has-error\' : form[\'pay.mch_id\'].$invalid && submitted }"><div class="col-xs-2"><label for="pay.mch_id" class="control-label config-name">商户号</label></div><div class="col-xs-10"><input id="from-cntrol1" type="text" class="form-control form-config" ng-model="pay.mch_id" name="pay.mch_id" placeholder="请输入微信支付分配的商户号" required><p ng-show="form[\'pay.mch_id\'].$error.required && submitted" class="help-block">商户号必须填写.</p></div></div><!--API密钥--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pay.key\'].$valid && submitted,\n                                            \'has-error\' : form[\'pay.key\'].$invalid && submitted }"><div class="col-xs-2"><label for="pay.key" class="control-label config-name">API密钥</label></div><div class="col-xs-10"><input id="from-cntrol2" type="text" class="form-control form-config" name="pay.key" ng-model="pay.key" placeholder="请输入API签名密钥" required><p ng-show="form[\'pay.key\'].$error.required && submitted" class="help-block">API签名密钥必须填写.</p></div></div><!--API证书--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pfx\'].$valid && submitted,\n                                            \'has-error\' : form[\'pfx\'].$invalid && submitted }"><div class="col-xs-2"><label for="pfx" class="control-label config-name">API证书</label></div><div class="col-xs-10 uploadFlie"><input id="from-cntrol3" type="file" class="form-control" name="pfx" required><p ng-show="form[\'pfx\'].$error.required && submitted" class="help-block">API证书必须填写.</p></div></div><!--支付授权目录--><div class="row config-font"><div class="col-xs-2 fcol">支付授权目录</div><div class="col-xs-10">{{ wxUser.pubdom }}/wepay/</div></div><!--JS接口安全域名--><div class="row config-font"><div class="col-xs-2 fcol">JS接口安全域名</div><div class="col-xs-10">{{ wxUser.pubdom }}</div></div><!--企业域名--><div class="row config-font"><div class="col-xs-2 fcol">企业域名</div><div class="col-xs-10">{{ wxUser.pubdom }}</div></div><!--微信公号模板消息--><div class="row config-font"><div class="col-xs-2 fcol">微信公号模板消息</div><div class="col-xs-10">确认微信公众号模板消息行业为IT/科技 电子商务<br><small class="small">如果不是,请修改</small></div></div><!--编辑按钮--><div class="row btn-foot btn-foot1"><div class="col-xs-4"><button type="submit" class="btn btn-primary btn-block">完成</button></div></div></div><div class="col-xs-6"></div></div></form></div><!--\n<form class="form-horizontal form-pay" name="form" ng-submit="post(form)" novalidate>\r\n  <div class="row form-group" ng-class="{ \'has-success\': form[\'pay.mch_id\'].$valid && submitted,\r\n                                      \'has-error\' : form[\'pay.mch_id\'].$invalid && submitted }">\r\n    <div class="col-xs-1">\r\n    \t<label for="pay.mch_id" class="control-label control-label1">商户号</label>\r\n    </div>\r\n    <div class="col-xs-10">\r\n      <input type="text" class="form-control" \r\n      \tng-model="pay.mch_id" \r\n      \tname="pay.mch_id" \r\n      \tplaceholder="请输入微信支付分配的商户号" required>\r\n      <p ng-show="form[\'pay.mch_id\'].$error.required && submitted" class="help-block">\r\n      \t商户号必须填写.\r\n      </p>\r\n    </div>\r\n  <div class="row form-group" ng-class="{ \'has-success\': form[\'pay.key\'].$valid && submitted,\r\n                                      \'has-error\' : form[\'pay.key\'].$invalid && submitted }">\r\n    <div class="col-xs-1">\r\n    \t<label for="pay.key" class="control-label">API密钥</label>\r\n    </div>\r\n    <div class="col-xs-10">\r\n      <input type="text" \r\n      \tclass="form-control" \r\n      \tname="pay.key" \r\n      \tng-model="pay.key" \r\n      \tplaceholder="请输入API签名密钥" required>\r\n      <span class="help-block" ng-if="!submitted"><span class="text-danger">安全考虑，设置后将不再显示！</span></span>\r\n      <p ng-show="form[\'pay.key\'].$error.required && submitted" class="help-block">\r\n      \tAPI签名密钥必须填写.\r\n      </p>\r\n    </div>\r\n  </div>\r\n  <div class="row form-group">\r\n  \t<div class="col-xs-1">\r\n  \t\t<label for="pay.file" class="control-label">API证书</label>\r\n  \t</div>\r\n  \t<div class="col-xs-10">\r\n        <input type="file" class="form-control" name="pfx"/>\r\n      <file-field class="btn btn-primary" ng-model="uploadFile">上传API证书</file-field>\r\n\t\t\t<span class="help-block"><span class="text-danger">下载包里的.p12文件</span></span>\r\n  \t</div>\r\n  </div>\n--><!--<div class="row wxuser">\r\n  \t<div class="row wx-head"><h5>详细微信支付设置请参考:</h5></div>\r\n  \t\r\n  \t<div class="row commonpt">\r\n  \t\t<div class="col-xs-2">微信支付 | 商户平台：</div>\r\n  \t\t<div class="col-xs-10"><a href="http://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=3_1" target="_blank">设置支付账户</a></div>\r\n  \t</div>\r\n  \t<div class="row common">\r\n  \t\t<div class="col-xs-2">公 众 号：</div>\r\n  \t\t<div class="col-xs-10">\r\n  \t\t\t<div class="col-xs-12"><a href="http://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_3" target="_blank">支付开发步骤</a></div>\r\n  \t\t\t<div class="col-xs-12">支付授权目录：{{wxUser.appid}}.{{clientUri}}/wepay/</div>\r\n  \t\t</div>\r\n  \t</div>\r\n  \t<div class="row common">\r\n  \t\t<div class="col-xs-2">公 共 号：</div>\r\n  \t\t<div class="col-xs-10">\r\n  \t\t\t<div class="col-xs-12"><a href="http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html#.E6.AD.A5.E9.AA.A4.E4.B8.80.EF.BC.9A.E7.BB.91.E5.AE.9A.E5.9F.9F.E5.90.8D" target="_blank">设置JS接口安全域名</a></div>\r\n  \t\t\t\t<div class="col-xs-12">域名： {{wxUser.appid}}.{{clientUri}}</div>\r\n  \t\t</div>\r\n  \t</div>\r\n  \t<div class="row common">\r\n  \t\t<div class="col-xs-2">公 共 号：</div>\r\n  \t\t<div class="col-xs-10">\r\n  \t\t\t<div class="col-xs-12"><a href="http://jingyan.baidu.com/article/20095761b8a15dcb0721b4dd.html" target="_blank">设置业务域名</a></div>\r\n  \t\t\t\t<div class="col-xs-12">域名：{{wxUser.appid}}.{{clientUri}}</div>\r\n  \t\t</div>\r\n  \t</div>\r\n</div> \t-->'),e.put("app/wechat/wechat.html",'<div ui-view="">微信管理</div>'),e.put("app/worker/worker.form.html",'<form class="form-horizontal" name="workerForm" ng-submit="post()" novalidate autocomplete="off"><div class="box"><header><div class="icons"><i class="fa fa-{{ico}}"></i></div><h5>{{title}}</h5><div class="toolbar"><button type="submit" class="btn btn-info btn-sm btn-rect"><i class="fa fa-check"></i> {{worker.id?\'更 新\':\'添 加\'}}</button> <a ui-sref="worker.list" class="btn btn-default btn-sm btn-rect"><i class="fa fa-reply"></i> 取 消</a></div></header><div class="body"><div class="form-group" ng-class="{ \'has-error\' : workerForm[\'telephone\'].$invalid && submitted}"><label for="telephone" class="col-sm-2 hidden-xs control-label">手机号</label><div class="col-sm-10"><input type="phone" name="telephone" class="form-control" placeholder="请输入手机号" autocomplete="off" ng-model="worker.info.telephone" ng-disabled="getedCpc||worker.id" phone required mongoose-error><p ng-show="workerForm.telephone.$error.phone && submitted" class="help-block">手机号不符合规则.</p><p ng-show="workerForm.telephone.$error.required && submitted" class="help-block">请填写手机号.</p><p ng-show="workerForm[\'telephone\'].$error.mongoose" class="help-block">{{ errors[\'type\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-error\' : workerForm[\'captcha\'].$invalid && submitted}" ng-if="!worker.id"><label for="captcha" class="col-sm-2 hidden-xs control-label">验证码</label><div class="col-sm-10"><div class="input-group"><input type="number" name="captcha" class="form-control" placeholder="请输入手机短信发来的验证码" ng-model="worker.info.captcha" ng-minlength="6" ng-maxlength="6" required mongoose-error> <span class="input-group-btn"><button class="btn btn-default" type="button" ng-click="getVerificationCode(workerForm)" ng-disabled="Countdown" ng-bind="getCpcTxt"></button></span></div><p ng-show="workerForm.captcha.$error.required && submitted" class="help-block">验证码是6位数字.</p><p ng-show="workerForm[\'captcha\'].$error.mongoose" class="help-block">{{ errors[\'type\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-error\' : workerForm[\'name\'].$invalid && submitted}"><label for="name" class="col-sm-2 hidden-xs control-label">名字</label><div class="col-sm-10"><input type="text" name="name" class="form-control" placeholder="请输入名字" ng-model="worker.info.name" required mongoose-error><p ng-show="workerForm[\'name\'].$error.required && submitted" class="help-block">名字必须填写.</p><p class="help-block" ng-show="workerForm[\'name\'].$error.mongoose">{{ errors[\'title\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-error\' : workerForm[\'password\'].$invalid && submitted}"><label for="password" class="col-sm-2 hidden-xs control-label">密码</label><div class="col-sm-10"><input type="text" name="password" class="form-control" placeholder="请输入密码" autocomplete="false" ng-model="worker.info.password" ng-required="!worker.id" mongoose-error><p ng-show="workerForm[\'password\'].$error.required && submitted" class="help-block">密码必须填写.</p><p class="help-block" ng-show="workerForm[\'password\'].$error.mongoose">{{ errors[\'worker\'] }}</p></div></div></div></div></form>'),e.put("app/worker/worker.html",'<div ui-view=""><ul><li>管理团队<ul><li><a ui-sref="worker.list">成员列表</a></li><li><a ui-sref="worker.add">添加成员</a></li></ul></li><ul></ul></ul></div>'),e.put("app/worker/worker.list.html",'<div class="worker"><div class="input-group"><span class="input-group-addon">员工登录地址:</span> <input type="text" class="form-control" ng-value="getTextToCopy()" readonly="true"> <span class="input-group-btn"><a href="" class="btn btn-default" clip-copy="getTextToCopy()" clip-click="doSomething()" ng-bind="copyText"></a></span></div><div class="worker-body"><header><div class="title fl"><span class="fa fa-{{ico}}"></span> <span>{{title}}<small>[{{pagi.totalItems}}]</small></span></div><div class="toolbar fr"><a ui-sref="worker.add" class="btn btn-primary btn-sm btn-rect"><i class="fa fa-user-plus"></i></a><div class="btn-group"><label class="btn btn-success btn-sm" ng-model="pagi.lock" uib-btn-radio="\'\'">全部</label><label class="btn btn-success btn-sm" ng-model="pagi.lock" uib-btn-radio="true">锁定</label><label class="btn btn-success btn-sm" ng-model="pagi.lock" uib-btn-radio="false">开放</label></div></div></header><table class="table table-striped table-worker"><thead><tr><th>姓名</th><th>电话</th><th>登录次数</th><th>时间</th><th>登录地点</th><th>操作</th></tr></thead><tbody><tr ng-repeat="worker in workers"><td>{{worker.info.name}}</td><td>{{worker.info.telephone}}</td><td>{{worker.num.login}}</td><td>创建:{{worker.time.created | amDateFormat:\'YYYY.MM.DD HH:mm:ss\'}}<br>登录:{{worker.time.login | amDateFormat:\'YYYY.MM.DD HH:mm:ss\'}}<br>锁定:{{worker.time.lock | amDateFormat:\'YYYY.MM.DD HH:mm:ss\'}}<br>解锁:{{worker.time.open | amDateFormat:\'YYYY.MM.DD HH:mm:ss\'}}<br></td><td>{{worker.info.ip}}</td><td><a ui-sref="worker.edit({id:worker.id})" class="btn btn-warning btn-sm btn-rect">编辑</a> <button class="btn btn-sm btn-rect" ng-click="lock()" ng-bind="worker.status.lock?\'解锁\':\'锁定\'" ng-class="{\r\n                \'btn-metis-1\':!worker.status.lock,\r\n                \'btn-metis-5\':worker.status.lock}"></button></td></tr></tbody></table><uib-pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination></div></div>'),e.put("components/modal/modal.html",'<div class="modal-header"><button ng-if="modal.dismissable" type="button" ng-click="$dismiss()" class="close">&times;</button><h4 ng-if="modal.title" ng-bind="modal.title" class="modal-title"></h4></div><div class="modal-body"><p ng-if="modal.text" ng-bind="modal.text"></p><div ng-if="modal.html" ng-bind-html="modal.html"></div></div><div class="modal-footer"><button ng-repeat="button in modal.buttons" ng-class="button.classes" ng-click="button.click($event)" ng-bind="button.text" class="btn"></button></div>'),e.put("components/navbar/menu.html",'<li ng-repeat="menu in menus" ui-sref-active="active" ng-class="{\'nav-divider\':menu.divider, \'nav-header head-li\':menu.header }"><span ng-if="menu.header"><span class="menu-icon menu-icon-gray"><img src="https://img.91pintuan.com/songli/server/menu-icon-new/menu-{{menu.icon}}.png" alt=""> </span><span class="menu-icon menu-icon-green"><img class="redImg" src="https://img.91pintuan.com/songli/server/menu-icon-new/menu-{{menu.iconSelected}}.png" alt=""> </span><span>{{menu.title}}</span> </span><a ui-sref="{{menu.link}}" ui-sref-opts="{{menu.opts}}" ng-if="menu.link&&menu.menu"><!--左侧图标--> <span class="menu-icon menu-icon-gray" ng-if="menu.icon"><img src="https://img.91pintuan.com/songli/server/menu-icon-new/menu-{{menu.icon}}.png" alt=""> </span><span class="menu-icon menu-icon-green" ng-if="menu.icon"><img class="redImg" src="https://img.91pintuan.com/songli/server/menu-icon-new/menu-{{menu.iconSelected}}.png" alt=""> </span><span class="link-title" ng-class="{\'mLeft\': !menu.icon}">{{menu.title}} </span><span class="fa arrow" ng-show="menu.submenus"></span> </a><a ng-if="!menu.link && menu.menu"><span class="link-title">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{menu.title}}</span> <span class="fa arrow" ng-show="menu.submenus"></span></a><ul ng-if="menu.submenus&&menu.menu"><li class="" ng-repeat="submenu in menu.submenus"><a ui-sref="{{submenu.link || \'javascript:;\'}}" ui-sref-opts="{{submenu.opts}}"><i class="fa fa-angle-right"></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{submenu.title}}</a></li></ul></li>'),e.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller="NavbarCtrl"><div class="container"><div class="navbar-header"><button class="navbar-toggle" type="button" ng-click="isCollapsed = !isCollapsed"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a href="/" class="navbar-brand">serve</a></div><div collapse="isCollapsed" class="navbar-collapse collapse" id="navbar-main"><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href="{{item.link}}">{{item.title}}</a></li></ul></div></div></div>')}]);