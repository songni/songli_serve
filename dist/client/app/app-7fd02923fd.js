"use strict";angular.module("serveApp",["serveApp.constants","ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","restangular","ncy-angular-breadcrumb","angularMoment","ui.tinymce","angularFileUpload","monospaced.qrcode","ngClipboard","ngCsv","bootstrap.fileField","ngHolder","monospaced.elastic"]).config(["appConfig","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$logProvider","RestangularProvider","$breadcrumbProvider",function(e,t,s,a,n,o,i,r){s.otherwise("/"),a.html5Mode(!0),n.defaults.useXDomain=!0,delete n.defaults.headers.common["X-Requested-With"],o.debugEnabled("enable"),tinyMCE.baseURL="/bower_components/tinymce-dist"}]).run(["appConfig","$rootScope","$location","$cookieStore","$log","$state","$window","Restangular","RestWecom","Alert","$uibModal",function(e,t,s,a,n,o,i,r,l,c,d){t.appConfig=window.config=e;var p=e.apiUri[s.host()];!p&&(p=e.uri),r.setBaseUrl(p),t.phtUri="https://photo.91pintuan.com",t.phtStl320160="@1e_1c_0o_0l_399sh_160h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=8&t=63&s=58&color=I2U2ZGVkZQ&p=9&y=5&x=5",t.phtStl320="@1e_1c_0o_0l_399sh_320h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=12&t=52&s=57&color=I2ZmZmZmZg&p=9&y=5&x=5",t.phtStl120="@1e_1c_0o_0l_100sh_120h_120w_90q.src",t.$on("$stateChangeError",console.log.bind(console)),r.setErrorInterceptor(function(t,s,n){if(401===t.status&&(a.remove("token"),r.setDefaultHeaders({"X-API-From":e.from}),r.setDefaultHeaders({"X-Component":e.component})),t.data instanceof ArrayBuffer){var o=new TextDecoder("utf-8").decode(new Uint8Array(t.data)),i=JSON.parse(o);return void c.add("danger",i.errmsg)}t.data&&t.data.errmsg?c.add("danger",t.data.errmsg):c.add("danger","系统错误")}),r.addResponseInterceptor(function(e,t,s,n,o,i){return 205===o.status&&(a.remove("token"),c.add("warning","刷新重新加载本地内容！"),location.reload()),e});var u={"X-API-From":e.from,"X-Component":e.component};r.setDefaultHeaders(u),a.get("token")&&(u.Authorization=a.get("token"),r.setDefaultHeaders(u),l.one("auth").one("info").get().then(function(e){return t.wxUser=e,e.pay_config?void(t.isVerify=e.verify):o.go("bambu.contact")})),t.$on("$stateChangeStart",function(e,t){t.authenticate&&!a.get("token")&&s.path("/login")}),t.$on("$stateChangeSuccess",function(e,s){document.body.scrollTop=document.documentElement.scrollTop=0,t.innerHeight=1300;var a=t.wxUser?t.wxUser.astrict:"ok";t.wxUser?t.wxUser.num:{};_.includes(s.name,"plans")||_.includes(s.name,"bambu")||"ok"===a||d.open({templateUrl:"app/main/null.html",controller:"NullModalCtrl"})})}]),angular.module("serveApp").controller("AlbumCtrl",["$scope",function(e){e.message="Hello"}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("album",{url:"/album",templateUrl:"app/album/album.html",controller:"AlbumCtrl"})}]),angular.module("serveApp").service("RestAlbum",["Restangular",function(e){return e.service("album")}]),function(e,t){e.module("serveApp.constants",[]).constant("appConfig",{uri:"https://api.91pintuan.com",uriImg:"https://img.91pintuan.com",uriPht:"https://photo.91pintuan.com",style:{phtStl320160:"@1e_1c_0o_0l_399sh_160h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=8&t=63&s=58&color=I2U2ZGVkZQ&p=9&y=5&x=5",phtStl320:"@1e_1c_0o_0l_399sh_320h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=12&t=52&s=57&color=I2ZmZmZmZg&p=9&y=5&x=5",phtStl120:"@1e_1c_0o_0l_100sh_120h_120w_90q.src"},component:"5581117b5f225e4c401c9259",debug:!1,from:"merchant",commodity:{status:{paytype:"fullpay",collection:0,qrcode:!1,address:!1,shelf:!0,type:1,virtual:1},time:{start:"2016-09-20 18:47",end:"2016-11-20 18:37"},money:{price:0,discount:0,days:1,hours:0,minutes:0,partakers:2,commission:0,prepayment:100,piece:0,stock:0},pois:[],sku:[],stocks:[],logistic:{headReceive:"0",type:"0",uniformFreight:0},consumeType:"0",poitag:{id:"574e8ee63027e17c4b56c0bc",name:"全部门店",num:0},virtualComm:{consumeCredentialType:0}},allPoiObj:{id:"574e8ee63027e17c4b56c0bc",name:"全部门店",num:0},tinymceOptions:{language:"zh_CN",baseURL:"https://img.91pintuan.com/bower_components/tinymce",language_url:"https://img.91pintuan.com/serve/tinymce.zh_CN.js",convert_urls:!1,menubar:!1,content_css:"https://img.91pintuan.com/serve/tinymce.css",plugins:["textcolor link image insertdatetime paste code emoticons preview autoresize"],toolbar_items_size:"small",toolbar:" bold italic underline | bullist numlist | forecolor backcolor | image emoticons insertdatetime | removeformat undo redo | code preview",statusbar:!1,resize:!0,width:541,autoresize_min_height:394,autoresize_max_height:1e3,insertdatetime_formats:["%Y年%m月%d号","%H点%M分"],object_resizing:!1,image_description:!1,image_dimensions:!1,image_class_list:[{title:"默认",value:"img-responsive"},{title:"圆角",value:"img-rounded"},{title:"圆形",value:"img-circle"},{title:"边框",value:"img-thumbnail"}],file_picker_types:"image"},apiUri:{"www.songni.cc":"https://api.91pintuan.com"}})}(angular),angular.module("serveApp").controller("BambuCtrl",["$scope","$rootScope","Merchant",function(e,t,s){t.title="自助服务",s.get().then(function(t){e.merchant=t})}]).controller("BambuContactCtrl",["$scope","$rootScope","$state","$uibModal","Merchant",function(e,t,s,a,n){t.title="完善商家信息",e.aggrement="YES",e.submitted=!1,e.agmMdl=function(){a.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"agreement"}}})},e.master={},e.isUnchanged=function(t){return angular.equals(t,e.master)},e.post=function(t){return e.submitted=!0,e.master=angular.copy(e.merchant),"NO"!==e.aggrement&&(!t.$invalid&&void(e.merchant.id?e.merchant.put().then(function(){s.go("bambu.config.pay")}):n.post("",e.merchant).then(function(){s.go("bambu.config.pay")})))}}]).controller("BambuServiceCtrl",["$scope","$rootScope","$uibModal","$state","Merchant",function(e,t,s,a,n){n.get().then(function(e){e&&e.id||a.go("bambu.contact")}),t.title="选择服务方式",e.bambu={service:"self"},e.svcArr={deploy:"客服配置服务",counselor:"客服顾问服务"},e.dltSltSvc=function(){e.bambu.service=""},e.start=function(){var t=e.bambu.service;"self"===t&&a.go("bambu.config.pay"),"deploy"===t&&a.go("plans.service",{type:t,from:"bambu"}),"counselor"===t&&a.go("plans.counselor")},e.howtoMdl=function(){s.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"merchantHelp"}}})}}]).controller("BambuConfigCtrl",["$scope","$rootScope","$state","$uibModal","Restangular",function(e,t,s,a,n){t.title="公众号配置",n.service("wechat/pay").one().get().then(function(t){e.pay=t}),e.submitted=!1,e.post=function(t){if(e.submitted=!0,t.$invalid)return!1;if(!$("input[type=file]")[0].files[0])return void alert("请上传资质证书！");var s=new FormData;s.append("mch_id",e.pay.mch_id),s.append("key",e.pay.key),s.append("pfx",$("input[type=file]")[0].files[0]),e.pay.withHttpConfig({transformRequest:angular.identity}).customPOST(s,void 0,void 0,{"Content-Type":void 0}).then(function(){e.popup(function(){location.href="/"})})},e.popup=function(e){var t=a.open({templateUrl:"app/main/main.popup.html",controller:"MainCtrl",resolve:{type:function(){return"agreement"}}});t.result.then(e,e)},e.howtoMdl=function(){a.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"agreement"}}})}}]).controller("BambuCounselorCtrl",function(){}),angular.module("serveApp").config(["$stateProvider",function(e){e.state("bambu",{url:"/bambu",templateUrl:"app/bambu/bambu.html",controller:"BambuCtrl",authenticate:!0,ncyBreadcrumb:{label:"自助服务",ico:"stethoscope"}}).state("bambu.contact",{url:"/contact",templateUrl:"app/bambu/bambu.contact.html",controller:"BambuContactCtrl",authenticate:!0,ncyBreadcrumb:{label:"填写商家信息"}}).state("bambu.config",{url:"/config",template:"<ui-view/>",controller:"BambuServiceCtrl",authenticate:!0,ncyBreadcrumb:{label:"选择服务方式"}}).state("bambu.config.pay",{url:"/pay",templateUrl:"app/bambu/bambu.config.pay.html",controller:"BambuConfigCtrl",authenticate:!0,ncyBreadcrumb:{label:"公众号配置"}}).state("bambu.counselor",{url:"/counselor",templateUrl:"app/bambu/bambu.counselor.html",controller:"BambuCounselorCtrl",authenticate:!0,ncyBreadcrumb:{label:"客服顾问服务"}})}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("breadcrumb",{url:"/breadcrumb",templateUrl:"app/breadcrumb/breadcrumb.html",controller:"BreadcrumbCtrl"})}]),angular.module("serveApp").controller("DocumentCtrl",["$scope",function(e){e.title="文档管理"}]).controller("DocumentModalCtrl",["$scope","$uibModalInstance","$sce","RestDoc","type",function(e,t,s,a,n){n=n||"doc",a.one(n).get().then(function(t){t.document=s.trustAsHtml(t.document),e.document=t}),e.cancel=function(){t.dismiss("cancel")}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("document",{url:"/document",templateUrl:"app/document/document.html",controller:"DocumentCtrl"})}]),angular.module("serveApp").service("RestDoc",["Restangular",function(e){return e.service("document")}]),angular.module("serveApp").controller("GiftCtrl",["$scope","$rootScope",function(e,t){t.title="礼物管理"}]).controller("GiftPostCtrl",["$scope","$rootScope","$state","$stateParams","RestGift","RestAlbum","Alert","gift",function(e,t,s,a,n,o,i,r){t.title="发布礼物",a.id&&(e.gift=r),e.submitted=!1,e.config=config,e.tinymceOptions={language:"zh_CN",language_url:"/assets/i18n/tinymce.zh_CN.js",skin_url:"/bower_components/tinymce-dist/skins/lightgray",convert_urls:!1,menubar:!1,content_css:"/assets/css/tinymce.css",plugins:["textcolor link image insertdatetime paste code emoticons preview autoresize"],toolbar_items_size:"small",toolbar:" bold italic underline | bullist numlist | forecolor backcolor | image emoticons insertdatetime | removeformat undo redo | code preview",statusbar:!1,resize:!0,autoresize_min_height:250,autoresize_max_height:1e3,insertdatetime_formats:["%Y年%m月%d号","%H点%M分"],object_resizing:!1,image_description:!1,image_dimensions:!1,image_class_list:[{title:"默认",value:"img-responsive"},{title:"圆角",value:"img-rounded"},{title:"圆形",value:"img-circle"},{title:"边框",value:"img-thumbnail"}],file_picker_types:"image",file_picker_callback:function(e,t,s){"image"===s.filetype&&$("<input />").attr({type:"file",name:"file"}).trigger("click").change(function(){var t=new FormData,s=$(this)[0].files[0];t.append("file",s),e("上传中，请稍后...",{alt:"上传中"}),o.one("up").withHttpConfig({transformRequest:angular.identity}).customPOST(t,void 0,void 0,{"Content-Type":void 0}).then(function(t){t.link&&e(t.link,{alt:t.name})})})}},e.post=function(){if(e.submitted=!0,'<p><br data-mce-bogus="1"></p>'===e.gift.info.detail&&(e.gift.info.detail=""),e.giftForm.$invalid)return!1;var t=new FormData;t.append("name",e.gift.info.name),t.append("price",e.gift.info.price),t.append("stock",e.gift.num&&e.gift.num.stock?e.gift.num.stock:0),t.append("poetry",e.gift.info.poetry?e.gift.info.poetry:""),t.append("detail",e.gift.info.detail?e.gift.info.detail:""),t.append("lead",e.gift.info.lead?e.gift.info.lead:""),t.append("cover",e.uploadFile),a.id?e.gift.withHttpConfig({transformRequest:angular.identity}).customPUT(t,void 0,void 0,{"Content-Type":void 0}).then(function(t){i.add("success",t.message),e.submitted=!1,s.go("gift.detail.qrcode",{id:a.id})}):n.one().withHttpConfig({transformRequest:angular.identity}).customPOST(t,void 0,void 0,{"Content-Type":void 0}).then(function(t){console.log(t),i.add("success",t.message),e.submitted=!1,s.go("gift.detail.qrcode",{id:t.id})})}}]).controller("GiftListCtrl",["$scope","$rootScope","RestGift","Alert",function(e,t,s,a){t.title="礼物列表",t.ico="list-alt",e.giftorders=[],e.chgPerPage=function(){e.pagi.itemsPerPage=this.page},e.status={online:"",name:null},e.findByName=function(){e.pagi.name=e.status.name},e.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10,name:null},e.$watchCollection("[status.online,pagi.currentPage,pagi.itemsPerPage,pagi.name]",function(t){s.one("count").get({online:t[0],name:t[3]}).then(function(t){e.pagi.totalItems=t}),s.getList({online:t[0],page:t[1],limit:t[2],name:t[3]}).then(function(t){e.gifts=t})}),e.offShelf=function(){var e=confirm("确认下架吗？"),t=this.gift;return e!==!1&&(t.status.online=!1,void t.one("offshelf").put().then(function(e){a.add("success",e.message)}))}}]).controller("GiftQrcodeCtrl",["$scope","$rootScope","$sce","gift","RestWechat",function(e,t,s,a,n){t.title="礼物链接二维码";var o="http://"+e.wxUser.appid+"."+config.clientUri+"/gift/"+a.id;"dev"===env&&(o="http://"+e.wxUser.appid+"."+env+"."+config.clientUri+"/gift/"+a.id),e.text=o,e.url=s.trustAsResourceUrl(o),e.getTextToCopy=function(){return e.text},e.doSomething=function(){alert("复制成功！")}}]).controller("GiftOrderCtrl",["$state","$scope","$rootScope","$log","$uibModal","RestOrderGift","RestExp","Alert",function(e,t,s,a,n,o,i,r){s.title="订单管理",s.ico="list-alt",t.giftorders=[],t.forms={},t.itemsPerPageArr=[10,20,50,100,200],t.chgPerPage=function(e){t.pagi.itemsPerPage=e},t.clientUri=config.clientUri,t.status={shipping:"",pay:!0,checked:!1,startTime:null,endTime:null,startTimePopup:{opened:!1},endTimePopup:{opened:!1},order:"",serial:""},t.altInputFormats=["M!/d!/yyyy"],t.openStarttimePopup=function(){t.status.startTimePopup.opened=!0},t.openEndtimePopup=function(){t.status.endTimePopup.opened=!0},t.searchByCondition=function(){return t.forms.orderForm.$invalid?(t.submitted=!0,!1):t.status.startTime&&!t.status.endTime?void r.add("danger","请填写结束时间"):t.status.endTime&&!t.status.startTime?void r.add("danger","请填写起始时间"):t.status.endTime&&t.status.startTime&&!moment(t.status.startTime).isBefore(t.status.endTime)?void r.add("danger","起始时间必须小于结束时间"):(t.pagi.startTime=t.status.startTime,t.pagi.endTime=t.status.endTime,t.pagi.order=t.status.order,void(t.pagi.serial=t.status.serial))},t.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10},t.countShipping=function(e){var t=0;return e.receivers.forEach(function(e){e.status.shipping&&t++}),t},t.$watchCollection("[status.shipping,status.pay,pagi.currentPage,pagi.itemsPerPage,pagi.startTime,pagi.endTime,pagi.order,status.finish, pagi.serial]",function(e){t.giftorders=[],o.one("count").get({shipping:e[0],pay:e[1],startTime:e[4],endTime:e[5],order:e[6],finish:e[7],serial:e[8]}).then(function(e){t.pagi.totalItems=e}),o.getList({shipping:e[0],pay:e[1],page:e[2],limit:e[3],startTime:e[4],endTime:e[5],order:e[6],finish:e[7],serial:e[8]}).then(function(e){t.orders=e})}),t.qrcodeModel=function(){var e=this.order.id,t=this.order.sender.info.nickname,s=this.order.receiver.name;return n.open({templateUrl:"app/gift/gift.order.qrcode.html",controller:"GiftOrderQrcodeCtrl",size:"sm",resolve:{orderId:function(){return e},saveas:function(){return t+"送给"+s+"的声音二维码.png"}}}),!1},t.wxQrcodeModel=function(){var e=this.order.id;this.order.sender.info.nickname,this.order.receiver.name;return n.open({templateUrl:"app/gift/gift.order.wx.qrcode.html",controller:"GiftWxOrderQrcodeCtrl",size:"sm",resolve:{orderId:function(){return e}}}),!1},t.detailModel=function(){var e=this.order;return n.open({animation:!0,templateUrl:"app/gift/gift.order.detail.html",controller:"GiftOrderDetailCtrl",resolve:{order:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return e})}}),!1},t.shipping=function(){var e=confirm("确认发货吗？");return e!==!1&&(this.order.status.shipping=!0,void o.one(this.order.id).one("shipping").put().then(function(e){r.add("success",e.message)}))},i.one("company").get().then(function(e){t.companies=e}),t.exportCard=function(){o.one("export").one("card").one(order.id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(e){var t=new Blob([e],{type:"image/png"});saveAs(t,order.serial+".png")})},t.exportOrders=function(){o.one("export").one("orders").withHttpConfig({responseType:"arraybuffer"}).get({shipping:t.status.shipping,pay:t.status.pay,page:t.pagi.currentPage,limit:t.pagi.itemsPerPage}).then(function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats"});saveAs(t,"Orders.xlsx")})},t.exportCards=function(){o.one("export").one("cards").withHttpConfig({responseType:"arraybuffer"}).get({shipping:t.status.shipping,pay:t.status.pay,page:t.pagi.currentPage,limit:t.pagi.itemsPerPage,ext:"wx"}).then(function(e){if(!e.byteLength)return void r.add("danger","无可用语音码");var t=new Blob([e],{type:"application/octet-stream;charset=utf-8"});saveAs(t,"语音卡.zip")})}}]).controller("GiftOrderDetailCtrl",["$scope","$rootScope","$stateParams","$uibModal","order","RestOrderGift","RestSuborder","Alert","$log",function(e,t,s,a,n,o,i,r,l){t.title="订单详情",e.order=n,e.order.shipping=0,n.receivers.forEach(function(t){t.status.shipping&&e.order.shipping++}),e.config=config,e.order.url="http://"+t.wxUser.appid+"."+config.clientUri+"/gift/listen/"+n.id,e.shippingAll=function(){var e=this.order;o.one(e.id).put().then(function(e){r.add("success",e.message)},function(e){r.add("error","设置失败！"),l.error("RestOrderGift",e)})},e.shippingModel=function(t){var s=a.open({animation:!0,templateUrl:"app/gift/gift.order.shipping.html",controller:"GiftOrderShippingCtrl",resolve:{order:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return n}),companies:function(){return e.companies},receiver:function(){return t}}});return s.result.then(function(e){t.status.shipping=e},function(){l.info("在: "+new Date+"解散模")}),!1},e.exportCards=function(){var e=this.order;!e.receivers||!e.receivers.length||e.receivers.filter(function(e){return e.telephone}).length<=0||o.one("export").one("cards").one(e.id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(t){var s=new Blob([t],{type:"application/octet-stream;charset=utf-8"});saveAs(s,e.serial+".zip")})},e.exportCard=function(t){t.card?i.one(t.id||t._id).one("export").one("card").withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(e){var s=new Blob([e],{type:"image/png"});saveAs(s,t._id||t.id+".png")}):o.one("export").one("card").one(t.order.id||t.order._id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(t){var s=new Blob([t],{type:"image/png"});saveAs(s,e.order.serial+".png")})}}]).controller("GiftOrderQrcodeCtrl",["$scope","$rootScope","$uibModalInstance","orderId","saveas",function(e,t,s,a,n){e.url="http://"+t.wxUser.appid+"."+config.clientUri+"/gift/listen/"+a,e.saveas=n,e.cancel=function(){s.dismiss("cancel")}}]).controller("GiftWxOrderQrcodeCtrl",["$scope","$rootScope","$uibModalInstance","RestGift","orderId",function(e,t,s,a,n){a.one("wx_qrcode").one(n).get().then(function(t){e.qrcode_ticket=t}),e.cancel=function(){s.dismiss("cancel")}}]).controller("GiftOrderShippingCtrl",["$scope","$uibModalInstance","Alert","RestOrderGift","order","companies","$log","receiver",function(e,t,s,a,n,o,i,r){e.express={companies:o},e.order=n,e.cancel=function(){t.dismiss("cancel")},e.shipping=function(){return r?void a.one(n.id).one(r.id).customPUT({express:{no:e.exp.no,company:{id:e.exp.company.id,name:e.exp.company.name}}}).then(function(e){s.add("success",e.message),t.close(!0)},function(e){s.add("error","设置失败！"),i.error("RestOrderGift",e)}):s.add("warn","一键发货，暂不支持")}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("gift",{"abstract":!0,url:"/gift",templateUrl:"app/gift/gift.html",authenticate:!0,ncyBreadcrumb:{label:"送你"}}).state("gift.post",{url:"/post",templateUrl:"app/gift/gift.post.html",controller:"GiftPostCtrl",authenticate:!0,resolve:{gift:function(){return{}}},ncyBreadcrumb:{label:"发布礼物"}}).state("gift.list",{url:"/list",templateUrl:"app/gift/gift.list.html",controller:"GiftListCtrl",authenticate:!0,ncyBreadcrumb:{label:"礼物列表"}}).state("gift.order",{url:"/order",templateUrl:"app/gift/gift.order.html",controller:"GiftOrderCtrl",authenticate:!0,ncyBreadcrumb:{label:"订单列表"}}).state("gift.order.detail",{url:"/:id",templateUrl:"app/gift/gift.order.detail.html",controller:"GiftOrderDetailCtrl",authenticate:!0,ncyBreadcrumb:{label:"订单状态"},resolve:{order:["$stateParams","RestOrderGift",function(e,t){return t.one(e.id).get()}]}}).state("gift.detail",{"abstract":!0,url:"/:id",template:"<ui-view/>",resolve:{gift:["Restangular","$stateParams",function(e,t){return e.one("gift",t.id).get()}]},authenticate:!0,ncyBreadcrumb:{label:"送你详情"}}).state("gift.detail.edit",{url:"/edit",templateUrl:"app/gift/gift.post.html",controller:"GiftPostCtrl",authenticate:!0,ncyBreadcrumb:{label:"编辑礼物"}}).state("gift.detail.qrcode",{url:"/qrcode",templateUrl:"app/gift/gift.qrcode.html",controller:"GiftQrcodeCtrl",authenticate:!0,ncyBreadcrumb:{label:"送你链接二维码"}})}]),angular.module("serveApp").service("RestGift",["Restangular",function(e){return e.service("gift")}]).service("RestOrderGift",["Restangular",function(e){return e.service("gift/order")}]).service("RestExp",["Restangular",function(e){return e.service("exp")}]),angular.module("serveApp").controller("LoginCtrl",["$scope","$rootScope","RestWecom",function(e,t,s){t.title="登录",e.wechat=function(){s.get().then(function(e){location.href=e.link})}}]).controller("LogoutCtrl",["$scope","$rootScope","$cookieStore","$state","$timeout",function(e,t,s,a,n){s.remove("token"),t.wxUser=void 0,n(function(){a.go("login")},1e3),t.isVerify=!1}]).controller("ExperienceCtrl",["$scope","$rootScope","RestWecom",function(e,t,s){t.title="发起授权页的体验URL",e.wechat=function(){s.get().then(function(e){location.href=e.link})}}]).controller("ExpCtrl",["$cookieStore","$stateParams","RestWechat",function(e,t,s){s.one("experience").get({uid:t.uid}).then(function(t){e.put("token",t.token),location.href="/"})}]).controller("LoginWorkerCtrl",["$scope","$cookieStore","RestWorker",function(e,t,s){e.login=function(){return e.loginForm.$invalid?(e.submitted=!0,!1):void s.one("login").post("",e.user).then(function(e){e.token&&t.put("token",e.token),location.href="/"})}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginCtrl",ncyBreadcrumb:{label:"登陆"}}).state("logout",{url:"/logout",templateUrl:"app/login/logout.html",controller:"LogoutCtrl",ncyBreadcrumb:{label:"退出"}}).state("experience",{url:"/experience?token",templateUrl:"app/login/login.html",controller:"ExperienceCtrl",ncyBreadcrumb:{label:"体验"}}).state("exp",{url:"/exp?uid",templateUrl:"app/login/login.html",controller:"ExpCtrl",ncyBreadcrumb:{label:"测试"}})}]),angular.module("serveApp").controller("MainCtrl",["$scope","$stateParams","$cookieStore","$window","$location","RestWecom","RestWechat",function(e,t,s,a,n,o,i){e.wechat=function(){o.get().then(function(e){location.href=e.link})},t.auth_code&&o.one("auth").get({auth_code:t.auth_code}).then(function(e){s.put("token",e.token),a.location.href=n.path()}),e.wxUser&&i.one("qrcode").get({scene_id:1}).then(function(t){e.qrcode_ticket=t});var r=!1;e.$watch("wxUser",function(t,s){return!!t&&(!r&&(r=!0,void i.one("qrcode").get({scene_id:1}).then(function(t){e.qrcode_ticket=t,r=!1})))},!0)}]).controller("NullModalCtrl",["$scope","$state","$uibModalInstance",function(e,t,s){e.cancel=function(){t.go("plans.center"),s.dismiss("cancel")}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("main",{url:"/?auth_code",templateUrl:"app/main/main.html",controller:"MainCtrl",ncyBreadcrumb:{label:"首页"}})}]),angular.module("serveApp").controller("MerchantCtrl",["$scope","$rootScope","$state","Merchant",function(e,t,s,a){t.title="商家资料管理",a.get().then(function(t){return t.id?(e.merchant=t,void(e.cfgClientUri=config.clientUri)):void s.go("merchant.post")})}]).controller("MerchantPostCtrl",["$scope","$rootScope","$state","$modal","Merchant","Alert",function(e,t,s,a,n,o){t.title="提交商家资料",e.aggrement="YES",e.submitted=!1,e.agmMdl=function(){a.open({templateUrl:"app/document/document.html",controller:"DocMdlAgmCtrl"})},e.master={},e.isUnchanged=function(t){return angular.equals(t,e.master)},e.post=function(){return e.submitted=!0,e.master=angular.copy(e.merchant),"NO"!==e.aggrement&&(!form.$invalid&&void(e.merchant.id?e.merchant.put().then(function(e){o.add("success",e.message),s.go("merchant")}):n.post("",e.merchant).then(function(e){o.add("success",e.message),s.go("merchant.upload")})))}}]).controller("MerchantUploadCtrl",["$scope","$rootScope","$http","$stateParams","FileUploader","$cookieStore",function(e,t,s,a,n,o){t.title="上传资质文件",e.select=function(){return $("input:file").trigger("click"),!1};var i=e.uploader=new n({headers:{Authorization:o.get("token"),"X-API-From":config.from,"X-Component":config.component},url:config.uri+"/merchant/upload"});i.filters.push({name:"imageFilter",fn:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(t)!==-1}}),i.onWhenAddingFileFailed=function(e,t,s){console.info("onWhenAddingFileFailed",e,t,s)},i.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},i.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},i.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},i.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},i.onProgressAll=function(e){console.info("onProgressAll",e)},i.onSuccessItem=function(e,t,s,a){console.info("onSuccessItem",e,t,s,a)},i.onErrorItem=function(e,t,s,a){console.info("onErrorItem",e,t,s,a)},i.onCancelItem=function(e,t,s,a){console.info("onCancelItem",e,t,s,a)},i.onCompleteItem=function(e,t,s,a){console.info("onCompleteItem",e,t,s,a)},i.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",i)}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("merchant",{url:"/merchant",templateUrl:"app/merchant/merchant.html",controller:"MerchantCtrl",ncyBreadcrumb:{label:"商家管理",ico:"bank"}}).state("merchant.post",{url:"/post",templateUrl:"app/merchant/form.html",controller:"MerchantPostCtrl",ncyBreadcrumb:{label:"申请"}}).state("merchant.edit",{url:"/edit",templateUrl:"app/merchant/form.html",controller:"MerchantPostCtrl",ncyBreadcrumb:{label:"编辑信息"}}).state("merchant.upload",{url:"/upload",templateUrl:"app/merchant/upload.html",controller:"MerchantUploadCtrl",ncyBreadcrumb:{label:"上传资质文件"}})}]),angular.module("serveApp").service("Merchant",["Restangular",function(e){return e.one("merchant")}]),angular.module("serveApp").directive("phone",function(){return{require:"ngModel",link:function(e,t,s,a){var n=/^1[34578][0-9][0-9]{8}$/;a.$parsers.unshift(function(e){return n.test(e)?(a.$setValidity("phone",!0),e):void a.$setValidity("phone",!1)})}}}),angular.module("serveApp").controller("PlansCtrl",["$scope","$rootScope","$interval","$uibModal","Alert","RestPlans",function(e,t,s,a,n,o){t.title="订购中心",e.pay={type:"wepay",combo:"order"},e.choosePay=function(t){e.pay.type=t},e.chooseCombo=function(t){e.pay.combo=t},e.$watch("pay.combo",function(t){"order"===t&&o.getList({limit:3}).then(function(t){e.plans=t,e.plan=t[0]}),"counselor"===t&&o.one("service").get({category:"counselor"}).then(function(t){e.plan=t})}),e.selected=0,e.selPlan=function(){e.plan=this.plan,e.pay.type="wepay",e.selected=this.$index},e.payModal=function(){return"wepay"===e.pay.type&&a.open({templateUrl:"app/plans/plans.qrcode.html",resolve:{plan:function(){return e.plan}},controller:"PlansPayModalCtrl"}),"alipay"===e.pay.type&&n.add("warning","支付宝支付开发中"),!1},o.one("numbers").get().then(function(t){e.numbers=t})}]).controller("PlansListCtrl",["$scope","RestPlansOrder",function(e,t){t.getList().then(function(t){e.planOrders=t})}]).controller("PlansServiceCtrl",["$scope","$rootScope","$stateParams","$uibModal","Alert","RestPlans",function(e,t,s,a,n,o){t.title="购买服务",e.pay={type:"wepay"},e.choosePay=function(t){e.pay.type=t},e.choosePay=function(t){e.pay.type=t},e.type=s.type,s.type&&o.one("service").get({category:s.type}).then(function(t){e.plan=t}),e.payModal=function(){return"wepay"===e.pay.type&&a.open({templateUrl:"app/plans/plans.qrcode.html",resolve:{plan:function(){return e.plan}},controller:"PlansPayModalCtrl"}),"alipay"===e.pay.type&&n.add("warning","支付宝支付开发中"),!1}}]).controller("PlansPayModalCtrl",["$scope","$rootScope","$state","$uibModalInstance","plan","RestPlans",function(e,t,s,a,n,o){e.plan=n,e.$watchCollection("[plan,wxUser]",function(t){if(!t[0])return!1;if(!t[1])return!1;var s={plan_id:t[0].id,pubno_id:t[1].appid};o.one("qrcode").get(s).then(function(t){e.qrcode=t})}),e.cancel=function(){a.dismiss("cancel")},e.finishPay=function(){s.reload(),a.close("finishPay")}}]).controller("PlansCounselorCtrl",["$scope","$state","$uibModal",function(e,t,s){e.aggrement="YES",e.openService=function(){t.go("plans.service",{type:"counselor",from:"bambu"})},e.counselorMdl=function(){s.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"counselor"}}})}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("plans",{url:"/plans",templateUrl:"app/plans/plans.html","abstract":!0,authenticate:!0,ncyBreadcrumb:{label:"套餐"}}).state("plans.center",{url:"/center",templateUrl:"app/plans/plans.center.html",controller:"PlansCtrl",ncyBreadcrumb:{label:"充值中心"}}).state("plans.list",{url:"/list",templateUrl:"app/plans/plans.list.html",controller:"PlansListCtrl",ncyBreadcrumb:{label:"列表"}}).state("plans.service",{url:"/service?type&from",templateUrl:"app/plans/plans.service.html",controller:"PlansServiceCtrl",ncyBreadcrumb:{label:"购买服务"}}).state("plans.counselor",{url:"/counselor",templateUrl:"app/plans/plans.counselor.html",controller:"PlansCounselorCtrl",ncyBreadcrumb:{label:"顾问"}})}]),angular.module("serveApp").service("RestPlans",["Restangular",function(e){return e.service("plans")}]).service("RestPlansOrder",["Restangular",function(e){return e.service("plans/order")}]).service("RestPlansNumbers",["Restangular",function(e){return e.service("plans/numbers")}]),angular.module("serveApp").controller("SubOrderListCtrl",["$scope","$rootScope","$interval","$log","$uibModal","Alert","RestGift","RestExp","RestOrderGift","RestSuborder",function(e,t,s,a,n,o,i,r,l,c){t.title="发货管理",e.suborders=[],e.forms={},e.filter={delivery:"all"},e.clientUri=config.clientUri,e.status={startTime:null,endTime:null,startTimePopup:{opened:!1},endTimePopup:{opened:!1},pay:!0,order:"",serial:"",shipping:"all",refresh:!1},e.searchByCondition=function(){return e.forms.suborderForm.$invalid?(e.submitted=!0,!1):e.status.startTime&&!e.status.endTime?void o.add("danger","请填写结束时间"):e.status.endTime&&!e.status.startTime?void o.add("danger","请填写起始时间"):e.status.endTime&&e.status.startTime&&!moment(e.status.startTime).isBefore(e.status.endTime)?void o.add("danger","起始时间必须小于结束时间"):(e.pagi.startTime=e.status.startTime,e.pagi.endTime=e.status.endTime,e.pagi.order=e.status.order,void(e.pagi.serial=e.status.serial))},r.one("company").get().then(function(t){e.companies=t}),e.shippingModel=function(t){var s=t.order;t.id=t.id||t._id,s.id=s.id||s._id;var o=n.open({animation:!0,templateUrl:"app/gift/gift.order.shipping.html",controller:"GiftOrderShippingCtrl",resolve:{order:function(){return s},companies:function(){return e.companies},receiver:function(){return t}}});return o.result.then(function(t){e.status.refresh=!e.status.refresh},function(){a.info("在: "+new Date+"解散模")}),!1},e.exportCards=function(){c.one("export").one("cards").withHttpConfig({responseType:"arraybuffer"}).get({shipping:e.status.shipping,pay:e.status.pay,page:e.pagi.currentPage,limit:e.pagi.itemsPerPage,ext:"wx"}).then(function(e){if(!e.byteLength)return void o.add("danger","无可用语音码");var t=new Blob([e],{type:"application/octet-stream;charset=utf-8"});saveAs(t,"语音卡.zip")})},e.exportCard=function(e){e.card?c.one(e.id||e._id).one("export").one("card").withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(t){var s=new Blob([t],{type:"image/png"});saveAs(s,e._id+".png")}):l.one("export").one("card").one(e.order.id||e.order._id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(t){
var s=new Blob([t],{type:"image/png"});saveAs(s,e.order.serial+".png")})},e.exportSuborders=function(){c.one("export").one("orders").withHttpConfig({responseType:"arraybuffer"}).get({page:e.pagi.currentPage,limit:e.pagi.itemsPerPage,startTime:e.pagi.startTime,endTime:e.pagi.endTime,order:e.pagi.order,serial:e.pagi.serial,shipping:e.status.shipping,pay:e.status.pay}).then(function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats"});saveAs(t,"suborders."+(new Date).getTime()+".xlsx")})},e.$watchCollection("[pagi.currentPage,pagi.itemsPerPage,pagi.startTime,pagi.endTime,pagi.order,pagi.serial,status.shipping,status.pay,status.refresh]",function(t){e.suborders=[],i.one("suborder").get({page:t[0],limit:t[1],startTime:t[2],endTime:t[3],order:t[4],serial:t[5],shipping:t[6],pay:t[7]}).then(function(t){e.suborders=t.suborders,e.pagi.totalItems=t.count})}),e.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10},e.altInputFormats=["M!/d!/yyyy"],e.openStarttimePopup=function(){e.status.startTimePopup.opened=!0},e.openEndtimePopup=function(){e.status.endTimePopup.opened=!0}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("suborder",{url:"/suborder",template:'<div ui-view=""></div>',"abstract":!0,authenticate:!0,ncyBreadcrumb:{label:"套餐"}}).state("suborder.list",{url:"/list",templateUrl:"app/suborder/suborder.list.html",controller:"SubOrderListCtrl",ncyBreadcrumb:{label:"列表"}})}]),angular.module("serveApp").service("RestSuborder",["Restangular",function(e){return e.service("gift/suborder")}]),angular.module("serveApp").controller("WechatCtrl",["$scope","$log",function(e,t){}]).controller("WechatProfileCtrl",function(){}).controller("WechatMenuCtrl",["$scope","$rootScope","RestWxMenu","Alert",function(e,t,s,a){t.title="设置微信菜单",e.menu="{}",s.get().then(function(t){e.menu=JSON.stringify(t.content,null,"    "),e.menus=t.content}),e.saveMenu=function(){s.patch(e.menu).then(function(t){e.menu=JSON.stringify(t.menus,null,"    "),e.menus=t.menus,a.add("success",t.message)})},e.setMenu=function(){s.put().then(function(e){a.add("success",e.message)})}}]).controller("WechatPayCtrl",["$scope","$rootScope","$state","Restangular","Alert",function(e,t,s,a,n){t.title="设置微信支付选项",a.service("wechat/pay").one().get().then(function(t){e.pay=t}),e.submitted=!1,e.clientUri=config.clientUri,e.post=function(){if(e.submitted=!0,e.form.$invalid)return!1;var t=new FormData;t.append("mch_id",e.pay.mch_id),t.append("key",e.pay.key),t.append("pfx",e.uploadFile),e.pay.withHttpConfig({transformRequest:angular.identity}).customPOST(t,void 0,void 0,{"Content-Type":void 0}).then(function(t){n.add("success",t.message),e.pay.key="",e.submitted=!1})}}]).controller("WechatAutoreplyCtrl",["$scope","$rootScope","RestWxReply","Alert",function(e,t,s,a){t.title="关注回复",e.reply={},s.getList().then(function(t){e.reply=t[0]}),e.post=function(){e.reply.put().then(function(e){a.add("success",e.message)})}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("wechat",{url:"/wechat","abstract":!0,templateUrl:"app/wechat/wechat.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"公号管理",ico:"wechat"}}).state("wechat.pay",{url:"/pay",templateUrl:"app/wechat/pay.html",controller:"WechatPayCtrl",ncyBreadcrumb:{label:"公号配置"}}).state("wechat.menu",{url:"/menu",templateUrl:"app/wechat/menu.html",controller:"WechatMenuCtrl",ncyBreadcrumb:{label:"设置菜单"}}).state("wechat.autoreply",{url:"/autoreply",templateUrl:"app/wechat/autoreply.html",controller:"WechatAutoreplyCtrl",ncyBreadcrumb:{label:"关注回复"}}).state("wechat.message",{url:"/message",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"消息管理"}}).state("wechat.user",{url:"/user",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"用户管理"}}).state("wechat.shop",{url:"/shop",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"小店管理"}}).state("wechat.service",{url:"/service",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"客服管理"}}).state("wechat.notice",{url:"/notice",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"业务通知"}}).state("wechat.coupon",{url:"/coupon",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"卡券管理"}}).state("wechat.material",{url:"/material",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"素材管理"}}).state("wechat.rock",{url:"/rock",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"摇一摇"}})}]),angular.module("serveApp").service("RestWechat",["Restangular",function(e){return e.service("wechat")}]).service("RestWecom",["Restangular",function(e){return e.one("wechat").one("component")}]).service("RestWxMenu",["RestWechat",function(e){return e.one("menu")}]).service("RestWxReply",["Restangular",function(e){return e.service("wechat/reply")}]),angular.module("serveApp").controller("WorkerCtrl",["$scope","$rootScope",function(e,t){t.title="员工管理",e.ico="male"}]).controller("WorkerListCtrl",["$scope","$rootScope","$state","RestWorker","Alert",function(e,t,s,a,n){t.title="员工管理",e.ico="male",e.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10,lock:""},e.$watchCollection("[pagi.lock,pagi.currentPage,pagi.itemsPerPage]",function(t){var s={lock:t[0],page:t[1],limit:t[2]};a.one("count").get(s).then(function(t){e.pagi.totalItems=t||0}),a.getList(s).then(function(t){e.workers=t})}),e.lock=function(){var e=this.worker;e.status.lock=!e.status.lock,e.one("lock").post("",{lock:e.status.lock}).then(function(e){n.add("success",e.message),s.reload()})},e.copyText="复制",e.getTextToCopy=function(){return"https://wx.91pintuan.com/worker/login"},e.doSomething=function(){e.copyText="复制成功!"}}]).controller("WorkerFormCtrl",["$scope","$rootScope","$state","$stateParams","$interval","RestWorker","Alert",function(e,t,s,a,n,o,i){t.title="添加员工",e.ico="male",e.getCpcTxt="获取验证码",e.getedCpc=!1,e.getVerificationCode=function(t){return t.telephone.$invalid?(alert("请正确填写手机号!"),!1):void o.one("captcha").post("",{telephone:e.worker.info.telephone}).then(function(t){e.getedCpc=!0,i.add("success",t.message),e.Countdown=120;var s=n(function(){e.Countdown--,e.getCpcTxt=e.Countdown,0===e.Countdown&&(n.cancel(s),e.getCpcTxt="重发")},1e3)})},a.id&&(t.title="编辑员工",o.one(a.id).get().then(function(t){e.worker=t})),e.post=function(){return e.workerForm.$invalid?(e.submitted=!0,!1):void(e.worker.id?e.worker.put().then(function(e){i.add("success",e.message),s.go("worker.list")}):o.post(e.worker.info).then(function(e){i.add("success",e.message),s.go("worker.list")}))}}]),angular.module("serveApp").config(["$stateProvider",function(e){e.state("worker",{url:"/worker",templateUrl:"app/worker/worker.html","abstract":!0}).state("worker.list",{url:"/list",templateUrl:"app/worker/worker.list.html",controller:"WorkerListCtrl",authenticate:!0,ncyBreadcrumb:{label:"员工管理"}}).state("worker.add",{url:"/add",templateUrl:"app/worker/worker.form.html",controller:"WorkerFormCtrl",authenticate:!0,ncyBreadcrumb:{label:"添加员工"}}).state("worker.edit",{url:"/edit?id",templateUrl:"app/worker/worker.form.html",controller:"WorkerFormCtrl",authenticate:!0,ncyBreadcrumb:{label:"编辑员工"}}).state("worker.login",{url:"/login",templateUrl:"app/login/login.worker.html",controller:"LoginWorkerCtrl"})}]),angular.module("serveApp").service("RestWorker",["Restangular",function(e){return e.service("worker")}]),angular.module("serveApp").service("Alert",["$rootScope","$timeout",function(e,t){var s={};return e.alerts=[],s.add=function(a,n){e.alerts.push({type:a,msg:n,close:function(){s.closeAlert(this)}}),t(function(){s.closeAlert(this)},5e3)},s.closeAlert=function(t){s.closeAlertIdx(e.alerts.indexOf(t))},s.closeAlertIdx=function(t){e.alerts.splice(t,1)},s}]),angular.module("serveApp").directive("ngPrint",function(){function e(e,a,n){a.on("click",function(){var e=document.getElementById(n.printElementId);e&&t(e)}),window.onafterprint=function(){s.innerHTML=""}}function t(e){var t=e.cloneNode(!0);s.innerHTML="",s.appendChild(t),window.print()}var s=document.getElementById("printSection");return s||(s=document.createElement("div"),s.id="printSection",document.body.appendChild(s)),{link:e,restrict:"A"}}),angular.module("serveApp").directive("nosyPagi",function(){return{restrict:"E",transclude:!0,scope:{pagi:"=pagi",dropup:"@"},controller:["$scope",function(e){e.pages=[10,20,50,100,200,500,1e3],e.chgPage=function(){e.pagi.itemsPerPage=this.page,e.pagi.currentPage=1}}],template:'<uib-pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" max-size="pagi.maxSize" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination><div class="btn-group btn-group-sm pull-left pagi-per-page" ng-class="{\'dropup\':dropup}" uib-dropdown><button type="button" class="btn btn-metis-5 btn-line btn-sm" uib-dropdown-toggle>{{pagi.itemsPerPage}}条/页 <span class="caret"></span></button><ul class="dropdown-menu"><li ng-repeat="page in pages"><a href="#" ng-click="chgPage()">{{page}}条/页</a></li></ul></div>'}}),angular.module("serveApp").directive("validFile",function(){return{require:"ngModel",link:function(e,t,s,a){t.bind("change",function(){e.$apply(function(){a.$setViewValue(t.val()),a.$render()})})}}}),angular.module("serveApp").factory("Modal",["$rootScope","$modal",function(e,t){function s(s,a){var n=e.$new();return s=s||{},a=a||"modal-default",angular.extend(n,s),t.open({templateUrl:"components/modal/modal.html",windowClass:a,scope:n})}return{confirm:{"delete":function(e){return e=e||angular.noop,function(){var t,a=Array.prototype.slice.call(arguments),n=a.shift();t=s({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+n+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(e){t.close(e)}},{classes:"btn-default",text:"Cancel",click:function(e){t.dismiss(e)}}]}},"modal-danger"),t.result.then(function(t){e.apply(t,a)})}}}}}]),angular.module("serveApp").controller("NavbarCtrl",["$rootScope","$scope","$location",function(e,t,s){t.menu=[{title:"公号配置",link:"wechat.pay",show:!(!e.wxUser||!e.wxUser.pay_config)},{title:"充值中心",link:"plans.center",show:!(!e.wxUser||!e.wxUser.pay_config)},{title:"工人管理",link:"worker.list",show:!(!e.wxUser||!e.wxUser.pay_config)},{title:"退出",link:"logout",show:!0}],t.isCollapsed=!0,t.isActive=function(e){return e===s.path()}}]).controller("MenuCtrl",["$scope","$state",function(e,t){e.menus=[{title:"发布礼物",link:"gift.post"},{title:"商品管理",link:"gift.list"},{title:"订单查询",link:"gift.order"},{title:"发货管理",link:"suborder.list"}],e.isActive=function(e){return t.is(e)}}]),angular.module("serveApp").run(["$templateCache",function(e){e.put("components/footer.html",'<div class="container"><div class="row"><div class="col-xs-3">联系我们<br>GET IN TOUCH</div><div class="col-xs-3">合作联络<br>010-84988362</div><div class="col-xs-3">关注我们的微信号<br><a href="#" tooltip-html="qrcode"><i class="fa fa-weixin"></i> 送你</a></div><div class="col-xs-3">京ICP证060911</div></div></div>'),e.put("components/header.html",'<div class="container" ng-controller="MainCtrl"><div class="row"><div class="col-xs-4"><img src="assets/images/sllogo.png" class="img-responsive"></div><div class="col-xs-8"><div class="navbar navbar-default gift-navbar navbar1" ng-controller="NavbarCtrl"><div class="container-fluid"><div class="navbar-header"><button class="navbar-toggle" type="button" ng-click="isCollapsed = !isCollapsed"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><div collapse="isCollapsed" class="navbar-collapse collapse" id="navbar-main"><ul class="nav navbar-nav"><li ng-if="wxUser"><a ui-sref="main">{{wxUser.nick_name}}</a></li><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}" ng-show="item.show"><a ui-sref="{{item.link}}">{{item.title}}</a></li><li ng-if="!wxUser"><img src="assets/images/icon24_wx_button.png" class="img-responsive center-block wx-tp-lg-btn" ng-click="wechat()"></li></ul></div></div></div></div></div></div>'),e.put("components/sidebar.html",'<nav class="gift-sidebar hidden-print affix-top" ng-controller="MenuCtrl" style="margin-top:39px"><ul class="nav sidenav"><li ng-repeat="menu in menus" ng-class="{active: isActive(menu.link)}"><a ui-sref="{{menu.link}}">{{menu.title}}</a></li></ul></nav>'),e.put("app/album/album.html",'<div class="col-md-12">This is the album view.</div>'),e.put("app/bambu/bambu.config.html",'<div ui-view=""><div class="row"><dic class="col-xs-10 col-xs-offset-1"><div class="well"><h3 class="well-h3 mywell-h3">完成系统配置，打通91拼团与微信服务号</h3><div class="djktdiv"><img ng-src="{{appConfig.uriImg+\'/serve/imgs/gantanhao.png\'}}"> <span style="color: #898989">配置前请确保您的微信公众号为<span style="color: #459ae9">已认证微信服务号，并已开通微信支付</span></span> <a target="_blank" style="color: #898989" href="http://kf.qq.com/faq/120911VrYVrA130805byM32u.html">如何开通?</a></div><ul class="bambu_step bambu_step1"><li>实现每笔交易额走商户自己的微支付账户，直接到账；</li><li>实现消费者完成支付后自动关注微信服务号，为商家积累粉丝；</li><li>消费者可在微信端实时跟进订单状态，查看火爆拼团，我的团等；</li><li>不与其他任何微信第三方应用冲突，配置完成后有10个免费试用订单；</li><li>我们的客服人员将电话联系您，如有问题91客服会为您解答；</li></ul><div><a ui-sref="bambu.config.pay" class="btn mybnt">下一步</a></div></div></dic></div></div>'),e.put("app/bambu/bambu.config.pay.html",'<div ui-view=""><div class="row bam-config"><form class="form-horizontal con-form" name="form" ng-submit="post(form)" novalidate><div class="row con-head"><div class="col-xs-1" style="width: 65px"></div><div class="col-xs-10"><span>下载配置文档，按照配置文档完成以下配置</span> <a href="http://91pt.oss-cn-beijing.aliyuncs.com/contract/91%E9%80%81%E7%A4%BC%E6%94%AF%E4%BB%98%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B%E5%89%AF%E6%9C%AC.pdf" target="_blank" class="btn xzwdbtn">下载配置文档 <i class="fa fa-long-arrow-down"></i></a></div><div class="col-xs-1" style="width: 65px"></div></div><div class="row con-body"><div class="col-xs-1 col1"></div><div class="col-xs-5 right"><!--商户号--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pay.mch_id\'].$valid && submitted,\r\n                                            \'has-error\' : form[\'pay.mch_id\'].$invalid && submitted }"><div class="col-xs-2"><label for="pay.mch_id" class="control-label config-name">商户号</label></div><div class="col-xs-10"><input id="from-cntrol1" type="text" class="form-control form-config" ng-model="pay.mch_id" name="pay.mch_id" placeholder="请输入微信支付分配的商户号" required><p ng-show="form[\'pay.mch_id\'].$error.required && submitted" class="help-block">商户号必须填写.</p></div></div><!--API密钥--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pay.key\'].$valid && submitted,\r\n                                            \'has-error\' : form[\'pay.key\'].$invalid && submitted }"><div class="col-xs-2"><label for="pay.key" class="control-label config-name">API密钥</label></div><div class="col-xs-10"><input id="from-cntrol2" type="text" class="form-control form-config" name="pay.key" ng-model="pay.key" placeholder="请输入API签名密钥" required><p ng-show="form[\'pay.key\'].$error.required && submitted" class="help-block">API签名密钥必须填写.</p></div></div><!--API证书--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pfx\'].$valid && submitted,\r\n                                            \'has-error\' : form[\'pfx\'].$invalid && submitted }"><div class="col-xs-2"><label for="pfx" class="control-label config-name">API证书</label></div><div class="col-xs-10 uploadFlie"><input id="from-cntrol3" type="file" class="form-control" name="pfx" required><p ng-show="form[\'pfx\'].$error.required && submitted" class="help-block">API证书必须填写.</p></div></div><!--支付授权目录--><div class="row config-font"><div class="col-xs-2">支付授权目录</div><div class="col-xs-10">{{ wxUser.pubdom }}/wepay/</div></div><!--JS接口安全域名--><div class="row config-font"><div class="col-xs-2">JS接口安全域名</div><div class="col-xs-10">{{ wxUser.pubdom }}</div></div><!--企业域名--><div class="row config-font"><div class="col-xs-2">企业域名</div><div class="col-xs-10">{{ wxUser.pubdom }}</div></div><!--微信公号模板消息--><div class="row config-font"><div class="col-xs-2">微信公号模板消息</div><div class="col-xs-10">确认微信公众号模板消息行业为IT/科技 电子商务<br><small class="small">如果不是,请修改</small></div></div><!--编辑按钮--><div class="row btn-foot"><div class="col-xs-3"><div class="fanhui" ui-sref="bambu.contact"><a>返回</a></div></div><div class="col-xs-4"><button id="mybtn1" type="submit" class="btn btn-danger btn-block">完 成</button></div></div></div><div class="col-xs-5"></div><div class="col-xs-1"></div></div></form></div></div>'),e.put("app/bambu/bambu.contact.html",'<div class="row bamcont"><div class="col-xs-6 bambu-left"><form class="form-horizontal wssjxx" name="form" ng-submit="post(form)" novalidate><!--商家名称--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.name\'].$valid && submitted,\n\t                                      \'has-error\' : form[\'info.name\'].$invalid && submitted }"><div class="col-xs-2"><label for="info.name" class="mw hidden-xs control-label label-name">商家名称</label></div><div class="col-xs-10"><input type="text" name="info.name" class="form-control input-lg test bambu-input" placeholder="输入商家名称" ng-model="merchant.info.name" required mongoose-error><p ng-show="form[\'info.name\'].$error.required && form[\'info.name\'].$pristine && submitted" class="help-block">商家名称必须填写.</p><p class="help-block" ng-show="form[\'info.name\'].$error.mongoose">{{ errors[\'info.name\'] }}</p></div></div><!--联系人--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.linkman\'].$valid && submitted,\n\t                                      \'has-error\': form[\'info.linkman\'].$invalid && submitted }"><div class="col-xs-2"><label for="info.linkman" class="mw control-label label-name">联系人</label></div><div class="col-xs-10"><input type="text" name="info.linkman" class="form-control input-lg test bambu-input" placeholder="输入联系人姓名" ng-model="merchant.info.linkman" required><p class="help-block" ng-show="form[\'info.linkman\'].$error.required && submitted">姓名必须填写</p><p class="help-block" ng-show="form[\'info.linkman\'].$error.mongoose">{{ errors[\'info.linkman\'] }}</p></div></div><!--联系电话--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.telephone\'].$valid && submitted,\n\t                                      \'has-error\': form[\'info.telephone\'].$invalid && submitted }"><div class="col-xs-2"><label for="info.telephone" class="mw control-label label-name">联系电话</label></div><div class="col-xs-10"><input type="text" name="info.telephone" class="form-control input-lg test bambu-input" placeholder="输入联系人手机号" ng-model="merchant.info.telephone" required phone><p class="help-block" ng-show="form[\'info.telephone\'].$error.required && submitted">联系电话必须填写</p><p class="help-block" ng-show="form[\'info.telephone\'].$error.phone">联系电话格式不正确</p><p class="help-block" ng-show="form[\'info.telephone\'].$error.mongoose">{{ errors[\'info.telephone\'] }}</p></div></div><!--座机号--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.phone\'].$valid && submitted,\n\t                                      \'has-error\': form[\'info.phone\'].$invalid && submitted }"><div class="col-xs-2"><label class="mw control-label label-name">座机号</label></div><div class="col-xs-10"><input type="text" name="info.phone" class="form-control input-lg test bambu-input" placeholder="输入商家电话，方便消费者联系" ng-model="merchant.info.phone"><p class="help-block" ng-show="form[\'info.phone\'].$error.mongoose">{{ errors[\'info.linkman\'] }}</p></div></div><!--地址--><div class="form-group" ng-class="{ \'has-success\': form[\'info.address\'].$valid && submitted,\'has-error\' : form[\'info.address\'].$invalid && submitted}" ng-if="false"><div class="col-xs-2"><label for="info.address" class="hidden-xs control-label label-name">地 址</label></div><div class="col-xs-10"><input type="text" name="info.address" class="form-control input-lg test bambu-input" placeholder="输入商家地址" ng-model="merchant.info.address" required mongoose-error><p ng-show="form[\'info.address\'].$error.required && form[\'info.address\'].$pristine && submitted" class="help-block">商家地址必须填写.</p><p class="help-block" ng-show="form[\'info.address\'].$error.mongoose">{{ errors[\'info.address\'] }}</p></div></div><!--协议--><!--<div class="form-group"\r\n\t\t  \t\t ng-class="{ \'has-success\': aggrement === \'YES\' && submitted,\r\n\t                                      \'has-error\': aggrement === \'NO\' && submitted }" >\r\n\t\t    <div class="col-xs-2"></div>\r\n\t\t    <div class="col-xs-10">\r\n\t\t      <div class="checkbox">\r\n\t\t        <label>\r\n\t\t         <div class="checker">\r\n\t\t           <span class="checked">\r\n\t\t            <input class="uniform" name="aggrement" type="checkbox" \r\n\t\t            \tng-model="aggrement" ng-true-value="\'YES\'" ng-false-value="\'NO\'">\r\n\t\t           </span>\r\n\t\t         </div><a class="mysyxy" href="" ng-click="agmMdl()">91拼团使用协议</a>\r\n\t\t        </label>\r\n\t\t      </div>\r\n\t\t      <p class="help-block" ng-show="aggrement === \'NO\' && submitted">\r\n\t\t      \t请确认是否同意商户协议。\r\n\t\t      </p>\r\n\t\t    </div>\r\n\t\t  </div>--><!--下一步--><div class="row bambu-btn"><div class="col-xs-2"></div><div class="col-xs-5"><button class="btn btn-danger btn-lg btn-block mynext" type="submit" ng-disabled="form.$invalid || isUnchanged(merchant) || aggrement === \'NO\'">{{merchant.id?\'下一步\':\'下一步\'}}</button></div></div></form></div><div class="col-xs-6"></div></div>'),e.put("app/bambu/bambu.html",'<!--<div class="row bambu-grid" ng-if="!(\'bambu.config.pay\' | isState)">--><div class="row bambu-grid"><div class="col-xs-6" ui-sref-active="active"><a class="bambu-tab" ui-sref="bambu.contact">填写商家信息</a></div><div class="col-xs-6" ui-sref-active="active"><a class="bambu-tab" ui-sref="bambu.config.pay">配置公众号</a></div></div><div ui-view=""></div>'),e.put("app/breadcrumb/breadcrumb.html",'<ol class="breadcrumb"><li ng-repeat="step in steps" ng-class="{active: $last}" ng-switch="$last || !!step.abstract"><i class="fa fa-{{step.ncyBreadcrumb.ico}}"></i> <a ng-switch-when="false" href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a> <span ng-switch-when="true">{{step.ncyBreadcrumbLabel}}</span></li></ol>'),e.put("app/document/document.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title">{{document.title}}</h4></div><div class="modal-body"><div ng-bind-html="document.document"></div></div><div class="modal-footer"><button class="btn btn-default btn-sm" ng-click="cancel()">关闭</button></div>'),e.put("app/gift/gift.html",'<div ui-view=""><ul class="ng-scope"><li><a ui-sref="gift.post" ui-sref-opts="" class="ng-binding" href="/gift/post"><i class="fa fa-angle-right"></i>&nbsp;发布礼物</a></li><li><a ui-sref="gift.list" ui-sref-opts="" class="ng-binding" href="/gift/list"><i class="fa fa-angle-right"></i>&nbsp;礼物管理</a></li><li><a ui-sref="gift.order" ui-sref-opts="" class="ng-binding" href="/gift/order"><i class="fa fa-angle-right"></i>&nbsp;订单管理</a></li></ul></div>'),e.put("app/gift/gift.list.html",'<div class="panel panel-default"><div class="panel-body"><div class="row panel-search"><div class="col-xs-7"><div><input type="text" class="s-input" ng-model="status.name" placeholder="按找商品名查找"> <span ng-click="findByName()" class="s-span"><i class="fa fa-search"></i></span></div></div><div class="col-xs-4 select"><span>筛选：</span> <span>每页条数：</span></div><div class="col-xs-1 pagi-r"><nosy-pagi pagi="pagi"></nosy-pagi></div></div><div class="row online"><div class="col-xs-6 left"><div class="btn-group btn-danger btn-group-sm"><label class="btn" ng-model="status.online" uib-btn-radio="\'\'">全部</label><label class="btn" ng-model="status.online" uib-btn-radio="true">上架</label><label class="btn" ng-model="status.online" uib-btn-radio="false">下架</label></div></div><div class="col-xs-6 right"><nosy-pagi pagi="pagi"></nosy-pagi></div></div></div><table class="table table-condensed gift-list" id="exportable"><thead><tr><th width="30%">商品名称</th><th width="15%">单价</th><th width="15%">发布时间</th><th width="15%">订单数</th><th width="15%">发货数</th><th></th><th>操作</th><th></th></tr></thead><tbody><tr ng-repeat="gift in gifts"><td class="word-break">{{gift.info.name}}</td><td>{{gift.info.price | currency}}</td><td>{{gift.time.add | date : \'yyyy.MM.dd hh:mm\'}}</td><td>{{gift.num.pay}}</td><td>{{gift.num.delivery}}</td><td align="center" class="vcode"><a class="btn btn-primary btn-xs" ui-sref="gift.detail.qrcode({id:gift.id})">二维码</a></td><td align="center" class="compile"><a class="btn btn-success btn-xs" ui-sref="gift.detail.edit({id:gift.id})">编辑</a></td><td align="center" class="soldOut"><button class="btn btn-warning btn-xs" ng-click="offShelf()" ng-if="gift.status.online === true">下架</button> <span ng-if="gift.status.online === false">已下架</span></td></tr></tbody></table><div class="panel-body text-right"><pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div></div>'),e.put("app/gift/gift.order.detail.html",'<div ui-view class="panel panel-default gift-order gift-info"><table class="table table-condensed table-head"><!--<thead>\n      <tr>\n        <th>订单号：{{order.serial}}</th>\n        <th>买方：{{order.sender.name}}</th>\n        <th>支付时间：{{order.time.add | date : \'yyyy.MM.dd hh:mm\'}}</th>\n      </tr>\n    </thead>--><tbody><tr><td width="40%"><img ng-src="{{order.gift.info.cover ? appConfig.uriPht + order.gift.info.cover:\'assets/images/present_sent_demo.png\'}}" alt="..."><div class="order-info"><div class="info-name"><a>{{order.gift.info.name}}</a></div><div>商品价格：{{order.gift.info.price | currency}}</div><div>实付金额：{{order.gift.info.price * order.capacity | currency}}</div></div></td><td width="20%"><p>买家：{{order.sender.name}}</p><p>订单号：{{order.serial}}</p><p>支付时间：{{order.time.add | date : \'yyyy.MM.dd hh:mm\'}}</p><p>购买数量：{{order.capacity}}</p></td><td width="20%" class="center"><div><span>已发货 ({{order.shipping}})</span><br><span class="shipping">待发货 ({{order.receivers.length - order.shipping}})</span></div></td><td width="20%" class="downcode"><!--<qrcode data="{{order.url}}" version="5" error-correction-level="M" size="100" download="来自{{order.sender.name}}的礼物"></qrcode>--> <button ng-click="exportCards()" class="btn btn-code">批量下载语音码</button></td></tr></tbody></table><table class="table table-condensed"><thead><tr><th>子订单单号（序列号）</th><th>收货人信息</th><th>时间</th><th class="text-center" width="90">发货管理</th><th class="text-center" width="90">语音码</th></tr></thead><tbody><tr ng-repeat="item in order.receivers"><td>{{item.id}}</td><td><span>{{item.consignee || item.name}}</span> <span>{{item.address}}</span> <span>{{item.telephone}}</span></td><td><p>创建时间－{{ item.fillinDate | date: \'yyyy-MM-dd HH:mm:ss\' }}</p><p ng-if="item.status.shipping_date">发货时间－{{ item.status.shipping_date | date: \'yyyy-MM-dd HH:mm:ss\' }}</p><p ng-if="item.status.read_date">收货时间－{{ item.status.read_date | date: \'yyyy-MM-dd HH:mm:ss\' }}</p></td><td align="center"><span ng-if="item.status.shipping">已发货</span> <button ng-if="!item.status.shipping && item.telephone" ng-click="shippingModel(item)" class="btn btn-primary btn-outline btn-xs btn-ship">发货</button> <button ng-if="!item.status.shipping && !item.telephone" ng-disabled="true" ng-click="shippingModel(item)" class="btn btn-primary btn-outline btn-xs">－</button></td><td align="center"><button ng-click="exportCard(item)" class="btn btn-primary btn-outline btn-xs btn-ship-down">下载</button></td></tr></tbody></table></div>'),e.put("app/gift/gift.order.html",'<div ui-view class="panel panel-default gift-order"><div class="panel-body"><!-- in v2, v1\'s toolbar is refactored --><!-- https://github.com/arrking/songni/issues/84 --><!-- <div class="btn-group btn-group-sm btn-danger" ng-if="env === \'dev\'">\n      <label class="btn" ng-model="status.pay" btn-radio="\'\'">全部(测试用)</label>\n      <label class="btn" ng-model="status.pay" btn-radio="true">已付</label>\n      <label class="btn" ng-model="status.pay" btn-radio="false">未付</label>\n    </div>\n\n    <div class="btn-group btn-group-sm btn-danger">\n      <label class="btn" ng-model="status.shipping" btn-radio="\'\'">全部</label>\n      <label class="btn" ng-model="status.shipping" btn-radio="true">已发货</label>\n      <label class="btn" ng-model="status.shipping" btn-radio="false">未发货</label>\n    </div>  --><!--button type="button" class="btn btn-primary btn-sm" ng-click="exportCards()" style="margin-left:10px;">下载声音卡</button--><form class="form-horizontal order-warp" name="forms.orderForm" ng-submit="searchByCondition()" novalidate><div class="row order-head"><div class="col-xs-5 order-time"><div class="start col-xs-5"><div class="form-group" ng-class="{ \'has-error\' : forms.orderForm.starttime.$invalid && submitted}"><div class="input-group pull-left"><input type="text" class="form-control" name="starttime" uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model="status.startTime" is-open="status.startTimePopup.opened" close-text="Close" placeholder="起始时间" alt-input-formats="altInputFormats"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openStarttimePopup()"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 font-span"><span>至</span></div><div class="end col-xs-5"><div class="form-group" ng-class="{ \'has-error\' : forms.orderForm.endtime.$invalid && submitted}"><!--<label for="endtime" class="control-label"> —— </label>--><div class="input-group pull-left"><input type="text" class="form-control" name="endtime" uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model="status.endTime" is-open="status.endTimePopup.opened" close-text="Close" placeholder="结束时间" alt-input-formats="altInputFormats"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openEndtimePopup()"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 btn-col1"><button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div></div><!--序列号--><div class="col-xs-3"><input type="number" class="form-control form-number" ng-model="status.serial" placeholder="按订单号查找"> <button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div><!--订单号--><!--<div class="col-xs-3">\n        \t<div class="form-group">\n\t          <input type="text" class="form-control form-number" ng-model="status.order" placeholder="输入订单号查找">\n\t        \t<button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub">搜索</button>\n\t\t      </div>\n        </div> --><!--分页--><div class="col-xs-1 form-pagi"><nosy-pagi pagi="pagi"></nosy-pagi></div><div class="col-xs-3 print"><button type="button" class="btn btn-primary btn-outline btn-sm" ng-click="exportOrders()">导出订单</button></div></div><!--<div class="row print">\n      \t<div class="col-xs-12">\n      \t\t<button type="button" class="btn btn-primary btn-outline btn-sm" ng-click="exportCards()" >声音卡</button>\n        <button type="button" class="btn btn-primary btn-outline btn-sm" ng-click="exportOrders()">导出订单</button>\n      \t</div>\n      </div>--></form><!--订单筛选--><div class="from-group online"><div class="col-xs-6 left left1"><div class="btn-group btn-danger btn-group-sm"><label class="btn" ng-model="status.finish" uib-btn-radio="\'all\'">全部订单<span ng-if="status.finish === \'all\'">({{pagi.totalItems}})</span></label><label class="btn" ng-model="status.finish" uib-btn-radio="false">未完成<span ng-if="status.finish === false">({{pagi.totalItems}})</span></label><label class="btn" ng-model="status.finish" uib-btn-radio="true">已完成<span ng-if="status.finish === true">({{pagi.totalItems}})</span></label></div></div><div class="col-xs-6 right"><nosy-pagi pagi="pagi"></nosy-pagi></div></div></div><table class="table table-condensed gift-orderlist" id="exportable"><thead><tr><th width="15%">订单号</th><th width="10%">买家</th><th width="18%">所购商品</th><th width="12%">支付时间</th><th width="12%">实付金额</th><th width="10%">购买数量</th><th width="15%">子订单发货状态</th><th class="hidden-print" width="20%">订单详情</th></tr></thead><tbody><tr ng-repeat="order in orders" ng-init="giftorders[$index]={\n          serial:\'[\'+order.serial+\']\',\n          time:(order.time.add | date : \'yyyy-MM-dd  hh:mm\'),\n          nickname:order.sender.info.nickname,\n          name:order.receiver.consignee,\n          address:order.receiver.address,\n          telephone:order.receiver.telephone,\n          gift:order.gift.info.name\n        };"><td><a ui-sref="gift.order.detail({id:order.id})">{{order.serial}}</a></td><td>{{order.sender.info.nickname}}</td><td><a ui-sref="gift.detail.qrcode({id:order.gift.id})">{{order.gift.info.name}}</a></td><td>{{order.time.add | date : \'yyyy.MM.dd hh:mm\'}}</td><td>￥ {{order.gift.info.price}}</td><td align="center">{{order.capacity}}</td><!--td style="background:#f7f7f7">\n                    <p class="hidden-print">{{order.receiver.address | limitTo:15}}{{order.receiver.address.length > 15 ? \'...\' : \'\'}}</p>\n                    <p class="visible-print-block">{{order.receiver.address}}</p>\n                </td--><td align="center"><div>已发货 ({{countShipping(order)}})</div><div ng-if="order.receivers.length-countShipping(order) === 0">待发货 (0)</div><button ng-if="order.receivers.length-countShipping(order) != 0" ui-sref="gift.order.detail({id:order.id})" class="btn btn-primary btn-xs btn-dfh">待发货 ({{order.receivers.length-countShipping(order)}})</button></td><td ng-if="false" class="hidden-print"><span ng-class="{\'bg-danger\':order.status.pay}">{{order.status.pay?\'已付\':\'未付\'}}</span></td><!--td align="center" class="hidden-print">\n          <button class="btn btn-primary btn-xs" ng-click="exportCard()">下载</button>\n          <button class="btn btn-primary btn-xs" ng-click="wxQrcodeModel()" ng-if="env === \'dev\'">微信二维码</button>\n          <a href="http://{{wxUser.appid}}.{{clientUri}}/gift/listen/{{order.id}}" target="_blank" class="btn btn-primary btn-xs" ng-if="env === \'dev\'">试听</a>\n        </td--><td align="center" class="hidden-print"><!-- <div>{{order.status.pay?\'已付款\':\'待支付\'}}</div>--><!--see issue #133--> <button class="btn btn-default btn-xs btn-xq" ui-sref="gift.order.detail({id:order.id})">详情</button><!--button class="btn btn-primary btn-xs" ng-click="shippingModel()" ng-if="!order.status.shipping">发货</button--></td></tr></tbody></table><div class="panel-body text-right"><pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div></div>'),
e.put("app/gift/gift.order.qrcode.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">下载声音卡</h3></div><div class="modal-body"><qrcode data="{{url}}" version="5" error-correction-level="M" size="200" download="{{saveas}}"></qrcode></div><div class="modal-footer">点击二维码下载</div>'),e.put("app/gift/gift.order.shipping.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">{{order.status.shipping?\'修改快递单号\':\'发货确认\'}}</h4></div><div class="modal-body"><form class="form-horizontal"><div class="form-group"><label class="col-xs-3 control-label">快递公司</label><div class="col-xs-8"><select class="form-control" ng-model="exp.company" ng-options="com.name for com in express.companies"><option value="">请选择</option></select></div></div><div class="form-group"><label class="col-xs-3 control-label">快递单号</label><div class="col-xs-8"><input type="text" class="form-control" ng-model="exp.no" placeholder="请输入快递单号"></div></div><div class="form-group has-warning"><p class="help-block text-center">填写完整的快递信息后,点击<kbd>发货</kbd>将会通过您的微信公众号给客户发送一条通知</p></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="cancel()">取消</button> <button type="button" class="btn btn-primary" ng-click="shipping()">发货</button></div>'),e.put("app/gift/gift.order.wx.qrcode.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">下载声音卡</h3></div><div class="modal-body"><img src="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket={{qrcode_ticket}}" style="width:200px"></div><div class="modal-footer">点击二维码下载</div>'),e.put("app/gift/gift.post.html",'<p class="gift-post-title"><i class="fa fa-gift"></i> <span>填写礼物详情</span></p><form name="giftForm" ng-submit="post()" class="form-horizontal form-post" novalidate><!--礼物标题--><div class="row form-group gift-title" ng-class="{ \'has-success\': giftForm[\'gift.name\'].$valid && submitted,\n                    \'has-error\' : giftForm[\'gift.name\'].$invalid && submitted }"><div class="col-xs-1"><label for="gift.name" class="control-label control-label-cust">礼物标题：</label></div><div class="col-xs-11"><input type="text" name="gift.name" ng-model="gift.info.name" class="form-control" ng-maxlength="500" required><p ng-show="giftForm[\'gift.name\'].$error.required && submitted" class="help-block">礼物标题必须填写.</p><p ng-show="giftForm[\'gift.name\'].$error.maxlength" class="help-block">最多15个字.</p></div></div><!--副标题--><div class="form-group row gift-title" ng-class="{ \'has-success\': giftForm[\'gift.lead\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.lead\'].$invalid && submitted }"><div class="col-xs-1"><label for="gift.lead" class="control-label label-f control-label-cust">副标题 ：</label></div><div class="col-xs-11"><textarea name="gift.lead" ng-model="gift.info.lead" class="form-control" rows="5" placeholder="更多礼物描述"></textarea><p ng-show="giftForm[\'gift.lead\'].$error.required && submitted" class="help-block">礼物副标题必须填写.</p></div></div><!--礼物单价--><div class="form-group row gift-title" ng-class="{ \'has-success\': giftForm[\'gift.price\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.price\'].$invalid && submitted }"><div class="col-xs-1"><label for="gift.price" class="control-label control-label-cust">商品价格：</label></div><div class="col-xs-3"><div class="input-group"><span class="input-group-addon"><i class="fa fa-rmb"></i></span> <input type="text" name="gift.price" ng-model="gift.info.price" class="form-control" required></div><p ng-show="giftForm[\'gift.price\'].$error.required && submitted" class="help-block">礼物价格必须填写.</p></div></div><!--库存--><div class="form-group row gift-title" ng-class="{ \'has-success\': giftForm[\'gift.num.stock\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.num.stock\'].$invalid && submitted }"><div class="col-xs-1"><label for="gift.num.stock" class="control-label label-k control-label-cust">库存：</label></div><div class="col-xs-3"><div class="input-group"><input type="number" ng-min="0" ng-max="9999999" name="gift.num.stock" ng-model="gift.num.stock" class="form-control" placeholder="0"> <span class="input-group-addon">件</span></div><p class="noteStock">库存数字默认为0，代表无库存限制</p><p ng-show="giftForm[\'gift.num.stock\'].$error.min && submitted" class="help-block">库存必须大于0</p><p ng-show="giftForm[\'gift.num.stock\'].$error.max && submitted" class="help-block">库存必须小于9999999</p></div></div><!--轮播图--><ng-form name="giftCoverForm"><div class="form-group row gift-title" ng-class="{ \'has-success\': uploadFile && submitted,\n                                      \'has-error\' : !uploadFile && submitted }"><div class="col-xs-1"><label for="gift.cover" class="control-label label-f control-label-cust">轮播图：</label></div><div class="col-xs-3"><div class="pull-left preview-image"><img ng-src="{{previewImage}}" ng-if="previewImage" width="80px" height="80px"> <img ng-src="{{\'http://\' + config.uriPht + gift.info.cover}}" ng-if="gift.info.cover&&!previewImage" width="80px" height="80px"> <img holder="holder.js/100px80?text=暂无封面&bg=b5b6b6&fg=ffffff" class="img-responsive center-block" ng-if="!gift.info.cover && !previewImage" width="80px" height="80px"></div><div class="upload-file"><file-field class="btn btn-primary" ng-model="uploadFile" preview="previewImage">选择图片</file-field></div><p class="lunjy">建议长宽比例1:1</p></div></div></ng-form><!--\n  <div class="form-group" ng-class="{ \'has-success\': giftForm[\'gift.poetry\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.poetry\'].$invalid && submitted }">\n    <label for="gift.poetry" class="col-xs-1 control-label">诗词</label>\n    <div class="col-xs-11">\n      <textarea name="gift.poetry" ng-model="gift.info.poetry" class="form-control" rows="3" placeholder="输入诗词"></textarea>\n      <p ng-show="giftForm[\'gift.poetry\'].$error.required && submitted" class="help-block">\n      礼物名称必须填写.\n      </p>\n    </div>\n  </div>\n  --><!--礼物详情--><div class="form-group row gift-title gift-details" ng-class="{\'has-success\': giftForm[\'gift.detail\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.detail\'].$invalid && submitted }"><div class="col-xs-1"><label for="gift.detail" class="hidden-xs control-label control-label-cust">礼物详情：</label></div><div class="col-xs-11"><textarea type="text" name="gift.detail" class="form-control" placeholder="输入礼物详情" ng-model="gift.info.detail" ui-tinymce="tinymceOptions" required></textarea><p ng-show="giftForm[\'gift.detail\'].$error.required && submitted" class="help-block">礼物详情必须填写.</p></div></div><div class="form-group row gift-title" style="background-color:transparent"><div class="col-xs-3 form-foot"><button type="submit" class="btn btn-primary btn-block btn-ground">上架</button></div></div></form>'),e.put("app/gift/gift.qrcode.html",'<p class="gift-post-title"><i class="fa fa-gift"></i> <span>商品二维码</span></p><form class="form-horizontal row form-url" role="form"><div class="col-xs-1"><label for="url" class="control-label">商品地址</label></div><div class="col-xs-10"><input type="text" name="url" class="form-control" ng-model="url"></div><div class="col-xs-1"><button type="button" clip-copy="getTextToCopy()" clip-click="doSomething()" class="btn btn-default">复制链接</button></div></form><div class="row form-shop"><div class="col-xs-6"><div class="text-center text-code"><qrcode version="8" error-correction-level="H" size="200" data="{{text}}"></qrcode><p>商品二维码</p><p>扫描即可查看礼物</p></div></div><div class="col-xs-6"><div class="panel panel-default"><div class="panel-heading">{{commodity.info.name}}</div><div class="panel-body" style="padding:0"><iframe ng-src="{{url}}" width="100%" height="517px" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="auto" allowtransparency="yes"></iframe></div></div></div></div>'),e.put("app/login/login.html",'<h1 class="text-center">欢迎使用送你微信公众号第三方平台</h1><div class="text-center"><img src="assets/images/icon_button3_1.png" ng-click="wechat()"></div>'),e.put("app/login/login.worker.html",'<div style="width:320px;margin:50px auto"><form name="loginForm" ng-submit="login()" novalidate><div class="form-group" ng-class="{ \'has-error\' : loginForm.telephone.$invalid && submitted}"><div class="input-group"><span class="input-group-addon"><i class="fa fa-phone fa-2 fa-fw"></i></span> <input type="tel" name="telephone" class="form-control" placeholder="请输入您的手机号码" ng-model="user.telephone" required phone></div><p ng-show="loginForm.telephone.$invalid && submitted" class="help-block">手机号不符合规则</p></div><div class="form-group" ng-class="{ \'has-error\' : loginForm.password.$invalid &&  submitted}"><div class="input-group"><span class="input-group-addon"><i class="fa fa-key fa-2 fa-fw"></i></span> <input type="password" name="password" class="form-control" placeholder="请输入密码" ng-model="user.password" required></div><p ng-show="loginForm.password.$invalid && submitted" class="help-block">请输入密码需要</p></div><div class="form-group"><button type="submit" class="btn btn-block btn-primary">登录</button></div></form></div>'),e.put("app/login/logout.html",'<div class="text-center"><i class="fa fa-spinner fa-spin fa-5x"></i></div>'),e.put("app/main/main.home.html",'<!--logo图--><div class="home_head"><div class="row"><div class="col-xs-8"><img src="assets/images/index-logo1.png" class="index-logo" alt=""></div><div class="col-xs-4"><button class="wechat btnsj" ng-click="wechat()">商家登录</button> <button class="wechat btnkt" ng-click="wechat()">注册开通</button></div></div></div><!--banner图--><div class="home_banner_1"><div class="home_banner home_banner1"><div class="row cont-img"><div class="col-xs-4 hidden-xs"><img src="assets/images/index-banner.png" class="img-responsive img-responsive1 center-block"></div><div class="col-xs-8 index-banner2"><img src="assets/images/index-banner2.png" class="img-responsive center-block"></div></div></div></div><!--送你功能--><div class="home_banner_2"><div class="home_banner"><img src="assets/images/gnbanner.png" class="img-responsive center-block"></div></div><!--开通步骤--><div class="home_banner_3"><div class="home_banner"><img src="assets/images/bzbanner.png" class="img-responsive center-block"></div></div><!--版权--><div class="home_banner_4"><div class="home_banner"><a href="#" target="_blank"><!--http://www.spiderfamily.com--> <img src="assets/images/footLogo.png" class="img-responsive center-block"></a></div></div>'),e.put("app/main/main.html",'<div ng-if="!wxUser" style="background: #FFFFFF" ng-include="\'app/main/main.home.html\'"></div><div ng-if="wxUser" ng-include="\'app/main/main.signin.html\'"></div>'),e.put("app/main/main.popup.html",'<div class="modal-header popup-head"><button class="close" ng-click="$dismiss()"><span>&times;</span></button></div><div class="modal-body modal-popup"><h1 class="title">欢迎使用91送礼服务</h1><p class="cont">您好，您已成功开通91送礼服务！我们为新商家提供5个免费订单供体验使用。使用完成后可到充值中心进行订单充值，即可继续使用。</p><button class="btn"><span ng-click="$dismiss()">完成</span></button></div>'),e.put("app/main/main.signin.html",'<form class="form-horizontal form-home"><div class="row form-group form-bot bot1"><div class="col-xs-1"><label class="control-label">授权公众号</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.nick_name}}</p></div></div><!--<div class="form-group">\n    <label class="col-sm-2 control-label">头像</label>\n    <div class="col-sm-10">\n      <p class="form-control-static"><img class="media-object img-thumbnail user-img" alt="User Picture" src="{{ wxUser.head_img}}" style="width:64px;"></p>\n    </div>\n  </div>--><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">服务类型</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.service_type_info}}</p></div></div><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">认证类型</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.verify_type_info}}</p></div></div><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">原始ID</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.user_name}}</p></div></div><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">微信号</label></div><div class="col-xs-11"><p class="form-control-static">{{wxUser.alias}}</p></div></div><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">礼物列表</label></div><div class="col-xs-11"><p class="form-control-static">http://{{wxUser.pubdom}}</p></div></div><div class="row form-group form-bot"><div class="col-xs-1"><label class="control-label">我的礼物</label></div><div class="col-xs-11"><p class="form-control-static">http://{{wxUser.pubdom}}/order/list</p></div></div><!--<div class="form-group">\n    <label class="col-sm-2 control-label">二维码</label>\n    <div class="col-sm-10">\n      <p class="form-control-static">\n        <img src="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket={{qrcode_ticket}}" style="width:320px;">\n      </p>\n    </div>\n  </div>--></form>'),e.put("app/main/null.html",'<div class="modal-header popup-head"><button class="close" ng-click="$dismiss()"><span>&times;</span></button></div><div class="modal-body modal-popup"><div ng-if="wxUser.astrict === \'burst\'"><h1 class="title">订单余额不足提醒</h1><p class="cont">商家您好,您当前的订单使用量不足,为不影响您的正常使用,<br>请尽快到<a ui-sref="plans.center" class="myred">充值中心</a>购买!</p></div><div ng-if="wxUser.astrict === \'expired\'"><h1 class="title">会员过期</h1><p class="cont">商家您好,您当前的会员过期,为不影响您的正常使用,<br>请尽快到<a ui-sref="plans.center" class="myred">充值中心</a>购买!</p></div><button class="btn"><a href="/plans/center">充值中心</a></button></div>'),e.put("app/merchant/form.html",'<form class="form-horizontal" name="form" ng-submit="post(form)" novalidate><div class="form-group" ng-class="{ \'has-success\': form[\'info.name\'].$valid && submitted,\n                                      \'has-error\' : form[\'info.name\'].$invalid && submitted }"><label for="info.name" class="col-sm-2 hidden-xs control-label">商家名称</label><div class="col-sm-10"><input type="text" name="info.name" class="form-control" placeholder="请输入商家名字" ng-model="merchant.info.name" required mongoose-error><p ng-show="form[\'info.name\'].$error.required && form[\'info.name\'].$pristine && submitted" class="help-block">商家名称必须填写.</p><p class="help-block" ng-show="form[\'info.name\'].$error.mongoose">{{ errors[\'info.name\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-success\': form[\'info.address\'].$valid && submitted,\n                                      \'has-error\' : form[\'info.address\'].$invalid && submitted}"><label for="info.address" class="col-sm-2 hidden-xs control-label">地 址</label><div class="col-sm-10"><input type="text" name="info.address" class="form-control" placeholder="请输入商家地址" ng-model="merchant.info.address" required mongoose-error><p ng-show="form[\'info.address\'].$error.required && form[\'info.address\'].$pristine && submitted" class="help-block">商家地址必须填写.</p><p class="help-block" ng-show="form[\'info.address\'].$error.mongoose">{{ errors[\'info.address\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-success\': form[\'info.detail\'].$valid && submitted,\n                                      \'has-error\' : form[\'info.detail\'].$invalid && submitted}"><label for="info.detail" class="col-sm-2 hidden-xs control-label">商家介绍</label><div class="col-sm-10"><textarea type="text" name="info.detail" class="form-control" placeholder="请输入商家简介" ng-model="merchant.info.detail" required mongoose-error></textarea><p ng-show="form[\'info.detail\'].$error.required && form[\'info.detail\'].$pristine && submitted" class="help-block">商家介绍必须填写.</p><p class="help-block" ng-show="form[\'info.detail\'].$error.mongoose">{{ errors[\'info.detail\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-success\': form[\'info.linkman\'].$valid && submitted,\n                                      \'has-error\': form[\'info.linkman\'].$invalid && submitted }"><label for="info.linkman" class="col-xs-2 control-label">联系人</label><div class="col-xs-10"><input type="text" name="info.linkman" class="form-control" placeholder="请输入联系人姓名" ng-model="merchant.info.linkman" required><p class="help-block" ng-show="form[\'info.linkman\'].$error.required && submitted">姓名必须填写</p><p class="help-block" ng-show="form[\'info.linkman\'].$error.mongoose">{{ errors[\'info.linkman\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-success\': form[\'info.telephone\'].$valid && submitted,\n                                      \'has-error\': form[\'info.telephone\'].$invalid && submitted }"><label for="info.telephone" class="col-xs-2 control-label">手机号</label><div class="col-xs-10"><input type="text" name="info.telephone" class="form-control" placeholder="请输入联系人手机号" ng-model="merchant.info.telephone" required phone><p class="help-block" ng-show="form[\'info.telephone\'].$error.required && submitted">手机号必须填写</p><p class="help-block" ng-show="form[\'info.telephone\'].$error.phone">手机号格式不正确</p><p class="help-block" ng-show="form[\'info.telephone\'].$error.mongoose">{{ errors[\'info.telephone\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-success\': aggrement === \'YES\' && submitted,\n                                      \'has-error\': aggrement === \'NO\' && submitted }" ng-if="!merchant.id"><label for="aggrement" class="control-label col-xs-2">商户协议</label><div class="col-xs-8"><div class="checkbox"><label><div class="checker"><span class="checked"><input class="uniform" name="aggrement" type="checkbox" ng-model="aggrement" ng-true-value="\'YES\'" ng-false-value="\'NO\'"></span></div><a href="" ng-click="agmMdl()">使用协议</a></label></div><p class="help-block" ng-show="aggrement === \'NO\' && submitted">请确认是否同意商户协议。</p></div></div><div class="text-center"><button class="btn btn-primary btn-login" type="submit" ng-disabled="form.$invalid || isUnchanged(merchant)">{{merchant.id?\'保存修改\':\'提交申请\'}}</button></div></form>'),e.put("app/merchant/info.html",'<form class="form-horizontal" role="form"><div class="form-group" ng-if="!isVerify"><label class="col-sm-2 control-label">资质文件</label><div class="col-sm-10"><p class="form-control-static"><a ui-sref="merchant.upload" class="btn btn-primary btn-sm">请上传资质文件</a></p></div></div><div class="form-group"><label class="col-sm-2 control-label">名称</label><div class="col-sm-10"><p class="form-control-static">{{merchant.info.name}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">地址</label><div class="col-sm-10"><p class="form-control-static">{{merchant.info.address}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">介绍</label><div class="col-sm-10"><p class="form-control-static">{{merchant.info.detail}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">联系人</label><div class="col-sm-10"><p class="form-control-static">{{merchant.info.linkman}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">联系电话</label><div class="col-sm-10"><p class="form-control-static">{{merchant.info.telephone}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">状态</label><div class="col-sm-10"><p class="form-control-static text-danger">{{wxUser.verify?\'申批\':\'未审批\'}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">前台地址</label><div class="col-sm-10"><p class="form-control-static"><a href="http://{{wxUser.appid}}.{{cfgClientUri}}" target="_blank">http://{{wxUser.appid}}.{{cfgClientUri}}</a></p></div></div><div class="form-group"><label class="col-sm-2 control-label">我的礼物地址</label><div class="col-sm-10"><p class="form-control-static"><a href="http://{{wxUser.appid}}.{{cfgClientUri}}/gift/my" target="_blank">http://{{wxUser.appid}}.{{cfgClientUri}}/order/list</a></p></div></div><div class="form-group"><div class="col-sm-10 col-sm-offset-2"><div class="row"><div class="col-xs-6 col-md-3" ng-repeat="file in merchant.files"><a href="" class="thumbnail"><img ng-src="http://p1.ifindu.cn/crop/w_180/h_170{{file}}"></a></div></div></div></div></form>'),e.put("app/merchant/merchant.html",'<div class="panel panel-default"><div class="panel-body text-right"><div style="margin-right:25px"><a ui-sref="merchant" class="btn btn-primary btn-sm" ui-sref-opts="{reload:true}" ng-if="merchant.id">查看</a> <a ui-sref="merchant.post" class="btn btn-primary btn-sm" ng-if="!merchant.id">申请</a> <a ui-sref="merchant.edit" class="btn btn-primary btn-sm" ng-if="merchant.id">编辑</a> <a ui-sref="merchant.upload" class="btn btn-primary btn-sm" ng-if="!isVerify&&merchant.id">上传资质文件</a></div></div><div ui-view=""><div ng-include="\'app/merchant/info.html\'"></div></div></div>'),e.put("app/merchant/upload.html",'<div class="row" nv-file-drop="" uploader="uploader"><div class="col-md-3"><h4>建议图片尺寸640px*300px</h4><p><button class="btn btn-primary" ng-click="select()">选择图片</button> <input name="cover" type="file" multiple="multiple" ng-hide="true" nv-file-select="" uploader="uploader"></p><div ng-show="uploader.isHTML5"><div class="well my-drop-zone" nv-file-over="" uploader="uploader">或拖拽图片到这里</div></div></div><div class="col-md-9" style="margin-bottom: 40px"><p>上传图片数: {{ uploader.queue.length }}</p><table class="table"><thead><tr><th width="50%">名称</th><th ng-show="uploader.isHTML5">大小</th><th ng-show="uploader.isHTML5">进度</th><th>状态</th><th>动作</th></tr></thead><tbody><tr ng-repeat="item in uploader.queue"><td><strong>{{ item.file.name }}</strong><!-- Image preview --><!--auto height--><!--<div ng-thumb="{ file: item.file, width: 100 }"></div>--><!--auto width--><div ng-show="uploader.isHTML5" ng-thumb="{ file: item.file, height: 100 }"></div><!--fixed width and height --><!--<div ng-thumb="{ file: item.file, width: 100, height: 100 }"></div>--></td><td ng-show="uploader.isHTML5" nowrap="nowrap">{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show="uploader.isHTML5"><div class="progress" style="margin-bottom: 0"><div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div></div></td><td class="text-center"><span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span></td><td nowrap="nowrap"><button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess"><span class="glyphicon glyphicon-upload"></span> 上传</button> <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"><span class="glyphicon glyphicon-ban-circle"></span> 取消</button> <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()"><span class="glyphicon glyphicon-trash"></span> 移除</button></td></tr></tbody></table><div><p>队列进度:</p><div class="progress" style=""><div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div></div><p></p><button type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length"><span class="glyphicon glyphicon-upload"></span> 全部上传</button> <button type="button" class="btn btn-warning btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading"><span class="glyphicon glyphicon-ban-circle"></span> 全部取消</button> <button type="button" class="btn btn-danger btn-s" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length"><span class="glyphicon glyphicon-trash"></span> 全部删除</button></div></div></div>'),e.put("app/plans/plans.center.html",'<table class="ytop"><tr><td><div><div class="media-left media1"><a href="#"><img class="media-object" src="{{wxUser.head_img}}"></a></div><div class="media-body mylht"><p class="plsj">{{wxUser.nick_name}}</p><p class="pldd" ng-if="wxUser.status.charge === \'number\'">截止目前，你已使用订单量为{{wxUser.num.pay}}，剩余可使用订单量<span class="ts">{{numbers-wxUser.num.pay}}</span></p><p class="pldd" ng-if="wxUser.status.charge === \'number\'">{{wxUser.expire | date:\'yyyy年MM月dd日\'}}到期</p><p class="pldd" ng-if="wxUser.status.charge === \'time\'">包年包月{{wxUser.time.deadline | date:\'yyyy年MM月dd日\'}}到期</p><span ng-bind="numbers?\'\':\'暂无购买记录\'" ng-class="{\'text-danger\':po_ct_diff}">numbers</span></div></div></td></tr></table><div class="well well-sm well-plan"><div class="czzx"><span class="czzxp" ng-click="chooseCombo(\'order\')" ng-class="{active:pay.combo===\'order\'}">充值套餐</span><!--<span class="czzxp"\n      ng-click="chooseCombo(\'counselor\')"\n      ng-class="{active:pay.combo===\'counselor\'}">增值服务</span>--></div><form class="form-horizontal formh"><!--选充值套餐显示--><div class="form-group myfp" ng-if="pay.combo===\'order\'"><div class="mycolxs3" ng-repeat="plan in plans"><div class="panel panel-plan mypel" ng-class="{\'panel-danger\':selected === $index}" ng-click="selPlan()"><p class="ddsyl">{{plan.name}}</p><h3 class="h3">{{plan.price | currency}}</h3></div></div></div><!--选增值服务显示--><div class="zztc" ng-if="pay.combo===\'counselor\'"><img class="dgzxing1" ng-src="{{appConfig.uriImg+\'/home/ymyimg/dgzximg1.png\'}}"><div class="zzfwdiv"><p>{{plan.name}}&nbsp;&nbsp;&nbsp;{{plan.price | currency}}</p><img ng-src="{{appConfig.uriImg+\'/home/ymyimg/dgzximg2.png\'}}"></div></div><div class="form-group myfp"><ul class="zffsul"><li ng-click="choosePay(\'wepay\')" ng-class="{myname:pay.type===\'wepay\'}">微信支付</li><li ng-click="choosePay(\'alipay\')" ng-class="{myname:pay.type===\'alipay\'}">支付宝转账</li><li ng-click="choosePay(\'manpay\')" ng-class="{myname:pay.type===\'manpay\'}">对公付款</li><li style="width: 55%"></li></ul><!--微信付款--><div class="wxdiv myydiv" ng-if="pay.type === \'wepay\'"><img class="wxzfsm" ng-src="{{appConfig.uriImg+\'/home/ymyimg/wxsmzf.png\'}}"><div class="zongsty"><div class="wxdiv1"><span>实际付款：</span> <span class="bigzi">{{plan.price | currency}}</span></div><div ng-click="payModal()" class="wxqrzf"><a href="#">确认支付</a></div><a href="{{appConfig.uriImg}}/contract/91%E6%8B%BC%E5%9B%A2%E8%90%A5%E9%94%80%E9%A1%BE%E9%97%AE%E5%A2%9E%E9%95%BF%E6%9C%8D%E5%8A%A1%E5%8D%8F%E8%AE%AE.pdf" target="_blank" class="fwxy">《91送你服务协议》</a></div></div><!--支付宝--><div class="zfbdiv myydiv" ng-if="pay.type === \'alipay\'"><img class="zfbdivimg" ng-src="{{appConfig.uriImg+\'/serve/imgs/alipay_ico.png\'}}" style="width:120px"><ul class="zfbdivul"><li>支付宝账号昵称</li><li>账号</li></ul><ul class="zfbdivul1"><li>北京蜘蛛工社移动科技有限公司</li><li>zzgs1803@163.com</li></ul><ul><li class="dgp">支付宝转账完成后，请将以下两个信息：</li><li class="dgp1">开通公众号名称；</li><li class="dgp1">您的支付宝账号；</li><li class="dgp2">发送到91客服微信：yuanwei9008</li></ul></div><!--对公汇款--><div class="dgzffsdiv myydiv" ng-if="pay.type === \'manpay\'"><ul class="dgzffsdivul"><li>账户名</li><li>账号</li><li>开户行</li></ul><ul class="dgyhname"><li>北京蜘蛛工社移动科技有限公司</li><li>11001018800053011997</li><li>建行和平里支行</li></ul><ul><li class="dgp">完成汇款后，请将以下三个信息：</li><li class="dgp1">开通公众号名称；</li><li class="dgp1">个人姓名或公司名称；</li><li class="dgp1">银行回单截图或凭证照片；</li><li class="dgp2">发送到91客服微信：yuanwei9008</li></ul></div></div></form></div>'),e.put("app/plans/plans.html",'<div ui-view=""><a ui-sref="plans.center">套餐中心</a> <a ui-sref="plans.list">套餐列表</a> <a ui-sref="plans.service">服务套餐</a></div>'),e.put("app/plans/plans.qrcode.html",'<div class="modal-header"><button class="close" ng-click="cancel()"><span>&times;</span></button><h4 class="modal-title">&nbsp;</h4></div><div class="modal-body"><div class="thumbnail plan-thumbnail"><p class="saoma">使用微信支付</p><span class="saomaspan">{{plan.price | currency}}</span> <img src="{{qrcode}}"><div class="caption text-center blue"><p class="bluep">请使用微信扫一扫</p><p class="bluep">扫描二维码完成支付</p></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="cancel()">关闭</button> <button type="button" class="btn btn-primary" ng-click="finishPay()">完成支付</button></div>'),e.put("app/suborder/suborder.list.html",'<div><form class="form-horizontal order-warp order-warp1" name="forms.suborderForm" ng-submit="searchByCondition()" novalidate><div class="row order-head"><div class="col-xs-5 order-time"><div class="start col-xs-5"><div class="form-group" ng-class="{ \'has-error\' : forms.suborderForm.starttime.$invalid && submitted}"><div class="input-group pull-left"><input type="text" class="form-control" name="starttime" uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model="status.startTime" is-open="status.startTimePopup.opened" close-text="Close" placeholder="起始时间" alt-input-formats="altInputFormats"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openStarttimePopup()"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 font-span"><span>至</span></div><div class="col-xs-5 end"><div class="form-group" ng-class="{ \'has-error\' : forms.suborderForm.endtime.$invalid && submitted}"><div class="input-group pull-left"><input type="text" class="form-control" name="endtime" uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model="status.endTime" is-open="status.endTimePopup.opened" close-text="Close" placeholder="结束时间" alt-input-formats="altInputFormats"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openEndtimePopup()"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 btn-col1"><button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div></div><div class="col-xs-3"><input type="number" class="form-control form-number" ng-model="status.serial" placeholder="输入订单号"> <button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div><!--<div class="col-xs-3">\n          <input type="text" class="form-control form-number" ng-model="status.order" placeholder="输入订单号">\n          <button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub">搜索</button>\n      \t</div>--><div class="col-xs-1 form-pagi"><nosy-pagi pagi="pagi"></nosy-pagi></div><div class="col-xs-3 print"><button type="button" class="btn btn-primary btn-outline btn-sm" ng-click="exportSuborders()">导出当前页订单</button></div></div><div class="row print"><div class="col-xs-12"><button type="button" class="btn btn-primary btn-outline btn-sm btn-card" ng-click="exportCards()">批量下载语音码</button></div></div></form><!--订单筛选--><div class="from-group online online1"><div class="col-xs-6 left"><div class="btn-group btn-danger btn-group-sm"><label class="btn btn-primary" ng-model="status.shipping" uib-btn-radio="\'all\'">全部子订单<span ng-if="status.shipping === \'all\'">({{pagi.totalItems}})</span></label><label class="btn btn-primary" ng-model="status.shipping" uib-btn-radio="\'toshipping\'">待发货<span ng-if="status.shipping === \'toshipping\'">({{pagi.totalItems}})</span></label><label class="btn btn-primary" ng-model="status.shipping" uib-btn-radio="\'shipping\'">已发货<span ng-if="status.shipping === \'shipping\'">({{pagi.totalItems}})</span></label></div></div><div class="col-xs-6 right"><nosy-pagi pagi="pagi"></nosy-pagi></div></div><table class="table suborder"><thead><tr><th>子订单单号 (序列号)</th><th>订单号</th><th>收货人信息</th><th>商品</th><th>时间</th><th>发货管理</th><th>语音码</th></tr></thead><tbody><tr ng-repeat="suborder in suborders"><td>{{ suborder.id || suborder._id }}</td><td>{{ suborder.order.serial }}</td><td><span>{{ suborder.name || suborder.consignee }}</span><br><span>{{ suborder.telephone}}</span><br><span>{{ suborder.address }}</span><br></td><td>{{ suborder.order.gift.info.name }}</td><td><p>创建时间－{{ suborder.fillinDate | date: \'yyyy-MM-dd HH:mm:ss\' }}</p><p ng-if="suborder.status.shipping_date">发货时间－{{ suborder.status.shipping_date | date: \'yyyy-MM-dd HH:mm:ss\' }}</p><p ng-if="suborder.status.read_date">收货时间－{{ suborder.status.read_date | date: \'yyyy-MM-dd HH:mm:ss\' }}</p></td><td ng-if="!suborder.status.shipping"><input class="ship" type="button" ng-click="shippingModel(suborder)" value="发货"></td><td ng-if="suborder.status.shipping"><span class="ifship">已发货</span></td><td><input class="upload" type="button" ng-click="exportCard(suborder)" value="下载"></td></tr></tbody></table></div>'),
e.put("app/wechat/autoreply.html",'<form name="replyForm" ng-submit="post()" class="form-horizontal" novalidate><div class="form-group" ng-class="{\'has-success\': replyForm[\'gift.detail\'].$valid && submitted,\n                                      \'has-error\' : replyForm[\'gift.detail\'].$invalid && submitted }"><textarea type="text" name="add_friend_autoreply_info.content" class="form-control" placeholder="输入关注自动回复内容" ng-model="reply.content.add_friend_autoreply_info.content" required msd-elastic></textarea><p ng-show="replyForm[\'add_friend_autoreply_info.content\'].$error.required && submitted" class="help-block">自动回复内容必须填写.</p></div><div class="form-group" style="background-color:transparent"><div class="col-xs-3"><button type="submit" class="btn btn-primary btn-block" style="margin-left:-15px">保存</button></div></div></form>'),e.put("app/wechat/default.html","微信相关设置"),e.put("app/wechat/menu.html",'<div class="panel panel-default"><div class="panel-body text-right"><button class="btn btn-danger btn-sm" ng-click="saveMenu()">保存</button> <button class="btn btn-danger btn-sm" ng-click="setMenu()">设置</button></div><div class="row"><div class="col-xs-7"><textarea class="form-control" ng-model="menu" msd-elastic></textarea></div><div class="col-xs-5"><div class="thumbnail"><img holder="holder.js/100px380?text=菜单预览&bg=F3F2F2&fg=ffffff" class="img-responsive center-block"><div class="text-center"><div class="btn-group btn-group-justified dropup"><div class="btn-group" ng-repeat="menu in menus.button"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><a href="{{menu.type}}:{{menu.key || menu.url}}">{{menu.name}}</a> <span class="caret" ng-if="menu.sub_button"></span></button><ul class="dropdown-menu" ng-if="menu.sub_button"><li ng-repeat="submenu in menu.sub_button"><a href="{{submenu.type}}:{{submenu.key || submenu.url}}">{{submenu.name}}</a></li></ul></div></div></div></div></div></div></div>'),e.put("app/wechat/pay.html",'<div class="row bam-config"><form class="form-horizontal con-form" name="form" ng-submit="post(form)" novalidate><div class="row con-head con-head1"><div class="col-xs-12"><span>下载配置文档，按照配置文档完成以下配置</span> <a href="http://91pt.oss-cn-beijing.aliyuncs.com/contract/91%E9%80%81%E7%A4%BC%E6%94%AF%E4%BB%98%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B%E5%89%AF%E6%9C%AC.pdf" target="_blank" class="btn xzwdbtn">下载配置文档 <i class="fa fa-long-arrow-down"></i></a></div></div><div class="row con-body con-body1"><div class="col-xs-6"><!--商户号--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pay.mch_id\'].$valid && submitted,\n                                            \'has-error\' : form[\'pay.mch_id\'].$invalid && submitted }"><div class="col-xs-2"><label for="pay.mch_id" class="control-label config-name">商户号</label></div><div class="col-xs-10"><input id="from-cntrol1" type="text" class="form-control form-config" ng-model="pay.mch_id" name="pay.mch_id" placeholder="请输入微信支付分配的商户号" required><p ng-show="form[\'pay.mch_id\'].$error.required && submitted" class="help-block">商户号必须填写.</p></div></div><!--API密钥--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pay.key\'].$valid && submitted,\n                                            \'has-error\' : form[\'pay.key\'].$invalid && submitted }"><div class="col-xs-2"><label for="pay.key" class="control-label config-name">API密钥</label></div><div class="col-xs-10"><input id="from-cntrol2" type="text" class="form-control form-config" name="pay.key" ng-model="pay.key" placeholder="请输入API签名密钥" required><p ng-show="form[\'pay.key\'].$error.required && submitted" class="help-block">API签名密钥必须填写.</p></div></div><!--API证书--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pfx\'].$valid && submitted,\n                                            \'has-error\' : form[\'pfx\'].$invalid && submitted }"><div class="col-xs-2"><label for="pfx" class="control-label config-name">API证书</label></div><div class="col-xs-10 uploadFlie"><input id="from-cntrol3" type="file" class="form-control" name="pfx" required><p ng-show="form[\'pfx\'].$error.required && submitted" class="help-block">API证书必须填写.</p></div></div><!--支付授权目录--><div class="row config-font"><div class="col-xs-2 fcol">支付授权目录</div><div class="col-xs-10">{{ wxUser.pubdom }}/wepay/</div></div><!--JS接口安全域名--><div class="row config-font"><div class="col-xs-2 fcol">JS接口安全域名</div><div class="col-xs-10">{{ wxUser.pubdom }}</div></div><!--企业域名--><div class="row config-font"><div class="col-xs-2 fcol">企业域名</div><div class="col-xs-10">{{ wxUser.pubdom }}</div></div><!--微信公号模板消息--><div class="row config-font"><div class="col-xs-2 fcol">微信公号模板消息</div><div class="col-xs-10">确认微信公众号模板消息行业为IT/科技 电子商务<br><small class="small">如果不是,请修改</small></div></div><!--编辑按钮--><div class="row btn-foot btn-foot1"><div class="col-xs-4"><button type="submit" class="btn btn-primary btn-block">完成</button></div></div></div><div class="col-xs-6"></div></div></form></div><!--\n<form class="form-horizontal form-pay" name="form" ng-submit="post(form)" novalidate>\r\n  <div class="row form-group" ng-class="{ \'has-success\': form[\'pay.mch_id\'].$valid && submitted,\r\n                                      \'has-error\' : form[\'pay.mch_id\'].$invalid && submitted }">\r\n    <div class="col-xs-1">\r\n    \t<label for="pay.mch_id" class="control-label control-label1">商户号</label>\r\n    </div>\r\n    <div class="col-xs-10">\r\n      <input type="text" class="form-control" \r\n      \tng-model="pay.mch_id" \r\n      \tname="pay.mch_id" \r\n      \tplaceholder="请输入微信支付分配的商户号" required>\r\n      <p ng-show="form[\'pay.mch_id\'].$error.required && submitted" class="help-block">\r\n      \t商户号必须填写.\r\n      </p>\r\n    </div>\r\n  <div class="row form-group" ng-class="{ \'has-success\': form[\'pay.key\'].$valid && submitted,\r\n                                      \'has-error\' : form[\'pay.key\'].$invalid && submitted }">\r\n    <div class="col-xs-1">\r\n    \t<label for="pay.key" class="control-label">API密钥</label>\r\n    </div>\r\n    <div class="col-xs-10">\r\n      <input type="text" \r\n      \tclass="form-control" \r\n      \tname="pay.key" \r\n      \tng-model="pay.key" \r\n      \tplaceholder="请输入API签名密钥" required>\r\n      <span class="help-block" ng-if="!submitted"><span class="text-danger">安全考虑，设置后将不再显示！</span></span>\r\n      <p ng-show="form[\'pay.key\'].$error.required && submitted" class="help-block">\r\n      \tAPI签名密钥必须填写.\r\n      </p>\r\n    </div>\r\n  </div>\r\n  <div class="row form-group">\r\n  \t<div class="col-xs-1">\r\n  \t\t<label for="pay.file" class="control-label">API证书</label>\r\n  \t</div>\r\n  \t<div class="col-xs-10">\r\n        <input type="file" class="form-control" name="pfx"/>\r\n      <file-field class="btn btn-primary" ng-model="uploadFile">上传API证书</file-field>\r\n\t\t\t<span class="help-block"><span class="text-danger">下载包里的.p12文件</span></span>\r\n  \t</div>\r\n  </div>\n--><!--<div class="row wxuser">\r\n  \t<div class="row wx-head"><h5>详细微信支付设置请参考:</h5></div>\r\n  \t\r\n  \t<div class="row commonpt">\r\n  \t\t<div class="col-xs-2">微信支付 | 商户平台：</div>\r\n  \t\t<div class="col-xs-10"><a href="http://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=3_1" target="_blank">设置支付账户</a></div>\r\n  \t</div>\r\n  \t<div class="row common">\r\n  \t\t<div class="col-xs-2">公 众 号：</div>\r\n  \t\t<div class="col-xs-10">\r\n  \t\t\t<div class="col-xs-12"><a href="http://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_3" target="_blank">支付开发步骤</a></div>\r\n  \t\t\t<div class="col-xs-12">支付授权目录：{{wxUser.appid}}.{{clientUri}}/wepay/</div>\r\n  \t\t</div>\r\n  \t</div>\r\n  \t<div class="row common">\r\n  \t\t<div class="col-xs-2">公 共 号：</div>\r\n  \t\t<div class="col-xs-10">\r\n  \t\t\t<div class="col-xs-12"><a href="http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html#.E6.AD.A5.E9.AA.A4.E4.B8.80.EF.BC.9A.E7.BB.91.E5.AE.9A.E5.9F.9F.E5.90.8D" target="_blank">设置JS接口安全域名</a></div>\r\n  \t\t\t\t<div class="col-xs-12">域名： {{wxUser.appid}}.{{clientUri}}</div>\r\n  \t\t</div>\r\n  \t</div>\r\n  \t<div class="row common">\r\n  \t\t<div class="col-xs-2">公 共 号：</div>\r\n  \t\t<div class="col-xs-10">\r\n  \t\t\t<div class="col-xs-12"><a href="http://jingyan.baidu.com/article/20095761b8a15dcb0721b4dd.html" target="_blank">设置业务域名</a></div>\r\n  \t\t\t\t<div class="col-xs-12">域名：{{wxUser.appid}}.{{clientUri}}</div>\r\n  \t\t</div>\r\n  \t</div>\r\n</div> \t-->'),e.put("app/wechat/wechat.html",'<div ui-view="">微信管理</div>'),e.put("app/worker/worker.form.html",'<form class="form-horizontal" name="workerForm" ng-submit="post()" novalidate autocomplete="off"><div class="box"><header><div class="icons"><i class="fa fa-{{ico}}"></i></div><h5>{{title}}</h5><div class="toolbar"><button type="submit" class="btn btn-info btn-sm btn-rect"><i class="fa fa-check"></i> {{worker.id?\'更 新\':\'添 加\'}}</button> <a ui-sref="worker.list" class="btn btn-default btn-sm btn-rect"><i class="fa fa-reply"></i> 取 消</a></div></header><div class="body"><div class="form-group" ng-class="{ \'has-error\' : workerForm[\'telephone\'].$invalid && submitted}"><label for="telephone" class="col-sm-2 hidden-xs control-label">手机号</label><div class="col-sm-10"><input type="phone" name="telephone" class="form-control" placeholder="请输入手机号" autocomplete="off" ng-model="worker.info.telephone" ng-disabled="getedCpc||worker.id" phone required mongoose-error><p ng-show="workerForm.telephone.$error.phone && submitted" class="help-block">手机号不符合规则.</p><p ng-show="workerForm.telephone.$error.required && submitted" class="help-block">请填写手机号.</p><p ng-show="workerForm[\'telephone\'].$error.mongoose" class="help-block">{{ errors[\'type\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-error\' : workerForm[\'captcha\'].$invalid && submitted}" ng-if="!worker.id"><label for="captcha" class="col-sm-2 hidden-xs control-label">验证码</label><div class="col-sm-10"><div class="input-group"><input type="number" name="captcha" class="form-control" placeholder="请输入手机短信发来的验证码" ng-model="worker.info.captcha" ng-minlength="6" ng-maxlength="6" required mongoose-error> <span class="input-group-btn"><button class="btn btn-default" type="button" ng-click="getVerificationCode(workerForm)" ng-disabled="Countdown" ng-bind="getCpcTxt"></button></span></div><p ng-show="workerForm.captcha.$error.required && submitted" class="help-block">验证码是6位数字.</p><p ng-show="workerForm[\'captcha\'].$error.mongoose" class="help-block">{{ errors[\'type\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-error\' : workerForm[\'name\'].$invalid && submitted}"><label for="name" class="col-sm-2 hidden-xs control-label">名字</label><div class="col-sm-10"><input type="text" name="name" class="form-control" placeholder="请输入名字" ng-model="worker.info.name" required mongoose-error><p ng-show="workerForm[\'name\'].$error.required && submitted" class="help-block">名字必须填写.</p><p class="help-block" ng-show="workerForm[\'name\'].$error.mongoose">{{ errors[\'title\'] }}</p></div></div><div class="form-group" ng-class="{ \'has-error\' : workerForm[\'password\'].$invalid && submitted}"><label for="password" class="col-sm-2 hidden-xs control-label">密码</label><div class="col-sm-10"><input type="text" name="password" class="form-control" placeholder="请输入密码" autocomplete="false" ng-model="worker.info.password" ng-required="!worker.id" mongoose-error><p ng-show="workerForm[\'password\'].$error.required && submitted" class="help-block">密码必须填写.</p><p class="help-block" ng-show="workerForm[\'password\'].$error.mongoose">{{ errors[\'worker\'] }}</p></div></div></div></div></form>'),e.put("app/worker/worker.html",'<div ui-view=""><ul><li>管理团队<ul><li><a ui-sref="worker.list">成员列表</a></li><li><a ui-sref="worker.add">添加成员</a></li></ul></li><ul></ul></ul></div>'),e.put("app/worker/worker.list.html",'<div class="input-group"><span class="input-group-addon">员工登录地址:</span> <input type="text" class="form-control" value="http://wx.songni.cc/worker/login" readonly="true"> <span class="input-group-btn"><a href="" class="btn btn-default" clip-copy="getTextToCopy()" clip-click="doSomething()" ng-bind="copyText"></a></span></div><div class="box"><header><div class="icons"><i class="fa fa-{{ico}}"></i></div><h5>{{title}}<small>[{{pagi.totalItems}}]</small></h5><div class="toolbar"><a ui-sref="worker.add" class="btn btn-primary btn-sm btn-rect"><i class="fa fa-user-plus"></i></a><div class="btn-group"><label class="btn btn-success btn-sm" ng-model="pagi.lock" uib-btn-radio="\'\'">全部</label><label class="btn btn-success btn-sm" ng-model="pagi.lock" uib-btn-radio="true">锁定</label><label class="btn btn-success btn-sm" ng-model="pagi.lock" uib-btn-radio="false">开放</label></div></div></header><div class="body"><table class="table table-striped"><thead><tr><th>姓名</th><th>电话</th><th>登录次数</th><th>时间</th><th>登录地点</th><th>操作</th></tr></thead><tbody><tr ng-repeat="worker in workers"><td>{{worker.info.name}}</td><td>{{worker.info.telephone}}</td><td>{{worker.num.login}}</td><td>创建:{{worker.time.created | amDateFormat:\'YYYY.MM.DD HH:mm:ss\'}}<br>登录:{{worker.time.login | amDateFormat:\'YYYY.MM.DD HH:mm:ss\'}}<br>锁定:{{worker.time.lock | amDateFormat:\'YYYY.MM.DD HH:mm:ss\'}}<br>解锁:{{worker.time.open | amDateFormat:\'YYYY.MM.DD HH:mm:ss\'}}<br></td><td>{{worker.info.ip}}</td><td><a ui-sref="worker.edit({id:worker.id})" class="btn btn-warning btn-sm btn-rect">编辑</a> <button class="btn btn-sm btn-rect" ng-click="lock()" ng-bind="worker.status.lock?\'解锁\':\'锁定\'" ng-class="{\n                \'btn-metis-1\':!worker.status.lock,\n                \'btn-metis-5\':worker.status.lock}"></button></td></tr></tbody></table><uib-pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination></div></div>'),e.put("components/modal/modal.html",'<div class="modal-header"><button ng-if="modal.dismissable" type="button" ng-click="$dismiss()" class="close">&times;</button><h4 ng-if="modal.title" ng-bind="modal.title" class="modal-title"></h4></div><div class="modal-body"><p ng-if="modal.text" ng-bind="modal.text"></p><div ng-if="modal.html" ng-bind-html="modal.html"></div></div><div class="modal-footer"><button ng-repeat="button in modal.buttons" ng-class="button.classes" ng-click="button.click($event)" ng-bind="button.text" class="btn"></button></div>'),e.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller="NavbarCtrl"><div class="container"><div class="navbar-header"><button class="navbar-toggle" type="button" ng-click="isCollapsed = !isCollapsed"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a href="/" class="navbar-brand">serve</a></div><div collapse="isCollapsed" class="navbar-collapse collapse" id="navbar-main"><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href="{{item.link}}">{{item.title}}</a></li></ul></div></div></div>')}]);