"use strict";function getUrlVars(){for(var a,b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b}var req=new XMLHttpRequest;req.open("GET","/api/configs",!1),req.send(null);var config=JSON.parse(req.responseText),apiUrl=config.uri,token="",auth_code=getUrlVars().auth_code;auth_code&&(req.open("GET",config.uri+"/wechat/component/auth?auth_code="+auth_code,!1),req.setRequestHeader("X-API-From",config.from),req.setRequestHeader("X-Component",config.component),req.send(null),token=JSON.parse(req.responseText).token);var hostname=window.location.hostname.split("."),env=hostname[0];angular.module("serveApp",["serveApp.constants","ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","restangular","ncy-angular-breadcrumb","angularMoment","ui.tinymce","angularFileUpload","monospaced.qrcode","ngClipboard","ngCsv","bootstrap.fileField","ngHolder","monospaced.elastic"]).config(["appConfig","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$logProvider","RestangularProvider","$breadcrumbProvider",function(a,b,c,d,e,f,g,h){c.otherwise("/"),d.html5Mode(!0),e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"],f.debugEnabled("enable"),g.setBaseUrl(config.uri),tinyMCE.baseURL="/bower_components/tinymce-dist"}]).run(["appConfig","$rootScope","$location","$cookieStore","$log","$state","$window","Restangular","RestWecom","Alert","$uibModal",function(a,b,c,d,e,f,g,h,i,j,k){b.appConfig=_.assign(a,config),b.phtUri="https://photo.91pintuan.com",b.phtStl320160="@1e_1c_0o_0l_399sh_160h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=8&t=63&s=58&color=I2U2ZGVkZQ&p=9&y=5&x=5",b.phtStl320="@1e_1c_0o_0l_399sh_320h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=12&t=52&s=57&color=I2ZmZmZmZg&p=9&y=5&x=5",b.phtStl120="@1e_1c_0o_0l_100sh_120h_120w_90q.src",b.$on("$stateChangeError",console.log.bind(console)),b.env=hostname[0],h.setErrorInterceptor(function(a,b,c){401===a.status&&(d.remove("token"),h.setDefaultHeaders({"X-API-From":config.from}),h.setDefaultHeaders({"X-Component":config.component})),a.data&&a.data.errmsg?j.add("danger",a.data.errmsg):j.add("danger","系统错误")}),h.addResponseInterceptor(function(a,b,c,e,f,g){return 205===f.status&&(d.remove("token"),j.add("warning","刷新重新加载本地内容！"),location.reload()),a}),auth_code&&c.url(c.path());var l={"X-API-From":config.from,"X-Component":config.component};h.setDefaultHeaders(l),token&&d.put("token",token),d.get("token")&&(l.Authorization=d.get("token"),h.setDefaultHeaders(l),i.one("auth").one("info").get().then(function(a){return a.pay_config?f.go("bambu.contact"):(b.wxUser=a,void(b.isVerify=a.verify))})),b.$on("$stateChangeStart",function(a,b){b.authenticate&&!d.get("token")&&c.path("/login")}),b.$on("$stateChangeSuccess",function(a,c){document.body.scrollTop=document.documentElement.scrollTop=0,b.innerHeight=1300;var d=b.wxUser?b.wxUser.num:{};!_.includes(c.name,"plans")&&!_.includes(c.name,"bambu")&&d.pay>=d.plans&&k.open({templateUrl:"app/main/null.html",controller:"NullModalCtrl"})})}]),angular.module("serveApp").controller("AlbumCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("serveApp").config(["$stateProvider",function(a){a.state("album",{url:"/album",templateUrl:"app/album/album.html",controller:"AlbumCtrl"})}]),angular.module("serveApp").service("RestAlbum",["Restangular",function(a){return a.service("album")}]),function(a,b){a.module("serveApp.constants",[]).constant("appConfig",{uriImg:"https://img.91pintuan.com",uriPht:"https://photo.91pintuan.com",style:{phtStl320160:"@1e_1c_0o_0l_399sh_160h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=8&t=63&s=58&color=I2U2ZGVkZQ&p=9&y=5&x=5",phtStl320:"@1e_1c_0o_0l_399sh_320h_320w_100q.src|watermark=2&text=OTHmi7zlm6I&type=ZHJvaWRzYW5zZmFsbGJhY2s&size=12&t=52&s=57&color=I2ZmZmZmZg&p=9&y=5&x=5",phtStl120:"@1e_1c_0o_0l_100sh_120h_120w_90q.src"},component:"5726bf8700bbe21526c4ccbe",debug:!0,from:"merchant",tinymceOptions:{language:"zh_CN",baseURL:"https://img.91pintuan.com/bower_components/tinymce",language_url:"https://img.91pintuan.com/serve/tinymce.zh_CN.js",convert_urls:!1,menubar:!1,content_css:"https://img.91pintuan.com/serve/tinymce.css",plugins:["textcolor link image insertdatetime paste code emoticons preview autoresize"],toolbar_items_size:"small",toolbar:" bold italic underline | bullist numlist | forecolor backcolor | image emoticons insertdatetime | removeformat undo redo | code preview",statusbar:!1,resize:!0,width:541,autoresize_min_height:394,autoresize_max_height:1e3,insertdatetime_formats:["%Y年%m月%d号","%H点%M分"],object_resizing:!1,image_description:!1,image_dimensions:!1,image_class_list:[{title:"默认",value:"img-responsive"},{title:"圆角",value:"img-rounded"},{title:"圆形",value:"img-circle"},{title:"边框",value:"img-thumbnail"}],file_picker_types:"image"}})}(angular),angular.module("serveApp").controller("BambuCtrl",["$scope","$rootScope","Merchant",function(a,b,c){b.title="自助服务",c.get().then(function(b){a.merchant=b})}]).controller("BambuContactCtrl",["$scope","$rootScope","$state","$uibModal","Merchant",function(a,b,c,d,e){b.title="完善商家信息",a.aggrement="YES",a.submitted=!1,a.agmMdl=function(){d.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"agreement"}}})},a.master={},a.isUnchanged=function(b){return angular.equals(b,a.master)},a.post=function(b){return a.submitted=!0,a.master=angular.copy(a.merchant),"NO"===a.aggrement?!1:b.$invalid?!1:void(a.merchant.id?a.merchant.put().then(function(){c.go("bambu.config.pay")}):e.post("",a.merchant).then(function(){c.go("bambu.config.pay")}))}}]).controller("BambuServiceCtrl",["$scope","$rootScope","$uibModal","$state","Merchant",function(a,b,c,d,e){e.get().then(function(a){a&&a.id||d.go("bambu.contact")}),b.title="选择服务方式",a.bambu={service:"self"},a.svcArr={deploy:"客服配置服务",counselor:"客服顾问服务"},a.dltSltSvc=function(){a.bambu.service=""},a.start=function(){var b=a.bambu.service;"self"===b&&d.go("bambu.config.pay"),"deploy"===b&&d.go("plans.service",{type:b,from:"bambu"}),"counselor"===b&&d.go("plans.counselor")},a.howtoMdl=function(){c.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"merchantHelp"}}})}}]).controller("BambuConfigCtrl",["$scope","$rootScope","$state","$uibModal","Restangular",function(a,b,c,d,e){b.title="公众号配置",e.service("wechat/pay").one().get().then(function(b){a.pay=b}),a.submitted=!1,a.post=function(b){return a.submitted=!0,b.$invalid?!1:$("input[type=file]")[0].files[0]?void a.popup(function(){var b=new FormData;b.append("mch_id",a.pay.mch_id),b.append("key",a.pay.key),b.append("pfx",$("input[type=file]")[0].files[0]),a.pay.withHttpConfig({transformRequest:angular.identity}).customPOST(b,void 0,void 0,{"Content-Type":void 0}).then(function(){location.href="/"})}):void alert("请上传资质证书！")},a.popup=function(a){var b=d.open({templateUrl:"app/main/main.popup.html",controller:"MainCtrl",resolve:{type:function(){return"agreement"}}});b.result.then(a,a)},a.howtoMdl=function(){d.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"agreement"}}})}}]).controller("BambuCounselorCtrl",function(){}),angular.module("serveApp").config(["$stateProvider",function(a){a.state("bambu",{url:"/bambu",templateUrl:"app/bambu/bambu.html",controller:"BambuCtrl",authenticate:!0,ncyBreadcrumb:{label:"自助服务",ico:"stethoscope"}}).state("bambu.contact",{url:"/contact",templateUrl:"app/bambu/bambu.contact.html",controller:"BambuContactCtrl",authenticate:!0,ncyBreadcrumb:{label:"填写商家信息"}}).state("bambu.config",{url:"/config",templateUrl:"app/bambu/bambu.config.pay.html",controller:"BambuServiceCtrl",authenticate:!0,ncyBreadcrumb:{label:"选择服务方式"}}).state("bambu.config.pay",{url:"/pay",templateUrl:"app/bambu/bambu.config.pay.html",controller:"BambuConfigCtrl",authenticate:!0,ncyBreadcrumb:{label:"公众号配置"}}).state("bambu.counselor",{url:"/counselor",templateUrl:"app/bambu/bambu.counselor.html",controller:"BambuCounselorCtrl",authenticate:!0,ncyBreadcrumb:{label:"客服顾问服务"}})}]),angular.module("serveApp").config(["$stateProvider",function(a){a.state("breadcrumb",{url:"/breadcrumb",templateUrl:"app/breadcrumb/breadcrumb.html",controller:"BreadcrumbCtrl"})}]),angular.module("serveApp").controller("DocumentCtrl",["$scope",function(a){a.title="文档管理"}]).controller("DocumentModalCtrl",["$scope","$uibModalInstance","$sce","RestDoc","type",function(a,b,c,d,e){e=e||"doc",d.one(e).get().then(function(b){b.document=c.trustAsHtml(b.document),a.document=b}),a.cancel=function(){b.dismiss("cancel")}}]),angular.module("serveApp").config(["$stateProvider",function(a){a.state("document",{url:"/document",templateUrl:"app/document/document.html",controller:"DocumentCtrl"})}]),angular.module("serveApp").service("RestDoc",["Restangular",function(a){return a.service("document")}]),angular.module("serveApp").controller("GiftCtrl",["$scope","$rootScope",function(a,b){b.title="礼物管理"}]).controller("GiftPostCtrl",["$scope","$rootScope","$state","$stateParams","RestGift","RestAlbum","Alert","gift",function(a,b,c,d,e,f,g,h){b.title="发布礼物",d.id&&(a.gift=h),a.submitted=!1,a.config=config,a.tinymceOptions={language:"zh_CN",language_url:"/assets/i18n/tinymce.zh_CN.js",skin_url:"/bower_components/tinymce-dist/skins/lightgray",convert_urls:!1,menubar:!1,content_css:"/assets/css/tinymce.css",plugins:["textcolor link image insertdatetime paste code emoticons preview autoresize"],toolbar_items_size:"small",toolbar:" bold italic underline | bullist numlist | forecolor backcolor | image emoticons insertdatetime | removeformat undo redo | code preview",statusbar:!1,resize:!0,autoresize_min_height:250,autoresize_max_height:1e3,insertdatetime_formats:["%Y年%m月%d号","%H点%M分"],object_resizing:!1,image_description:!1,image_dimensions:!1,image_class_list:[{title:"默认",value:"img-responsive"},{title:"圆角",value:"img-rounded"},{title:"圆形",value:"img-circle"},{title:"边框",value:"img-thumbnail"}],file_picker_types:"image",file_picker_callback:function(a,b,c){"image"===c.filetype&&$("<input />").attr({type:"file",name:"file"}).trigger("click").change(function(){var b=new FormData,c=$(this)[0].files[0];b.append("file",c),a("上传中，请稍后...",{alt:"上传中"}),f.one("up").withHttpConfig({transformRequest:angular.identity}).customPOST(b,void 0,void 0,{"Content-Type":void 0}).then(function(b){b.link&&a(b.link,{alt:b.name})})})}},a.post=function(){if(a.submitted=!0,'<p><br data-mce-bogus="1"></p>'===a.gift.info.detail&&(a.gift.info.detail=""),a.giftForm.$invalid)return!1;var b=new FormData;b.append("name",a.gift.info.name),b.append("price",a.gift.info.price),b.append("stock",a.gift.num&&a.gift.num.stock?a.gift.num.stock:0),b.append("poetry",a.gift.info.poetry?a.gift.info.poetry:""),b.append("detail",a.gift.info.detail?a.gift.info.detail:""),b.append("lead",a.gift.info.lead?a.gift.info.lead:""),b.append("cover",a.uploadFile),d.id?a.gift.withHttpConfig({transformRequest:angular.identity}).customPUT(b,void 0,void 0,{"Content-Type":void 0}).then(function(b){g.add("success",b.message),a.submitted=!1,c.go("gift.detail.qrcode",{id:d.id})}):e.one().withHttpConfig({transformRequest:angular.identity}).customPOST(b,void 0,void 0,{"Content-Type":void 0}).then(function(b){console.log(b),g.add("success",b.message),a.submitted=!1,c.go("gift.detail.qrcode",{id:b.id})})}}]).controller("GiftListCtrl",["$scope","$rootScope","RestGift","Alert",function(a,b,c,d){b.title="礼物列表",b.ico="list-alt",a.giftorders=[],a.chgPerPage=function(){a.pagi.itemsPerPage=this.page},a.status={online:"",name:null},a.findByName=function(){a.pagi.name=a.status.name},a.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10,name:null},a.$watchCollection("[status.online,pagi.currentPage,pagi.itemsPerPage,pagi.name]",function(b){c.one("count").get({online:b[0],name:b[3]}).then(function(b){a.pagi.totalItems=b}),c.getList({online:b[0],page:b[1],limit:b[2],name:b[3]}).then(function(b){a.gifts=b})}),a.offShelf=function(){var a=confirm("确认下架吗？"),b=this.gift;return a===!1?!1:(b.status.online=!1,void b.one("offshelf").put().then(function(a){d.add("success",a.message)}))}}]).controller("GiftQrcodeCtrl",["$scope","$rootScope","$sce","gift","RestWechat",function(a,b,c,d,e){b.title="礼物链接二维码";var f="http://"+a.wxUser.appid+"."+config.clientUri+"/gift/"+d.id;"dev"===env&&(f="http://"+a.wxUser.appid+"."+env+"."+config.clientUri+"/gift/"+d.id),a.text=f,a.url=c.trustAsResourceUrl(f),a.getTextToCopy=function(){return a.text},a.doSomething=function(){alert("复制成功！")}}]).controller("GiftOrderCtrl",["$state","$scope","$rootScope","$log","$uibModal","RestOrderGift","RestExp","Alert",function(a,b,c,d,e,f,g,h){c.title="订单管理",c.ico="list-alt",b.giftorders=[],b.forms={},b.itemsPerPageArr=[10,20,50,100,200],b.chgPerPage=function(a){b.pagi.itemsPerPage=a},b.clientUri=config.clientUri,b.status={shipping:"",pay:!0,checked:!1,startTime:null,endTime:null,startTimePopup:{opened:!1},endTimePopup:{opened:!1},order:"",serial:""},b.altInputFormats=["M!/d!/yyyy"],b.openStarttimePopup=function(){b.status.startTimePopup.opened=!0},b.openEndtimePopup=function(){b.status.endTimePopup.opened=!0},b.searchByCondition=function(){return b.forms.orderForm.$invalid?(b.submitted=!0,!1):b.status.startTime&&!b.status.endTime?void h.add("danger","请填写结束时间"):b.status.endTime&&!b.status.startTime?void h.add("danger","请填写起始时间"):b.status.endTime&&b.status.startTime&&!moment(b.status.startTime).isBefore(b.status.endTime)?void h.add("danger","起始时间必须小于结束时间"):(b.pagi.startTime=b.status.startTime,b.pagi.endTime=b.status.endTime,b.pagi.order=b.status.order,void(b.pagi.serial=b.status.serial))},b.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10},b.countShipping=function(a){var b=0;return a.receivers.forEach(function(a){a.status.shipping&&b++}),b},b.$watchCollection("[status.shipping,status.pay,pagi.currentPage,pagi.itemsPerPage,pagi.startTime,pagi.endTime,pagi.order,status.finish, pagi.serial]",function(a){b.giftorders=[],f.one("count").get({shipping:a[0],pay:a[1],startTime:a[4],endTime:a[5],order:a[6],finish:a[7],serial:a[8]}).then(function(a){b.pagi.totalItems=a}),f.getList({shipping:a[0],pay:a[1],page:a[2],limit:a[3],startTime:a[4],endTime:a[5],order:a[6],finish:a[7],serial:a[8]}).then(function(a){b.orders=a})}),b.qrcodeModel=function(){var a=this.order.id,b=this.order.sender.info.nickname,c=this.order.receiver.name;return e.open({templateUrl:"app/gift/gift.order.qrcode.html",controller:"GiftOrderQrcodeCtrl",size:"sm",resolve:{orderId:function(){return a},saveas:function(){return b+"送给"+c+"的声音二维码.png"}}}),!1},b.wxQrcodeModel=function(){var a=this.order.id;this.order.sender.info.nickname,this.order.receiver.name;return e.open({templateUrl:"app/gift/gift.order.wx.qrcode.html",controller:"GiftWxOrderQrcodeCtrl",size:"sm",resolve:{orderId:function(){return a}}}),!1},b.detailModel=function(){var a=this.order;return e.open({animation:!0,templateUrl:"app/gift/gift.order.detail.html",controller:"GiftOrderDetailCtrl",resolve:{order:function(){return a}}}),!1},b.shipping=function(){var a=confirm("确认发货吗？");return a===!1?!1:(this.order.status.shipping=!0,void f.one(this.order.id).one("shipping").put().then(function(a){h.add("success",a.message)}))},g.one("company").get().then(function(a){b.companies=a}),b.exportCard=function(){f.one("export").one("card").one(order.id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(a){var b=new Blob([a],{type:"image/png"});saveAs(b,order.serial+".png")})},b.exportOrders=function(){f.one("export").one("orders").withHttpConfig({responseType:"arraybuffer"}).get({shipping:b.status.shipping,pay:b.status.pay,page:b.pagi.currentPage,limit:b.pagi.itemsPerPage}).then(function(a){var b=new Blob([a],{type:"application/vnd.openxmlformats"});saveAs(b,"Orders.xlsx")})},b.exportCards=function(){f.one("export").one("cards").withHttpConfig({responseType:"arraybuffer"}).get({shipping:b.status.shipping,pay:b.status.pay,page:b.pagi.currentPage,limit:b.pagi.itemsPerPage,ext:"wx"}).then(function(a){var b=new Blob([a],{type:"application/octet-stream;charset=utf-8"});saveAs(b,"语音卡.zip")})}}]).controller("GiftOrderDetailCtrl",["$scope","$rootScope","$stateParams","$uibModal","order","RestOrderGift","Alert","$log",function(a,b,c,d,e,f,g,h){b.title="订单详情",a.order=e,a.order.shipping=0,e.receivers.forEach(function(b){b.status.shipping&&a.order.shipping++}),a.config=config,a.order.url="http://"+b.wxUser.appid+"."+config.clientUri+"/gift/listen/"+e.id,a.shippingAll=function(){var a=this.order;f.one(a.id).put().then(function(a){g.add("success",a.message)},function(a){g.add("error","设置失败！"),h.error("RestOrderGift",a)})},a.shippingModel=function(b){var c=d.open({animation:!0,templateUrl:"app/gift/gift.order.shipping.html",controller:"GiftOrderShippingCtrl",resolve:{order:function(){return e},companies:function(){return a.companies},receiver:function(){return b}}});return c.result.then(function(a){b.status.shipping=a},function(){h.info("在: "+new Date+"解散模")}),!1},a.exportCard=function(){var a=this.order;f.one("export").one("card").one(a.id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(b){var c=new Blob([b],{type:"image/png"});saveAs(c,a.serial+".png")})}}]).controller("GiftOrderQrcodeCtrl",["$scope","$rootScope","$uibModalInstance","orderId","saveas",function(a,b,c,d,e){a.url="http://"+b.wxUser.appid+"."+config.clientUri+"/gift/listen/"+d,a.saveas=e,a.cancel=function(){c.dismiss("cancel")}}]).controller("GiftWxOrderQrcodeCtrl",["$scope","$rootScope","$uibModalInstance","RestGift","orderId",function(a,b,c,d,e){d.one("wx_qrcode").one(e).get().then(function(b){a.qrcode_ticket=b}),a.cancel=function(){c.dismiss("cancel")}}]).controller("GiftOrderShippingCtrl",["$scope","$uibModalInstance","Alert","RestOrderGift","order","companies","$log","receiver",function(a,b,c,d,e,f,g,h){a.express={companies:f},a.order=e,a.cancel=function(){b.dismiss("cancel")},a.shipping=function(){return h?void d.one(e.id).one(h.id).customPUT({express:{no:a.exp.no,company:{id:a.exp.company.id,name:a.exp.company.name}}}).then(function(a){c.add("success",a.message),b.close(!0)},function(a){c.add("error","设置失败！"),g.error("RestOrderGift",a)}):c.add("warn","一键发货，暂不支持")}}]),angular.module("serveApp").config(["$stateProvider",function(a){a.state("gift",{"abstract":!0,url:"/gift",templateUrl:"app/gift/gift.html",authenticate:!0,ncyBreadcrumb:{label:"送你"}}).state("gift.post",{url:"/post",templateUrl:"app/gift/gift.post.html",controller:"GiftPostCtrl",authenticate:!0,resolve:{gift:function(){return{}}},ncyBreadcrumb:{label:"发布礼物"}}).state("gift.list",{url:"/list",templateUrl:"app/gift/gift.list.html",controller:"GiftListCtrl",authenticate:!0,ncyBreadcrumb:{label:"礼物列表"}}).state("gift.order",{url:"/order",templateUrl:"app/gift/gift.order.html",controller:"GiftOrderCtrl",authenticate:!0,ncyBreadcrumb:{label:"订单列表"}}).state("gift.order.detail",{url:"/:id",templateUrl:"app/gift/gift.order.detail.html",controller:"GiftOrderDetailCtrl",authenticate:!0,ncyBreadcrumb:{label:"订单状态"},resolve:{order:["$stateParams","RestOrderGift",function(a,b){return b.one(a.id).get()}]}}).state("gift.detail",{"abstract":!0,url:"/:id",template:"<ui-view/>",resolve:{gift:["Restangular","$stateParams",function(a,b){return a.one("gift",b.id).get()}]},authenticate:!0,ncyBreadcrumb:{label:"送你详情"}}).state("gift.detail.edit",{url:"/edit",templateUrl:"app/gift/gift.post.html",controller:"GiftPostCtrl",authenticate:!0,ncyBreadcrumb:{label:"编辑礼物"}}).state("gift.detail.qrcode",{url:"/qrcode",templateUrl:"app/gift/gift.qrcode.html",controller:"GiftQrcodeCtrl",authenticate:!0,ncyBreadcrumb:{label:"送你链接二维码"}})}]),angular.module("serveApp").service("RestGift",["Restangular",function(a){return a.service("gift")}]).service("RestOrderGift",["Restangular",function(a){return a.service("gift/order")}]).service("RestExp",["Restangular",function(a){return a.service("exp")}]),angular.module("serveApp").controller("LoginCtrl",["$scope","$rootScope","RestWecom",function(a,b,c){b.title="登录",a.wechat=function(){c.get().then(function(a){location.href=a.link})}}]).controller("LogoutCtrl",["$scope","$rootScope","$cookieStore","$state","$timeout",function(a,b,c,d,e){c.remove("token"),b.wxUser=void 0,e(function(){d.go("login")},1e3),b.isVerify=!1}]).controller("ExperienceCtrl",["$scope","$rootScope","RestWecom",function(a,b,c){b.title="发起授权页的体验URL",a.wechat=function(){c.get().then(function(a){location.href=a.link})}}]).controller("ExpCtrl",["$cookieStore","$stateParams","RestWechat",function(a,b,c){c.one("experience").get({uid:b.uid}).then(function(b){a.put("token",b.token),location.href="/"})}]),angular.module("serveApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginCtrl",ncyBreadcrumb:{label:"登陆"}}).state("logout",{url:"/logout",templateUrl:"app/login/logout.html",controller:"LogoutCtrl",ncyBreadcrumb:{label:"退出"}}).state("experience",{url:"/experience?token",templateUrl:"app/login/login.html",controller:"ExperienceCtrl",ncyBreadcrumb:{label:"体验"}}).state("exp",{url:"/exp?uid",templateUrl:"app/login/login.html",controller:"ExpCtrl",ncyBreadcrumb:{label:"测试"}})}]),angular.module("serveApp").controller("MainCtrl",["$scope","$stateParams","RestWecom","RestWechat",function(a,b,c,d){a.wechat=function(){c.get().then(function(a){location.href=a.link})},b.auth_code&&c.one("auth").get({auth_code:b.auth_code}).then(function(a){$cookieStore.put("token",a.token),$window.location.href=$location.path()}),a.wxUser&&d.one("qrcode").get({scene_id:1}).then(function(b){a.qrcode_ticket=b});var e=!1;a.$watch("wxUser",function(b,c){return b?e?!1:(e=!0,void d.one("qrcode").get({scene_id:1}).then(function(b){a.qrcode_ticket=b,e=!1})):!1},!0)}]).controller("NullModalCtrl",["$scope","$state","$uibModalInstance",function(a,b,c){a.cancel=function(){b.go("plans.center"),c.dismiss("cancel")}}]),angular.module("serveApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl",ncyBreadcrumb:{label:"首页"}})}]),angular.module("serveApp").controller("MerchantCtrl",["$scope","$rootScope","$state","Merchant",function(a,b,c,d){b.title="商家资料管理",d.get().then(function(b){return b.id?(a.merchant=b,void(a.cfgClientUri=config.clientUri)):void c.go("merchant.post")})}]).controller("MerchantPostCtrl",["$scope","$rootScope","$state","$modal","Merchant","Alert",function(a,b,c,d,e,f){b.title="提交商家资料",a.aggrement="YES",a.submitted=!1,a.agmMdl=function(){d.open({templateUrl:"app/document/document.html",controller:"DocMdlAgmCtrl"})},a.master={},a.isUnchanged=function(b){return angular.equals(b,a.master)},a.post=function(){return a.submitted=!0,a.master=angular.copy(a.merchant),"NO"===a.aggrement?!1:form.$invalid?!1:void(a.merchant.id?a.merchant.put().then(function(a){f.add("success",a.message),c.go("merchant")}):e.post("",a.merchant).then(function(a){f.add("success",a.message),c.go("merchant.upload")}))}}]).controller("MerchantUploadCtrl",["$scope","$rootScope","$http","$stateParams","FileUploader","$cookieStore",function(a,b,c,d,e,f){b.title="上传资质文件",a.select=function(){return $("input:file").trigger("click"),!1};var g=a.uploader=new e({headers:{Authorization:f.get("token"),"X-API-From":config.from,"X-Component":config.component},url:config.uri+"/merchant/upload"});g.filters.push({name:"imageFilter",fn:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}}),g.onWhenAddingFileFailed=function(a,b,c){console.info("onWhenAddingFileFailed",a,b,c)},g.onAfterAddingFile=function(a){console.info("onAfterAddingFile",a)},g.onAfterAddingAll=function(a){console.info("onAfterAddingAll",a)},g.onBeforeUploadItem=function(a){console.info("onBeforeUploadItem",a)},g.onProgressItem=function(a,b){console.info("onProgressItem",a,b)},g.onProgressAll=function(a){console.info("onProgressAll",a)},g.onSuccessItem=function(a,b,c,d){console.info("onSuccessItem",a,b,c,d)},g.onErrorItem=function(a,b,c,d){console.info("onErrorItem",a,b,c,d)},g.onCancelItem=function(a,b,c,d){console.info("onCancelItem",a,b,c,d)},g.onCompleteItem=function(a,b,c,d){console.info("onCompleteItem",a,b,c,d)},g.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",g)}]),angular.module("serveApp").config(["$stateProvider",function(a){a.state("merchant",{url:"/merchant",templateUrl:"app/merchant/merchant.html",controller:"MerchantCtrl",ncyBreadcrumb:{label:"商家管理",ico:"bank"}}).state("merchant.post",{url:"/post",templateUrl:"app/merchant/form.html",controller:"MerchantPostCtrl",ncyBreadcrumb:{label:"申请"}}).state("merchant.edit",{url:"/edit",templateUrl:"app/merchant/form.html",controller:"MerchantPostCtrl",ncyBreadcrumb:{label:"编辑信息"}}).state("merchant.upload",{url:"/upload",templateUrl:"app/merchant/upload.html",controller:"MerchantUploadCtrl",ncyBreadcrumb:{label:"上传资质文件"}})}]),angular.module("serveApp").service("Merchant",["Restangular",function(a){return a.one("merchant")}]),angular.module("serveApp").directive("phone",function(){return{require:"ngModel",link:function(a,b,c,d){var e=/^1[34578][0-9][0-9]{8}$/;d.$parsers.unshift(function(a){return e.test(a)?(d.$setValidity("phone",!0),a):void d.$setValidity("phone",!1)})}}}),angular.module("serveApp").controller("PlansCtrl",["$scope","$rootScope","$interval","$uibModal","Alert","RestPlans",function(a,b,c,d,e,f){b.title="订购中心",a.pay={type:"wepay",combo:"order"},a.choosePay=function(b){a.pay.type=b},a.chooseCombo=function(b){a.pay.combo=b},a.$watch("pay.combo",function(b){"order"===b&&f.getList({limit:3}).then(function(b){a.plans=b,a.plan=b[0]}),"counselor"===b&&f.one("service").get({category:"counselor"}).then(function(b){a.plan=b})}),a.selected=0,a.selPlan=function(){a.plan=this.plan,a.pay.type="wepay",a.selected=this.$index},a.payModal=function(){return"wepay"===a.pay.type&&d.open({templateUrl:"app/plans/plans.qrcode.html",resolve:{plan:function(){return a.plan}},controller:"PlansPayModalCtrl"}),"alipay"===a.pay.type&&e.add("warning","支付宝支付开发中"),!1},f.one("numbers").get().then(function(b){a.numbers=b})}]).controller("PlansListCtrl",["$scope","RestPlansOrder",function(a,b){b.getList().then(function(b){a.planOrders=b})}]).controller("PlansServiceCtrl",["$scope","$rootScope","$stateParams","$uibModal","Alert","RestPlans",function(a,b,c,d,e,f){b.title="购买服务",a.pay={type:"wepay"},a.choosePay=function(b){a.pay.type=b},a.choosePay=function(b){a.pay.type=b},a.type=c.type,c.type&&f.one("service").get({category:c.type}).then(function(b){a.plan=b}),a.payModal=function(){return"wepay"===a.pay.type&&d.open({templateUrl:"app/plans/plans.qrcode.html",resolve:{plan:function(){return a.plan}},controller:"PlansPayModalCtrl"}),"alipay"===a.pay.type&&e.add("warning","支付宝支付开发中"),!1}}]).controller("PlansPayModalCtrl",["$scope","$rootScope","$state","$uibModalInstance","plan","RestPlans",function(a,b,c,d,e,f){a.plan=e,a.$watchCollection("[plan,wxUser]",function(b){if(!b[0])return!1;if(!b[1])return!1;var c={plan_id:b[0].id,pubno_id:b[1].appid};f.one("qrcode").get(c).then(function(b){a.qrcode=b})}),a.cancel=function(){d.dismiss("cancel")},a.finishPay=function(){c.reload(),d.close("finishPay")}}]).controller("PlansCounselorCtrl",["$scope","$state","$uibModal",function(a,b,c){a.aggrement="YES",a.openService=function(){b.go("plans.service",{type:"counselor",from:"bambu"})},a.counselorMdl=function(){c.open({templateUrl:"app/document/document.html",controller:"DocumentModalCtrl",resolve:{type:function(){return"counselor"}}})}}]),angular.module("serveApp").config(["$stateProvider",function(a){a.state("plans",{url:"/plans",templateUrl:"app/plans/plans.html","abstract":!0,authenticate:!0,ncyBreadcrumb:{label:"套餐"}}).state("plans.center",{url:"/center",templateUrl:"app/plans/plans.center.html",controller:"PlansCtrl",ncyBreadcrumb:{label:"充值中心"}}).state("plans.list",{url:"/list",templateUrl:"app/plans/plans.list.html",controller:"PlansListCtrl",ncyBreadcrumb:{label:"列表"}}).state("plans.service",{url:"/service?type&from",templateUrl:"app/plans/plans.service.html",controller:"PlansServiceCtrl",ncyBreadcrumb:{label:"购买服务"}}).state("plans.counselor",{url:"/counselor",templateUrl:"app/plans/plans.counselor.html",controller:"PlansCounselorCtrl",ncyBreadcrumb:{label:"顾问"}})}]),angular.module("serveApp").service("RestPlans",["Restangular",function(a){return a.service("plans")}]).service("RestPlansOrder",["Restangular",function(a){return a.service("plans/order")}]).service("RestPlansNumbers",["Restangular",function(a){return a.service("plans/numbers")}]),angular.module("serveApp").controller("SubOrderListCtrl",["$scope","$rootScope","$interval","$log","$uibModal","Alert","RestGift","RestExp","RestOrderGift","RestSuborder",function(a,b,c,d,e,f,g,h,i,j){b.title="发货管理",a.suborders=[],a.forms={},a.filter={delivery:"all"},a.clientUri=config.clientUri,a.status={startTime:null,endTime:null,startTimePopup:{opened:!1},endTimePopup:{opened:!1},pay:!0,order:"",serial:"",shipping:"all",refresh:!1},a.searchByCondition=function(){return a.forms.suborderForm.$invalid?(a.submitted=!0,!1):a.status.startTime&&!a.status.endTime?void f.add("danger","请填写结束时间"):a.status.endTime&&!a.status.startTime?void f.add("danger","请填写起始时间"):a.status.endTime&&a.status.startTime&&!moment(a.status.startTime).isBefore(a.status.endTime)?void f.add("danger","起始时间必须小于结束时间"):(a.pagi.startTime=a.status.startTime,a.pagi.endTime=a.status.endTime,a.pagi.order=a.status.order,void(a.pagi.serial=a.status.serial))},h.one("company").get().then(function(b){a.companies=b}),a.shippingModel=function(b){var c=b.order;b.id=b.id||b._id,c.id=c.id||c._id;var f=e.open({animation:!0,templateUrl:"app/gift/gift.order.shipping.html",controller:"GiftOrderShippingCtrl",resolve:{order:function(){return c},companies:function(){return a.companies},receiver:function(){return b}}});return f.result.then(function(b){a.status.refresh=!a.status.refresh},function(){d.info("在: "+new Date+"解散模")}),!1},a.exportCard=function(a){i.one("export").one("card").one(a.order._id).withHttpConfig({responseType:"arraybuffer"}).get({ext:"wx"}).then(function(b){var c=new Blob([b],{type:"image/png"});saveAs(c,a.order.serial+".png")})},a.exportSuborders=function(){j.one("export").one("orders").withHttpConfig({responseType:"arraybuffer"}).get({page:a.pagi.currentPage,limit:a.pagi.itemsPerPage,startTime:a.pagi.startTime,endTime:a.pagi.endTime,order:a.pagi.order,serial:a.pagi.serial,shipping:a.status.shipping,pay:a.status.pay}).then(function(a){console.warn(a);var b=new Blob([a],{type:"application/vnd.openxmlformats"});saveAs(b,"suborders."+(new Date).getTime()+".xlsx")})},a.$watchCollection("[pagi.currentPage,pagi.itemsPerPage,pagi.startTime,pagi.endTime,pagi.order,pagi.serial,status.shipping,status.pay,status.refresh]",function(b){a.suborders=[],g.one("suborder").get({page:b[0],limit:b[1],startTime:b[2],endTime:b[3],order:b[4],serial:b[5],shipping:b[6],pay:b[7]}).then(function(b){a.suborders=b.suborders,a.pagi.totalItems=b.count})}),a.pagi={totalItems:0,currentPage:1,maxSize:5,itemsPerPage:10},a.altInputFormats=["M!/d!/yyyy"],a.openStarttimePopup=function(){a.status.startTimePopup.opened=!0},a.openEndtimePopup=function(){a.status.endTimePopup.opened=!0}}]),angular.module("serveApp").config(["$stateProvider",function(a){a.state("suborder",{url:"/suborder",template:'<div ui-view=""></div>',"abstract":!0,authenticate:!0,ncyBreadcrumb:{label:"套餐"}}).state("suborder.list",{url:"/list",templateUrl:"app/suborder/suborder.list.html",controller:"SubOrderListCtrl",ncyBreadcrumb:{label:"列表"}})}]),angular.module("serveApp").service("RestSuborder",["Restangular",function(a){return a.service("gift/suborder")}]),angular.module("serveApp").controller("WechatCtrl",["$scope","$log",function(a,b){}]).controller("WechatProfileCtrl",function(){}).controller("WechatMenuCtrl",["$scope","$rootScope","RestWxMenu","Alert",function(a,b,c,d){
b.title="设置微信菜单",a.menu="{}",c.get().then(function(b){a.menu=JSON.stringify(b.content,null,"    "),a.menus=b.content}),a.saveMenu=function(){c.patch(a.menu).then(function(b){a.menu=JSON.stringify(b.menus,null,"    "),a.menus=b.menus,d.add("success",b.message)})},a.setMenu=function(){c.put().then(function(a){d.add("success",a.message)})}}]).controller("WechatPayCtrl",["$scope","$rootScope","$state","Restangular","Alert",function(a,b,c,d,e){b.title="设置微信支付选项",d.service("wechat/pay").one().get().then(function(b){a.pay=b}),a.submitted=!1,a.clientUri=config.clientUri,a.post=function(){if(a.submitted=!0,a.form.$invalid)return!1;var b=new FormData;b.append("mch_id",a.pay.mch_id),b.append("key",a.pay.key),b.append("pfx",a.uploadFile),a.pay.withHttpConfig({transformRequest:angular.identity}).customPOST(b,void 0,void 0,{"Content-Type":void 0}).then(function(b){e.add("success",b.message),a.pay.key="",a.submitted=!1})}}]).controller("WechatAutoreplyCtrl",["$scope","$rootScope","RestWxReply","Alert",function(a,b,c,d){b.title="关注回复",a.reply={},c.getList().then(function(b){a.reply=b[0]}),a.post=function(){a.reply.put().then(function(a){d.add("success",a.message)})}}]),angular.module("serveApp").config(["$stateProvider",function(a){a.state("wechat",{url:"/wechat","abstract":!0,templateUrl:"app/wechat/wechat.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"公号管理",ico:"wechat"}}).state("wechat.pay",{url:"/pay",templateUrl:"app/wechat/pay.html",controller:"WechatPayCtrl",ncyBreadcrumb:{label:"配置支付参数"}}).state("wechat.menu",{url:"/menu",templateUrl:"app/wechat/menu.html",controller:"WechatMenuCtrl",ncyBreadcrumb:{label:"设置菜单"}}).state("wechat.autoreply",{url:"/autoreply",templateUrl:"app/wechat/autoreply.html",controller:"WechatAutoreplyCtrl",ncyBreadcrumb:{label:"关注回复"}}).state("wechat.message",{url:"/message",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"消息管理"}}).state("wechat.user",{url:"/user",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"用户管理"}}).state("wechat.shop",{url:"/shop",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"小店管理"}}).state("wechat.service",{url:"/service",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"客服管理"}}).state("wechat.notice",{url:"/notice",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"业务通知"}}).state("wechat.coupon",{url:"/coupon",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"卡券管理"}}).state("wechat.material",{url:"/material",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"素材管理"}}).state("wechat.rock",{url:"/rock",templateUrl:"app/wechat/default.html",controller:"WechatCtrl",ncyBreadcrumb:{label:"摇一摇"}})}]),angular.module("serveApp").service("RestWechat",["Restangular",function(a){return a.service("wechat")}]).service("RestWecom",["Restangular",function(a){return a.one("wechat").one("component")}]).service("RestWxMenu",["RestWechat",function(a){return a.one("menu")}]).service("RestWxReply",["Restangular",function(a){return a.service("wechat/reply")}]),angular.module("serveApp").service("Alert",["$rootScope","$timeout",function(a,b){var c={};return a.alerts=[],c.add=function(d,e){a.alerts.push({type:d,msg:e,close:function(){c.closeAlert(this)}}),b(function(){c.closeAlert(this)},5e3)},c.closeAlert=function(b){c.closeAlertIdx(a.alerts.indexOf(b))},c.closeAlertIdx=function(b){a.alerts.splice(b,1)},c}]),angular.module("serveApp").directive("ngPrint",function(){function a(a,d,e){d.on("click",function(){var a=document.getElementById(e.printElementId);a&&b(a)}),window.onafterprint=function(){c.innerHTML=""}}function b(a){var b=a.cloneNode(!0);c.innerHTML="",c.appendChild(b),window.print()}var c=document.getElementById("printSection");return c||(c=document.createElement("div"),c.id="printSection",document.body.appendChild(c)),{link:a,restrict:"A"}}),angular.module("serveApp").directive("nosyPagi",function(){return{restrict:"E",transclude:!0,scope:{pagi:"=pagi",dropup:"@"},controller:["$scope",function(a){a.pages=[10,20,50,100,200,500,1e3],a.chgPage=function(){a.pagi.itemsPerPage=this.page,a.pagi.currentPage=1}}],template:'<uib-pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" max-size="pagi.maxSize" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination><div class="btn-group btn-group-sm pull-left pagi-per-page" ng-class="{\'dropup\':dropup}" uib-dropdown><button type="button" class="btn btn-metis-5 btn-line btn-sm" uib-dropdown-toggle>{{pagi.itemsPerPage}}条/页 <span class="caret"></span></button><ul class="dropdown-menu"><li ng-repeat="page in pages"><a href="#" ng-click="chgPage()">{{page}}条/页</a></li></ul></div>'}}),angular.module("serveApp").directive("validFile",function(){return{require:"ngModel",link:function(a,b,c,d){b.bind("change",function(){a.$apply(function(){d.$setViewValue(b.val()),d.$render()})})}}}),angular.module("serveApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("serveApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"设置支付",link:"wechat.pay"},{title:"充值中心",link:"plans.center"},{title:"退出",link:"logout"}],a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}]).controller("MenuCtrl",["$scope","$state",function(a,b){a.menus=[{title:"发布礼物",link:"gift.post"},{title:"商品管理",link:"gift.list"},{title:"订单查询",link:"gift.order"},{title:"发货管理",link:"suborder.list"}],a.isActive=function(a){return b.is(a)}}]),angular.module("serveApp").run(["$templateCache",function(a){a.put("app/album/album.html","<div class=col-md-12>This is the album view.</div>"),a.put("app/bambu/bambu.config.html",'<div ui-view=""><div class=row><dic class="col-xs-10 col-xs-offset-1"><div class=well><h3 class="well-h3 mywell-h3">完成系统配置，打通91拼团与微信服务号</h3><div class=djktdiv><img ng-src="{{appConfig.uriImg+\'/serve/imgs/gantanhao.png\'}}"> <span style="color: #898989">配置前请确保您的微信公众号为<span style="color: #459ae9">已认证微信服务号，并已开通微信支付</span></span> <a target=_blank style="color: #898989" href=http://kf.qq.com/faq/120911VrYVrA130805byM32u.html>如何开通?</a></div><ul class="bambu_step bambu_step1"><li>实现每笔交易额走商户自己的微支付账户，直接到账；</li><li>实现消费者完成支付后自动关注微信服务号，为商家积累粉丝；</li><li>消费者可在微信端实时跟进订单状态，查看火爆拼团，我的团等；</li><li>不与其他任何微信第三方应用冲突，配置完成后有10个免费试用订单；</li><li>我们的客服人员将电话联系您，如有问题91客服会为您解答；</li></ul><div><a ui-sref=bambu.config.pay class="btn mybnt">下一步</a></div></div></dic></div></div>'),a.put("app/bambu/bambu.config.pay.html",'<div ui-view=""><div class="row bam-config"><form class="form-horizontal con-form" name=form ng-submit=post(form) novalidate><div class="row con-head"><div class=col-xs-1></div><div class=col-xs-10><span>下载配置文档，按照配置文档完成以下配置</span> <a href=http://static.91pintuan.com/contract/91%E6%8B%BC%E5%9B%A2%E6%94%AF%E4%BB%98%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B.pdf target=_blank class="btn xzwdbtn">下载配置文档 <i class="fa fa-long-arrow-down"></i></a></div><div class=col-xs-1></div></div><div class="row con-body"><div class=col-xs-1></div><div class="col-xs-5 right"><!--商户号--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pay.mch_id\'].$valid && submitted,\r\n                                            \'has-error\' : form[\'pay.mch_id\'].$invalid && submitted }"><div class=col-xs-2><label for=pay.mch_id class="control-label config-name">商户号</label></div><div class=col-xs-10><input id=from-cntrol1 class="form-control form-config" ng-model=pay.mch_id name=pay.mch_id placeholder=请输入微信支付分配的商户号 required><p ng-show="form[\'pay.mch_id\'].$error.required && submitted" class=help-block>商户号必须填写.</p></div></div><!--API密钥--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pay.key\'].$valid && submitted,\r\n                                            \'has-error\' : form[\'pay.key\'].$invalid && submitted }"><div class=col-xs-2><label for=pay.key class="control-label config-name">API密钥</label></div><div class=col-xs-10><input id=from-cntrol2 class="form-control form-config" name=pay.key ng-model=pay.key placeholder=请输入API签名密钥 required><p ng-show="form[\'pay.key\'].$error.required && submitted" class=help-block>API签名密钥必须填写.</p></div></div><!--API证书--><div class="row form-group form-all" ng-class="{ \'has-success\': form[\'pfx\'].$valid && submitted,\r\n                                            \'has-error\' : form[\'pfx\'].$invalid && submitted }"><div class=col-xs-2><label for=pfx class="control-label config-name">API证书</label></div><div class="col-xs-10 uploadFlie"><input id=from-cntrol3 type=file class=form-control name=pfx required><p ng-show="form[\'pfx\'].$error.required && submitted" class=help-block>API证书必须填写.</p></div></div><!--支付授权目录--><div class="row config-font"><div class=col-xs-2>支付授权目录</div><div class=col-xs-10>{{ wxUser.pubdom }}/wepay/</div></div><!--JS接口安全域名--><div class="row config-font"><div class=col-xs-2>JS接口安全域名</div><div class=col-xs-10>{{ wxUser.pubdom }}</div></div><!--企业域名--><div class="row config-font"><div class=col-xs-2>企业域名</div><div class=col-xs-10>{{ wxUser.pubdom }}</div></div><!--微信公号模板消息--><div class="row config-font"><div class=col-xs-2>微信公号模板消息</div><div class=col-xs-10>确认微信公众号模板消息行业为IT/科技 电子商务<br><small class=small>如果不是,请修改</small></div></div><!--编辑按钮--><div class="row btn-foot"><div class=col-xs-3><div class=fanhui ui-sref=bambu.contact><a>返回</a></div></div><div class=col-xs-4><button id=mybtn1 type=submit class="btn btn-danger btn-block">保 存</button></div></div></div><div class=col-xs-5></div><div class=col-xs-1></div></div></form></div></div>'),a.put("app/bambu/bambu.contact.html",'<div class="row bamcont"><div class="col-xs-6 bambu-left"><form class="form-horizontal wssjxx" name=form ng-submit=post(form) novalidate><!--商家名称--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.name\'].$valid && submitted,\n	                                      \'has-error\' : form[\'info.name\'].$invalid && submitted }"><div class=col-xs-2><label for=info.name class="mw hidden-xs control-label label-name">商家名称</label></div><div class=col-xs-10><input name=info.name class="form-control input-lg test bambu-input" placeholder=输入商家名称 ng-model=merchant.info.name required mongoose-error><p ng-show="form[\'info.name\'].$error.required && form[\'info.name\'].$pristine && submitted" class=help-block>商家名称必须填写.</p><p class=help-block ng-show="form[\'info.name\'].$error.mongoose">{{ errors[\'info.name\'] }}</p></div></div><!--联系人--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.linkman\'].$valid && submitted,\n	                                      \'has-error\': form[\'info.linkman\'].$invalid && submitted }"><div class=col-xs-2><label for=info.linkman class="mw control-label label-name">联系人</label></div><div class=col-xs-10><input name=info.linkman class="form-control input-lg test bambu-input" placeholder=输入联系人姓名 ng-model=merchant.info.linkman required><p class=help-block ng-show="form[\'info.linkman\'].$error.required && submitted">姓名必须填写</p><p class=help-block ng-show="form[\'info.linkman\'].$error.mongoose">{{ errors[\'info.linkman\'] }}</p></div></div><!--联系电话--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.telephone\'].$valid && submitted,\n	                                      \'has-error\': form[\'info.telephone\'].$invalid && submitted }"><div class=col-xs-2><label for=info.telephone class="mw control-label label-name">联系电话</label></div><div class=col-xs-10><input name=info.telephone class="form-control input-lg test bambu-input" placeholder=输入联系人手机号 ng-model=merchant.info.telephone required phone><p class=help-block ng-show="form[\'info.telephone\'].$error.required && submitted">联系电话必须填写</p><p class=help-block ng-show="form[\'info.telephone\'].$error.phone">联系电话格式不正确</p><p class=help-block ng-show="form[\'info.telephone\'].$error.mongoose">{{ errors[\'info.telephone\'] }}</p></div></div><!--座机号--><div class="row form-group bambu-group" ng-class="{ \'has-success\': form[\'info.phone\'].$valid && submitted,\n	                                      \'has-error\': form[\'info.phone\'].$invalid && submitted }"><div class=col-xs-2><label class="mw control-label label-name">座机号</label></div><div class=col-xs-10><input name=info.phone class="form-control input-lg test bambu-input" placeholder=输入商家电话，方便消费者联系 ng-model="merchant.info.phone"><p class=help-block ng-show="form[\'info.phone\'].$error.mongoose">{{ errors[\'info.linkman\'] }}</p></div></div><!--地址--><div class=form-group ng-class="{ \'has-success\': form[\'info.address\'].$valid && submitted,\'has-error\' : form[\'info.address\'].$invalid && submitted}" ng-if=false><div class=col-xs-2><label for=info.address class="hidden-xs control-label label-name">地 址</label></div><div class=col-xs-10><input name=info.address class="form-control input-lg test bambu-input" placeholder=输入商家地址 ng-model=merchant.info.address required mongoose-error><p ng-show="form[\'info.address\'].$error.required && form[\'info.address\'].$pristine && submitted" class=help-block>商家地址必须填写.</p><p class=help-block ng-show="form[\'info.address\'].$error.mongoose">{{ errors[\'info.address\'] }}</p></div></div><!--协议--><!--<div class="form-group"\r\n		  		 ng-class="{ \'has-success\': aggrement === \'YES\' && submitted,\r\n	                                      \'has-error\': aggrement === \'NO\' && submitted }" >\r\n		    <div class="col-xs-2"></div>\r\n		    <div class="col-xs-10">\r\n		      <div class="checkbox">\r\n		        <label>\r\n		         <div class="checker">\r\n		           <span class="checked">\r\n		            <input class="uniform" name="aggrement" type="checkbox" \r\n		            	ng-model="aggrement" ng-true-value="\'YES\'" ng-false-value="\'NO\'">\r\n		           </span>\r\n		         </div><a class="mysyxy" href="" ng-click="agmMdl()">91拼团使用协议</a>\r\n		        </label>\r\n		      </div>\r\n		      <p class="help-block" ng-show="aggrement === \'NO\' && submitted">\r\n		      	请确认是否同意商户协议。\r\n		      </p>\r\n		    </div>\r\n		  </div>--><!--下一步--><div class="row bambu-btn"><div class=col-xs-2></div><div class=col-xs-5><button class="btn btn-danger btn-lg btn-block mynext" type=submit ng-disabled="form.$invalid || isUnchanged(merchant) || aggrement === \'NO\'">{{merchant.id?\'下一步\':\'下一步\'}}</button></div></div></form></div><div class=col-xs-6></div></div>'),a.put("app/bambu/bambu.html",'<div class="row bambu-grid" ng-if="!(\'bambu.config.pay\' | isState)"><div class=col-xs-6 ui-sref-active=active><a class=bambu-tab ui-sref=bambu.contact>填写商家信息</a></div><div class=col-xs-6 ui-sref-active=active><a class=bambu-tab ui-sref=bambu.config.pay>配置公众号</a></div></div><div ui-view=""></div>'),a.put("app/breadcrumb/breadcrumb.html",'<ol class=breadcrumb><li ng-repeat="step in steps" ng-class="{active: $last}" ng-switch="$last || !!step.abstract"><i class="fa fa-{{step.ncyBreadcrumb.ico}}"></i> <a ng-switch-when=false href={{step.ncyBreadcrumbLink}}>{{step.ncyBreadcrumbLabel}}</a> <span ng-switch-when=true>{{step.ncyBreadcrumbLabel}}</span></li></ol>'),a.put("app/document/document.html",'<div class=modal-header><button type=button class=close ng-click=cancel()>&times;</button><h4 class=modal-title>{{document.title}}</h4></div><div class=modal-body><div ng-bind-html=document.document></div></div><div class=modal-footer><button class="btn btn-default btn-sm" ng-click=cancel()>关闭</button></div>'),a.put("app/gift/gift.html",'<div ui-view=""><ul class=ng-scope><li><a ui-sref=gift.post ui-sref-opts="" class=ng-binding href=/gift/post><i class="fa fa-angle-right"></i>&nbsp;发布礼物</a></li><li><a ui-sref=gift.list ui-sref-opts="" class=ng-binding href=/gift/list><i class="fa fa-angle-right"></i>&nbsp;礼物管理</a></li><li><a ui-sref=gift.order ui-sref-opts="" class=ng-binding href=/gift/order><i class="fa fa-angle-right"></i>&nbsp;订单管理</a></li></ul></div>'),a.put("app/gift/gift.list.html",'<!--<div class="panel panel-default">\r\n  <div class="panel-body text-right">\r\n    <nosy-pagi pagi="pagi"></nosy-pagi>\r\n    <br>\r\n    <div class="btn-group btn-danger btn-group-sm">\r\n      <label class="btn" ng-model="status.online" uib-btn-radio="\'\'">全部</label>\r\n      <label class="btn" ng-model="status.online" uib-btn-radio="true">上架</label>\r\n      <label class="btn" ng-model="status.online" uib-btn-radio="false">下架</label>\r\n    </div>\r\n    <div>\r\n      <input type="text" ng-model="status.name" placeholder="按商品名查找"/><input ng-click="findByName()" type="button" value="提交">\r\n    </div>\r\n    <br/>\r\n  </div>\r\n<table class="table table-condensed" id="exportable">\r\n  <thead>\r\n    <tr>\r\n      <th width="42%">盒子名称</th>\r\n      <th>价格</th>\r\n      <th>发布时间</th>\r\n      <th>订单数</th>\r\n      <th>发货数</th>\r\n      <th>二维码</th>\r\n      <th>编辑</th>\r\n      <th>下架</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr ng-repeat = "gift in gifts">\r\n      <td class="word-break">{{gift.info.name}}</td>\r\n      <td style="background:#f7f7f7">{{gift.info.price | currency}}</td>\r\n      <td>{{gift.time.add | amCalendar}}</td>\r\n      <td style="background:#f7f7f7">{{gift.num.pay}}</td>\r\n      <td>{{gift.num.delivery}}</td>\r\n      <td style="background:#f7f7f7" align="center"><a class="btn btn-primary btn-xs" ui-sref="gift.detail.qrcode({id:gift.id})">二维码</a></td>\r\n      <td align="center">\r\n        <a class="btn btn-success btn-xs" ui-sref="gift.detail.edit({id:gift.id})">编辑</a>\r\n      </td>\r\n      <td style="background:#f7f7f7" align="center">\r\n        <button class="btn btn-warning btn-xs" ng-click="offShelf()" ng-if="gift.status.online === true">下架</button>\r\n        <span ng-if="gift.status.online === false">已下架</span>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n  <div class="panel-body text-right">\r\n    <pagination boundary-links="true" total-items="pagi.totalItems" ng-model="pagi.currentPage" items-per-page="pagi.itemsPerPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>\r\n  </div>\r\n</div>--><div class="panel panel-default"><div class=panel-body><div class="row panel-search"><div class=col-xs-7><div><input class=s-input ng-model=status.name placeholder="按找商品名查找"> <span ng-click=findByName() class=s-span><i class="fa fa-search"></i></span></div></div><div class="col-xs-4 select"><span>筛选：</span> <span>每页条数：</span></div><div class="col-xs-1 pagi-r"><nosy-pagi pagi=pagi></nosy-pagi></div></div><div class="row online"><div class="col-xs-6 left"><div class="btn-group btn-danger btn-group-sm"><label class=btn ng-model=status.online uib-btn-radio="\'\'">全部</label><label class=btn ng-model=status.online uib-btn-radio=true>上架</label><label class=btn ng-model=status.online uib-btn-radio=false>下架</label></div></div><div class="col-xs-6 right"><nosy-pagi pagi=pagi></nosy-pagi></div></div></div><table class="table table-condensed gift-list" id=exportable><thead><tr><th width=30%>商品名称</th><th width=15%>单价</th><th width=15%>发布时间</th><th width=15%>订单数</th><th width=15%>发货数</th><th></th><th>操作</th><th></th></tr></thead><tbody><tr ng-repeat="gift in gifts"><td class=word-break>{{gift.info.name}}</td><td>{{gift.info.price | currency}}</td><td>{{gift.time.add | date : \'yyyy.MM.dd hh:mm\'}}</td><td>{{gift.num.pay}}</td><td>{{gift.num.delivery}}</td><td align=center class=vcode><a class="btn btn-primary btn-xs" ui-sref=gift.detail.qrcode({id:gift.id})>二维码</a></td><td align=center class=compile><a class="btn btn-success btn-xs" ui-sref=gift.detail.edit({id:gift.id})>编辑</a></td><td align=center class=soldOut><button class="btn btn-warning btn-xs" ng-click=offShelf() ng-if="gift.status.online === true">下架</button> <span ng-if="gift.status.online === false">已下架</span></td></tr></tbody></table><div class="panel-body text-right"><pagination boundary-links=true total-items=pagi.totalItems ng-model=pagi.currentPage items-per-page=pagi.itemsPerPage class=pagination-sm previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo;></pagination></div></div>'),a.put("app/gift/gift.order.detail.html",'<div ui-view class="panel panel-default gift-order"><table class="table table-condensed"><thead><tr><th width=300>订单号：{{order.serial}}</th><th width=200>买方：{{order.sender.name}}</th><th class=text-right width=180>下单时间：{{order.time.add | date : \'yyyy.MM.dd hh:mm\'}}</th></tr></thead><tbody><tr><td><img style=width:130px;height:130px;float:left ng-src="{{order.gift.info.cover ? \'http://\' + config.imgUri + order.gift.info.cover:\'assets/images/26b8b388.present_sent_demo.png\'}}" alt=...><div style=padding:8px;padding-left:140px;font-size:14px;line-height:18px><div style=height:60px><a style=color:#a241f7;cursor:pointer>{{order.gift.info.name}}</a></div><div>礼物单价：￥ {{order.gift.info.price}}</div><div>购买数量： {{order.capacity}}</div><div>实付金额：￥ {{order.gift.info.price * order.capacity | currency}}</div></div></td><td><qrcode data={{order.url}} version=5 error-correction-level=M size=100 download=来自{{order.sender.name}}的礼物></qrcode><button ng-click=exportCard() class="btn btn-primary">下载语音码</button></td><td align=center><div style=margin-bottom:20px;font-size:16px><span>已发货 <strong style="font-size:20px;margin:0 10px">{{order.shipping}}</strong></span> <span style=color:#90c132>待发货 <strong style="font-size:20px;margin:0 10px">{{order.receivers.length - order.shipping}}</strong></span></div></td></tr></tbody></table><table class="table table-condensed"><thead><tr><th width=100>收货人姓名</th><th width=200>地址</th><th width=100>电话</th><th width=100>时间</th><th class=text-center width=90>交易状态</th><th class=text-center width=90>发货管理</th></tr></thead><tbody><tr ng-repeat="item in order.receivers"><td>{{item.consignee || item.name}}</td><td>{{item.address}}</td><td>{{item.telephone}}</td><td>{{item.fillinDate | date : \'yyyy.MM.dd hh:mm\'}}</td><td align=center>{{item.status.shipping?\'已发货\':\'待发货\'}}</td><td align=center><span ng-if=item.status.shipping>已发货</span> <button ng-if=!item.status.shipping ng-click=shippingModel(item) class="btn btn-primary btn-outline btn-xs">发货</button></td></tr></tbody></table></div>'),a.put("app/gift/gift.order.html",'<div ui-view class="panel panel-default gift-order"><div class=panel-body><!-- in v2, v1\'s toolbar is refactored --><!-- https://github.com/arrking/songni/issues/84 --><!-- <div class="btn-group btn-group-sm btn-danger" ng-if="env === \'dev\'">\n      <label class="btn" ng-model="status.pay" btn-radio="\'\'">全部(测试用)</label>\n      <label class="btn" ng-model="status.pay" btn-radio="true">已付</label>\n      <label class="btn" ng-model="status.pay" btn-radio="false">未付</label>\n    </div>\n\n    <div class="btn-group btn-group-sm btn-danger">\n      <label class="btn" ng-model="status.shipping" btn-radio="\'\'">全部</label>\n      <label class="btn" ng-model="status.shipping" btn-radio="true">已发货</label>\n      <label class="btn" ng-model="status.shipping" btn-radio="false">未发货</label>\n    </div>  --><!--button type="button" class="btn btn-primary btn-sm" ng-click="exportCards()" style="margin-left:10px;">下载声音卡</button--><form class="form-horizontal order-warp" name=forms.orderForm ng-submit=searchByCondition() novalidate><div class="row order-head"><div class="col-xs-5 order-time"><div class="start col-xs-5"><div class=form-group ng-class="{ \'has-error\' : forms.orderForm.starttime.$invalid && submitted}"><div class="input-group pull-left"><input class=form-control name=starttime uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model=status.startTime is-open=status.startTimePopup.opened close-text=Close placeholder=起始时间 alt-input-formats="altInputFormats"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=openStarttimePopup()><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 font-span"><span>至</span></div><div class="end col-xs-5"><div class=form-group ng-class="{ \'has-error\' : forms.orderForm.endtime.$invalid && submitted}"><!--<label for="endtime" class="control-label"> —— </label>--><div class="input-group pull-left"><input class=form-control name=endtime uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model=status.endTime is-open=status.endTimePopup.opened close-text=Close placeholder=结束时间 alt-input-formats="altInputFormats"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=openEndtimePopup()><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 btn-col1"><button type=submit class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div></div><!--序列号--><div class=col-xs-3><input type=number class="form-control form-number" ng-model=status.serial placeholder=按订单号查找> <button type=submit class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div><!--订单号--><!--<div class="col-xs-3">\n        	<div class="form-group">\n	          <input type="text" class="form-control form-number" ng-model="status.order" placeholder="输入订单号查找">\n	        	<button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub">搜索</button>\n		      </div>\n        </div> --><!--分页--><div class="col-xs-1 form-pagi"><nosy-pagi pagi=pagi></nosy-pagi></div><div class="col-xs-3 print"><button type=button class="btn btn-primary btn-outline btn-sm" ng-click=exportOrders()>导出订单</button></div></div><!--<div class="row print">\r\n      	<div class="col-xs-12">\r\n      		<button type="button" class="btn btn-primary btn-outline btn-sm" ng-click="exportCards()" >声音卡</button>\r\n        <button type="button" class="btn btn-primary btn-outline btn-sm" ng-click="exportOrders()">导出订单</button>\r\n      	</div>\r\n      </div>--></form><!--订单筛选--><div class="from-group online"><div class="col-xs-6 left left1"><div class="btn-group btn-danger btn-group-sm"><label class=btn ng-model=status.finish uib-btn-radio="">全部订单</label><label class=btn ng-model=status.finish uib-btn-radio=false>未完成</label><label class=btn ng-model=status.finish uib-btn-radio=true>已完成</label></div></div><div class="col-xs-6 right"><nosy-pagi pagi=pagi></nosy-pagi></div></div></div><table class="table table-condensed gift-orderlist" id=exportable><thead><tr><th width=15%>订单号</th><th width=10%>买家</th><th width=18%>所购商品</th><th width=12%>支付时间</th><th width=12%>实付金额</th><th width=10%>购买数量</th><th width=15%>子订单发货状态</th><th class=hidden-print width=20%>订单详情</th></tr></thead><tbody><tr ng-repeat="order in orders" ng-init="giftorders[$index]={\n          serial:\'[\'+order.serial+\']\',\n          time:(order.time.add | date : \'yyyy-MM-dd  hh:mm\'),\n          nickname:order.sender.info.nickname,\n          name:order.receiver.consignee,\n          address:order.receiver.address,\n          telephone:order.receiver.telephone,\n          gift:order.gift.info.name\n        };"><td><a ui-sref=gift.order.detail({id:order.id})>{{order.serial}}</a></td><td>{{order.sender.info.nickname}}</td><td><a ui-sref=gift.detail.qrcode({id:order.gift.id})>{{order.gift.info.name}}</a></td><td>{{order.time.add | date : \'yyyy.MM.dd hh:mm\'}}</td><td>￥ {{order.gift.info.price}}</td><td align=center>{{order.capacity}}</td><!--td style="background:#f7f7f7">\n                    <p class="hidden-print">{{order.receiver.address | limitTo:15}}{{order.receiver.address.length > 15 ? \'...\' : \'\'}}</p>\n                    <p class="visible-print-block">{{order.receiver.address}}</p>\n                </td--><td align=center><div>已发货 ({{countShipping(order)}})</div><div ng-if="order.receivers.length-countShipping(order) === 0">待发货 (0)</div><button ng-if="order.receivers.length-countShipping(order) != 0" ui-sref=gift.order.detail({id:order.id}) class="btn btn-primary btn-xs btn-dfh">待发货 ({{order.receivers.length-countShipping(order)}})</button></td><td ng-if=false class=hidden-print><span ng-class="{\'bg-danger\':order.status.pay}">{{order.status.pay?\'已付\':\'未付\'}}</span></td><!--td align="center" class="hidden-print">\n          <button class="btn btn-primary btn-xs" ng-click="exportCard()">下载</button>\n          <button class="btn btn-primary btn-xs" ng-click="wxQrcodeModel()" ng-if="env === \'dev\'">微信二维码</button>\n          <a href="http://{{wxUser.appid}}.{{clientUri}}/gift/listen/{{order.id}}" target="_blank" class="btn btn-primary btn-xs" ng-if="env === \'dev\'">试听</a>\n        </td--><td align=center class=hidden-print><!-- <div>{{order.status.pay?\'已付款\':\'待支付\'}}</div>--><!--see issue #133--><button class="btn btn-default btn-xs btn-xq" ui-sref=gift.order.detail({id:order.id})>详情</button><!--button class="btn btn-primary btn-xs" ng-click="shippingModel()" ng-if="!order.status.shipping">发货</button--></td></tr></tbody></table><div class="panel-body text-right"><pagination boundary-links=true total-items=pagi.totalItems ng-model=pagi.currentPage items-per-page=pagi.itemsPerPage class=pagination-sm previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo;></pagination></div></div>'),a.put("app/gift/gift.order.qrcode.html","<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>&times;</span></button><h3 class=modal-title>下载声音卡</h3></div><div class=modal-body><qrcode data={{url}} version=5 error-correction-level=M size=200 download={{saveas}}></qrcode></div><div class=modal-footer>点击二维码下载</div>"),a.put("app/gift/gift.order.shipping.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>&times;</span></button><h4 class=modal-title>{{order.status.shipping?\'修改快递单号\':\'发货确认\'}}</h4></div><div class=modal-body><form class=form-horizontal><div class=form-group><label class="col-xs-3 control-label">快递公司</label><div class=col-xs-8><select class=form-control ng-model=exp.company ng-options="com.name for com in express.companies"><option value="">请选择</option></select></div></div><div class=form-group><label class="col-xs-3 control-label">快递单号</label><div class=col-xs-8><input class=form-control ng-model=exp.no placeholder=请输入快递单号></div></div><div class="form-group has-warning"><p class="help-block text-center">填写完整的快递信息后,点击<kbd>发货</kbd>将会通过您的微信公众号给客户发送一条通知</p></div></form></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=cancel()>取消</button> <button type=button class="btn btn-primary" ng-click=shipping()>发货</button></div>'),a.put("app/gift/gift.order.wx.qrcode.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>&times;</span></button><h3 class=modal-title>下载声音卡</h3></div><div class=modal-body><img src="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket={{qrcode_ticket}}" style=width:200px></div><div class=modal-footer>点击二维码下载</div>'),a.put("app/gift/gift.post.html",'<p class=gift-post-title><i class="fa fa-gift"></i> <span>填写礼物详情</span></p><form name=giftForm ng-submit=post() class="form-horizontal form-post" novalidate><!--礼物标题--><div class="row form-group gift-title" ng-class="{ \'has-success\': giftForm[\'gift.name\'].$valid && submitted,\n                    \'has-error\' : giftForm[\'gift.name\'].$invalid && submitted }"><div class=col-xs-1><label for=gift.name class="control-label control-label-cust">礼物标题：</label></div><div class=col-xs-11><input name=gift.name ng-model=gift.info.name class=form-control ng-maxlength=500 required><p ng-show="giftForm[\'gift.name\'].$error.required && submitted" class=help-block>礼物标题必须填写.</p><p ng-show="giftForm[\'gift.name\'].$error.maxlength" class=help-block>最多15个字.</p></div></div><!--副标题--><div class="form-group row gift-title" ng-class="{ \'has-success\': giftForm[\'gift.lead\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.lead\'].$invalid && submitted }"><div class=col-xs-1><label for=gift.lead class="control-label label-f control-label-cust">副标题 ：</label></div><div class=col-xs-11><textarea name=gift.lead ng-model=gift.info.lead class=form-control rows=5 placeholder=更多礼物描述></textarea><p ng-show="giftForm[\'gift.lead\'].$error.required && submitted" class=help-block>礼物副标题必须填写.</p></div></div><!--礼物单价--><div class="form-group row gift-title" ng-class="{ \'has-success\': giftForm[\'gift.price\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.price\'].$invalid && submitted }"><div class=col-xs-1><label for=gift.price class="control-label control-label-cust">商品价格：</label></div><div class=col-xs-3><div class=input-group><span class=input-group-addon><i class="fa fa-rmb"></i></span> <input name=gift.price ng-model=gift.info.price class=form-control required></div><p ng-show="giftForm[\'gift.price\'].$error.required && submitted" class=help-block>礼物价格必须填写.</p></div></div><!--库存--><div class="form-group row gift-title" ng-class="{ \'has-success\': giftForm[\'gift.num.stock\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.num.stock\'].$invalid && submitted }"><div class=col-xs-1><label for=gift.num.stock class="control-label label-k control-label-cust">库存：</label></div><div class=col-xs-3><div class=input-group><input type=number ng-min=0 ng-max=9999999 name=gift.num.stock ng-model=gift.num.stock class=form-control placeholder=0> <span class=input-group-addon>件</span></div><p class=noteStock>库存数字默认为0，代表无库存限制</p><p ng-show="giftForm[\'gift.num.stock\'].$error.min && submitted" class=help-block>库存必须大于0</p><p ng-show="giftForm[\'gift.num.stock\'].$error.max && submitted" class=help-block>库存必须小于9999999</p></div></div><!--轮播图--><ng-form name=giftCoverForm><div class="form-group row gift-title" ng-class="{ \'has-success\': uploadFile && submitted,\n                                      \'has-error\' : !uploadFile && submitted }"><div class=col-xs-1><label for=gift.cover class="control-label label-f control-label-cust">轮播图：</label></div><div class=col-xs-3><div class="pull-left preview-image"><img ng-src={{previewImage}} ng-if=previewImage width=80px height=80px> <img ng-src="{{\'http://\' + config.imgUri + gift.info.cover}}" ng-if=gift.info.cover&&!previewImage width=80px height=80px> <img holder="holder.js/100px80?text=暂无封面&bg=b5b6b6&fg=ffffff" class="img-responsive center-block" ng-if="!gift.info.cover && !previewImage" width=80px height=80px></div><div class=upload-file><file-field class="btn btn-primary" ng-model=uploadFile preview=previewImage>选择图片</file-field></div><p class=lunjy>建议长宽比例1:1</p></div></div></ng-form><!--\n  <div class="form-group" ng-class="{ \'has-success\': giftForm[\'gift.poetry\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.poetry\'].$invalid && submitted }">\n    <label for="gift.poetry" class="col-xs-1 control-label">诗词</label>\n    <div class="col-xs-11">\n      <textarea name="gift.poetry" ng-model="gift.info.poetry" class="form-control" rows="3" placeholder="输入诗词"></textarea>\n      <p ng-show="giftForm[\'gift.poetry\'].$error.required && submitted" class="help-block">\n      礼物名称必须填写.\n      </p>\n    </div>\n  </div>\n  --><!--礼物详情--><div class="form-group row gift-title gift-details" ng-class="{\'has-success\': giftForm[\'gift.detail\'].$valid && submitted,\n                                      \'has-error\' : giftForm[\'gift.detail\'].$invalid && submitted }"><div class=col-xs-1><label for=gift.detail class="hidden-xs control-label control-label-cust">礼物详情：</label></div><div class=col-xs-11><textarea type=text name=gift.detail class=form-control placeholder=输入礼物详情 ng-model=gift.info.detail ui-tinymce=tinymceOptions required></textarea><p ng-show="giftForm[\'gift.detail\'].$error.required && submitted" class=help-block>礼物详情必须填写.</p></div></div><div class="form-group row gift-title" style=background-color:transparent><div class="col-xs-3 form-foot"><button type=submit class="btn btn-primary btn-block btn-ground">上架</button></div></div></form>'),
a.put("app/gift/gift.qrcode.html",'<form class=form-horizontal role=form><div class=form-group><label for=url class="col-xs-2 control-label">地址</label><div class=col-xs-10><div class=input-group><input name=url class=form-control ng-model=url> <span class=input-group-btn><button type=button clip-copy=getTextToCopy() clip-click=doSomething() class="btn btn-default">复制</button></span></div></div></div></form><div class=row><div class=col-xs-6><div class=text-center style=margin-top:50px><qrcode version=8 error-correction-level=H size=200 data={{text}}></qrcode></div></div><div class=col-xs-6><div class="panel panel-default"><div class=panel-heading>{{commodity.info.name}}</div><div class=panel-body style=padding:0><iframe ng-src={{url}} width=100% height=517px frameborder=no border=0 marginwidth=0 marginheight=0 scrolling=auto allowtransparency=yes></iframe></div></div></div></div>'),a.put("app/login/login.html",'<h1 class=text-center>欢迎使用送你微信公众号第三方平台</h1><div class=text-center><img src=assets/images/e31c3516.icon_button3_1.png ng-click="wechat()"></div>'),a.put("app/login/logout.html",'<div class=text-center><i class="fa fa-spinner fa-spin fa-5x"></i></div>'),a.put("app/main/main.home.html",'<!--logo图--><div class=home_head><div class=row><div class=col-xs-8><img src=assets/images/4ce3cc02.index-logo.png class=index-logo alt=""></div><div class=col-xs-4><button class="wechat btnsj" ng-click=wechat()>商家登录</button> <button class="wechat btnkt" ng-click=wechat()>注册开通</button></div></div></div><!--banner图--><div class=home_banner_1><div class="home_banner home_banner1"><div class="row cont-img"><div class="col-xs-4 hidden-xs"><img src=assets/images/07dcbf34.index-banner1.png class="img-responsive img-responsive1 center-block"></div><div class="col-xs-8 index-banner2"><img src=assets/images/09fe94aa.index-banner2.png class="img-responsive center-block"></div></div></div></div><!--送你功能--><div class=home_banner_2><div class=home_banner><img src=assets/images/b6f40ad8.gnbanner.png class="img-responsive center-block"></div></div><!--开通步骤--><div class=home_banner_3><div class=home_banner><img src=assets/images/29990941.bzbanner.png class="img-responsive center-block"></div></div><!--版权--><div class=home_banner_4><div class=home_banner><a href=# target=_blank><!--http://www.spiderfamily.com--><img src=assets/images/ccae6c41.footLogo.png class="img-responsive center-block"></a></div></div>'),a.put("app/main/main.html",'<div ng-if=!wxUser style="background: #FFFFFF" ng-include="\'app/main/main.home.html\'"></div><div ng-if=wxUser ng-include="\'app/main/main.signin.html\'"></div>'),a.put("app/main/main.popup.html",'<div class="modal-header popup-head"><button class=close ng-click=$dismiss()><span>&times;</span></button></div><div class="modal-body modal-popup"><h1 class=title>欢迎使用91送你服务</h1><p class=cont>您好，您已成功开通91送你服务！我们为新商家提供100个免费订单供体验使用。使用完成后可到充值中心进行订单充值，即可继续使用</p><button class=btn><a href=/plans/center>充值中心</a></button></div>'),a.put("app/main/main.signin.html",'<form class=form-horizontal><div class=form-group><label class="col-sm-2 control-label">授权公众号</label><div class=col-sm-10><p class=form-control-static>{{wxUser.nick_name}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">头像</label><div class=col-sm-10><p class=form-control-static><img class="media-object img-thumbnail user-img" alt="User Picture" src="{{ wxUser.head_img}}" style=width:64px></p></div></div><div class=form-group><label class="col-sm-2 control-label">服务类型</label><div class=col-sm-10><p class=form-control-static>{{wxUser.service_type_info}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">认证类型</label><div class=col-sm-10><p class=form-control-static>{{wxUser.verify_type_info}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">原始ID</label><div class=col-sm-10><p class=form-control-static>{{wxUser.user_name}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">微信号</label><div class=col-sm-10><p class=form-control-static>{{wxUser.alias}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">礼物列表</label><div class=col-sm-10><p class=form-control-static></p><p class=form-control-static>http://{{wxUser.appid + \'.\' + appConfig.clientUri}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">我的礼物</label><div class=col-sm-10><p class=form-control-static></p><p class=form-control-static>http://{{wxUser.appid + \'.\' + appConfig.clientUri}}/order/list</p></div></div><div class=form-group><label class="col-sm-2 control-label">二维码</label><div class=col-sm-10><p class=form-control-static><img src="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket={{qrcode_ticket}}" style=width:320px></p></div></div></form>'),a.put("app/main/null.html",'<div class=modal-header><button class=close ng-click=cancel()><span>&times;</span></button><h3 class="modal-title mytitle">&nbsp;</h3></div><div class="modal-body text-center"><h1 class="text-danger text-danger1">订单余额不足提醒</h1><p>商家您好,您当前的订单使用量不足,为不影响您的正常使用,<br>请尽快到<a ui-sref=plans.center class=myred>订购中心</a>购买!</p><div class=row><div class="col-xs-4 col-xs-offset-4 mybun mythree"><button class="btn btn-danger btn-lg btn-block mythreebtn" ng-click=cancel()>订购中心</button></div></div></div>'),a.put("app/merchant/form.html","<form class=form-horizontal name=form ng-submit=post(form) novalidate><div class=form-group ng-class=\"{ 'has-success': form['info.name'].$valid && submitted,\n                                      'has-error' : form['info.name'].$invalid && submitted }\"><label for=info.name class=\"col-sm-2 hidden-xs control-label\">商家名称</label><div class=col-sm-10><input name=info.name class=form-control placeholder=请输入商家名字 ng-model=merchant.info.name required mongoose-error><p ng-show=\"form['info.name'].$error.required && form['info.name'].$pristine && submitted\" class=help-block>商家名称必须填写.</p><p class=help-block ng-show=\"form['info.name'].$error.mongoose\">{{ errors['info.name'] }}</p></div></div><div class=form-group ng-class=\"{ 'has-success': form['info.address'].$valid && submitted,\n                                      'has-error' : form['info.address'].$invalid && submitted}\"><label for=info.address class=\"col-sm-2 hidden-xs control-label\">地 址</label><div class=col-sm-10><input name=info.address class=form-control placeholder=请输入商家地址 ng-model=merchant.info.address required mongoose-error><p ng-show=\"form['info.address'].$error.required && form['info.address'].$pristine && submitted\" class=help-block>商家地址必须填写.</p><p class=help-block ng-show=\"form['info.address'].$error.mongoose\">{{ errors['info.address'] }}</p></div></div><div class=form-group ng-class=\"{ 'has-success': form['info.detail'].$valid && submitted,\n                                      'has-error' : form['info.detail'].$invalid && submitted}\"><label for=info.detail class=\"col-sm-2 hidden-xs control-label\">商家介绍</label><div class=col-sm-10><textarea type=text name=info.detail class=form-control placeholder=请输入商家简介 ng-model=merchant.info.detail required mongoose-error></textarea><p ng-show=\"form['info.detail'].$error.required && form['info.detail'].$pristine && submitted\" class=help-block>商家介绍必须填写.</p><p class=help-block ng-show=\"form['info.detail'].$error.mongoose\">{{ errors['info.detail'] }}</p></div></div><div class=form-group ng-class=\"{ 'has-success': form['info.linkman'].$valid && submitted,\n                                      'has-error': form['info.linkman'].$invalid && submitted }\"><label for=info.linkman class=\"col-xs-2 control-label\">联系人</label><div class=col-xs-10><input name=info.linkman class=form-control placeholder=请输入联系人姓名 ng-model=merchant.info.linkman required><p class=help-block ng-show=\"form['info.linkman'].$error.required && submitted\">姓名必须填写</p><p class=help-block ng-show=\"form['info.linkman'].$error.mongoose\">{{ errors['info.linkman'] }}</p></div></div><div class=form-group ng-class=\"{ 'has-success': form['info.telephone'].$valid && submitted,\n                                      'has-error': form['info.telephone'].$invalid && submitted }\"><label for=info.telephone class=\"col-xs-2 control-label\">手机号</label><div class=col-xs-10><input name=info.telephone class=form-control placeholder=请输入联系人手机号 ng-model=merchant.info.telephone required phone><p class=help-block ng-show=\"form['info.telephone'].$error.required && submitted\">手机号必须填写</p><p class=help-block ng-show=\"form['info.telephone'].$error.phone\">手机号格式不正确</p><p class=help-block ng-show=\"form['info.telephone'].$error.mongoose\">{{ errors['info.telephone'] }}</p></div></div><div class=form-group ng-class=\"{ 'has-success': aggrement === 'YES' && submitted,\n                                      'has-error': aggrement === 'NO' && submitted }\" ng-if=!merchant.id><label for=aggrement class=\"control-label col-xs-2\">商户协议</label><div class=col-xs-8><div class=checkbox><label><div class=checker><span class=checked><input class=uniform name=aggrement type=checkbox ng-model=aggrement ng-true-value=\"'YES'\" ng-false-value=\"'NO'\"></span></div><a href=\"\" ng-click=agmMdl()>使用协议</a></label></div><p class=help-block ng-show=\"aggrement === 'NO' && submitted\">请确认是否同意商户协议。</p></div></div><div class=text-center><button class=\"btn btn-primary btn-login\" type=submit ng-disabled=\"form.$invalid || isUnchanged(merchant)\">{{merchant.id?'保存修改':'提交申请'}}</button></div></form>"),a.put("app/merchant/info.html",'<form class=form-horizontal role=form><div class=form-group ng-if=!isVerify><label class="col-sm-2 control-label">资质文件</label><div class=col-sm-10><p class=form-control-static><a ui-sref=merchant.upload class="btn btn-primary btn-sm">请上传资质文件</a></p></div></div><div class=form-group><label class="col-sm-2 control-label">名称</label><div class=col-sm-10><p class=form-control-static>{{merchant.info.name}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">地址</label><div class=col-sm-10><p class=form-control-static>{{merchant.info.address}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">介绍</label><div class=col-sm-10><p class=form-control-static>{{merchant.info.detail}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">联系人</label><div class=col-sm-10><p class=form-control-static>{{merchant.info.linkman}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">联系电话</label><div class=col-sm-10><p class=form-control-static>{{merchant.info.telephone}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">状态</label><div class=col-sm-10><p class="form-control-static text-danger">{{wxUser.verify?\'申批\':\'未审批\'}}</p></div></div><div class=form-group><label class="col-sm-2 control-label">前台地址</label><div class=col-sm-10><p class=form-control-static><a href=http://{{wxUser.appid}}.{{cfgClientUri}} target=_blank>http://{{wxUser.appid}}.{{cfgClientUri}}</a></p></div></div><div class=form-group><label class="col-sm-2 control-label">我的礼物地址</label><div class=col-sm-10><p class=form-control-static><a href=http://{{wxUser.appid}}.{{cfgClientUri}}/gift/my target=_blank>http://{{wxUser.appid}}.{{cfgClientUri}}/order/list</a></p></div></div><div class=form-group><div class="col-sm-10 col-sm-offset-2"><div class=row><div class="col-xs-6 col-md-3" ng-repeat="file in merchant.files"><a href="" class=thumbnail><img ng-src=http://p1.ifindu.cn/crop/w_180/h_170{{file}}></a></div></div></div></div></form>'),a.put("app/merchant/merchant.html",'<div class="panel panel-default"><div class="panel-body text-right"><div style=margin-right:25px><a ui-sref=merchant class="btn btn-primary btn-sm" ui-sref-opts={reload:true} ng-if=merchant.id>查看</a> <a ui-sref=merchant.post class="btn btn-primary btn-sm" ng-if=!merchant.id>申请</a> <a ui-sref=merchant.edit class="btn btn-primary btn-sm" ng-if=merchant.id>编辑</a> <a ui-sref=merchant.upload class="btn btn-primary btn-sm" ng-if=!isVerify&&merchant.id>上传资质文件</a></div></div><div ui-view=""><div ng-include="\'app/merchant/info.html\'"></div></div></div>'),a.put("app/merchant/upload.html",'<div class=row nv-file-drop="" uploader=uploader><div class=col-md-3><h4>建议图片尺寸640px*300px</h4><p><button class="btn btn-primary" ng-click=select()>选择图片</button> <input name=cover type=file multiple ng-hide=true nv-file-select="" uploader="uploader"></p><div ng-show=uploader.isHTML5><div class="well my-drop-zone" nv-file-over="" uploader=uploader>或拖拽图片到这里</div></div></div><div class=col-md-9 style="margin-bottom: 40px"><p>上传图片数: {{ uploader.queue.length }}</p><table class=table><thead><tr><th width=50%>名称</th><th ng-show=uploader.isHTML5>大小</th><th ng-show=uploader.isHTML5>进度</th><th>状态</th><th>动作</th></tr></thead><tbody><tr ng-repeat="item in uploader.queue"><td><strong>{{ item.file.name }}</strong><!-- Image preview --><!--auto height--><!--<div ng-thumb="{ file: item.file, width: 100 }"></div>--><!--auto width--><div ng-show=uploader.isHTML5 ng-thumb="{ file: item.file, height: 100 }"></div><!--fixed width and height --><!--<div ng-thumb="{ file: item.file, width: 100, height: 100 }"></div>--></td><td ng-show=uploader.isHTML5 nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show=uploader.isHTML5><div class=progress style="margin-bottom: 0"><div class=progress-bar role=progressbar ng-style="{ \'width\': item.progress + \'%\' }"></div></div></td><td class=text-center><span ng-show=item.isSuccess><i class="glyphicon glyphicon-ok"></i></span> <span ng-show=item.isCancel><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show=item.isError><i class="glyphicon glyphicon-remove"></i></span></td><td nowrap><button type=button class="btn btn-success btn-xs" ng-click=item.upload() ng-disabled="item.isReady || item.isUploading || item.isSuccess"><span class="glyphicon glyphicon-upload"></span> 上传</button> <button type=button class="btn btn-warning btn-xs" ng-click=item.cancel() ng-disabled=!item.isUploading><span class="glyphicon glyphicon-ban-circle"></span> 取消</button> <button type=button class="btn btn-danger btn-xs" ng-click=item.remove()><span class="glyphicon glyphicon-trash"></span> 移除</button></td></tr></tbody></table><div><p>队列进度:<div class=progress><div class=progress-bar role=progressbar ng-style="{ \'width\': uploader.progress + \'%\' }"></div></div></p><button type=button class="btn btn-success btn-s" ng-click=uploader.uploadAll() ng-disabled=!uploader.getNotUploadedItems().length><span class="glyphicon glyphicon-upload"></span> 全部上传</button> <button type=button class="btn btn-warning btn-s" ng-click=uploader.cancelAll() ng-disabled=!uploader.isUploading><span class="glyphicon glyphicon-ban-circle"></span> 全部取消</button> <button type=button class="btn btn-danger btn-s" ng-click=uploader.clearQueue() ng-disabled=!uploader.queue.length><span class="glyphicon glyphicon-trash"></span> 全部删除</button></div></div></div>'),a.put("app/plans/plans.center.html",'<table class=ytop><tr><td><div><div class="media-left media1"><a href=#><img class=media-object src={{wxUser.head_img}}></a></div><div class="media-body mylht"><p class=plsj>{{wxUser.nick_name}}</p><p class=pldd>截止目前，你已使用订单量为{{wxUser.num.pay}}，剩余可使用订单量<span class=ts>{{numbers-wxUser.num.pay}}</span></p><!--需要加日期字段--><p class=pldd>{{wxUser.expire | date:\'yyyy年MM月dd日\'}}到期</p><span ng-bind="numbers?\'\':\'暂无购买记录\'" ng-class="{\'text-danger\':po_ct_diff}">numbers</span></div></div></td></tr></table><div class="well well-sm well-plan"><div class=czzx><span class=czzxp ng-click="chooseCombo(\'order\')" ng-class="{active:pay.combo===\'order\'}">充值套餐</span><!--<span class="czzxp"\n      ng-click="chooseCombo(\'counselor\')"\n      ng-class="{active:pay.combo===\'counselor\'}">增值服务</span>--></div><form class="form-horizontal formh"><!--选充值套餐显示--><div class="form-group myfp" ng-if="pay.combo===\'order\'"><div class=mycolxs3 ng-repeat="plan in plans"><div class="panel panel-plan mypel" ng-class="{\'panel-danger\':selected === $index}" ng-click=selPlan()><p class=ddsyl>{{plan.name}}</p><h3 class=h3>{{plan.price | currency}}</h3></div></div></div><!--选增值服务显示--><div class=zztc ng-if="pay.combo===\'counselor\'"><img class=dgzxing1 ng-src="{{appConfig.uriImg+\'/home/ymyimg/dgzximg1.png\'}}"><div class=zzfwdiv><p>{{plan.name}}&nbsp;&nbsp;&nbsp;{{plan.price | currency}}</p><img ng-src="{{appConfig.uriImg+\'/home/ymyimg/dgzximg2.png\'}}"></div></div><div class="form-group myfp"><ul class=zffsul><li ng-click="choosePay(\'wepay\')" ng-class="{myname:pay.type===\'wepay\'}">微信支付</li><li ng-click="choosePay(\'alipay\')" ng-class="{myname:pay.type===\'alipay\'}">支付宝转账</li><li ng-click="choosePay(\'manpay\')" ng-class="{myname:pay.type===\'manpay\'}">对公付款</li><li style="width: 55%"></li></ul><!--微信付款--><div class="wxdiv myydiv" ng-if="pay.type === \'wepay\'"><img class=wxzfsm ng-src="{{appConfig.uriImg+\'/home/ymyimg/wxsmzf.png\'}}"><div class=zongsty><div class=wxdiv1><span>实际付款：</span> <span class=bigzi>{{plan.price | currency}}</span></div><div ng-click=payModal() class=wxqrzf><a href=#>确认支付</a></div><a href={{appConfig.uriImg}}/contract/91%E6%8B%BC%E5%9B%A2%E8%90%A5%E9%94%80%E9%A1%BE%E9%97%AE%E5%A2%9E%E9%95%BF%E6%9C%8D%E5%8A%A1%E5%8D%8F%E8%AE%AE.pdf target=_blank class=fwxy>《91拼团营销顾问增长服务协议》</a></div></div><!--支付宝--><div class="zfbdiv myydiv" ng-if="pay.type === \'alipay\'"><img class=zfbdivimg ng-src="{{appConfig.uriImg+\'/serve/imgs/alipay_ico.png\'}}" style=width:120px><ul class=zfbdivul><li>支付宝账号昵称</li><li>账号</li></ul><ul class=zfbdivul1><li>北京蜘蛛工社移动科技有限公司</li><li>zzgs1803@163.com</li></ul><ul><li class=dgp>支付宝转账完成后，请将以下两个信息：</li><li class=dgp1>开通公众号名称；</li><li class=dgp1>您的支付宝账号；</li><li class=dgp2>发送到91客服微信：yuanwei9008</li></ul></div><!--对公汇款--><div class="dgzffsdiv myydiv" ng-if="pay.type === \'manpay\'"><ul class=dgzffsdivul><li>账户名</li><li>账号</li><li>开户行</li></ul><ul class=dgyhname><li>北京蜘蛛工社移动科技有限公司</li><li>11001018800053011997</li><li>建行和平里支行</li></ul><ul><li class=dgp>完成汇款后，请将以下三个信息：</li><li class=dgp1>开通公众号名称；</li><li class=dgp1>个人姓名或公司名称；</li><li class=dgp1>银行回单截图或凭证照片；</li><li class=dgp2>发送到91客服微信：yuanwei9008</li></ul></div></div></form></div>'),a.put("app/plans/plans.html",'<div ui-view=""><a ui-sref=plans.center>套餐中心</a> <a ui-sref=plans.list>套餐列表</a> <a ui-sref=plans.service>服务套餐</a></div>'),a.put("app/plans/plans.qrcode.html",'<div class=modal-header><button class=close ng-click=cancel()><span>&times;</span></button><h4 class=modal-title>&nbsp;</h4></div><div class=modal-body><div class="thumbnail plan-thumbnail"><p class=saoma>使用微信支付</p><span class=saomaspan>{{plan.price | currency}}</span> <img src={{qrcode}}><div class="caption text-center blue"><p class=bluep>请使用微信扫一扫</p><p class=bluep>扫描二维码完成支付</p></div></div></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=cancel()>关闭</button> <button type=button class="btn btn-primary" ng-click=finishPay()>完成支付</button></div>'),a.put("app/suborder/suborder.list.html",'<div><form class="form-horizontal order-warp order-warp1" name=forms.suborderForm ng-submit=searchByCondition() novalidate><div class="row order-head"><div class="col-xs-5 order-time"><div class="start col-xs-5"><div class=form-group ng-class="{ \'has-error\' : forms.suborderForm.starttime.$invalid && submitted}"><div class="input-group pull-left"><input class=form-control name=starttime uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model=status.startTime is-open=status.startTimePopup.opened close-text=Close placeholder=起始时间 alt-input-formats="altInputFormats"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=openStarttimePopup()><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 font-span"><span>至</span></div><div class="col-xs-5 end"><div class=form-group ng-class="{ \'has-error\' : forms.suborderForm.endtime.$invalid && submitted}"><div class="input-group pull-left"><input class=form-control name=endtime uib-datepicker-popup="{{\'dd-MMMM-yyyy\'}}" ng-model=status.endTime is-open=status.endTimePopup.opened close-text=Close placeholder=结束时间 alt-input-formats="altInputFormats"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=openEndtimePopup()><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class="col-xs-1 btn-col1"><button type=submit class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div></div><div class=col-xs-3><input type=number class="form-control form-number" ng-model=status.serial placeholder=输入订单号> <button type=submit class="btn btn-primary btn-outline btn-sm btn-sub"><i class="fa fa-search"></i></button></div><!--<div class="col-xs-3">\n          <input type="text" class="form-control form-number" ng-model="status.order" placeholder="输入订单号">\n          <button type="submit" class="btn btn-primary btn-outline btn-sm btn-sub">搜索</button>\n      	</div>--><div class="col-xs-1 form-pagi"><nosy-pagi pagi=pagi></nosy-pagi></div><div class="col-xs-3 print"><button type=button class="btn btn-primary btn-outline btn-sm" ng-click=exportSuborders()>导出订单</button></div></div><!--<div class="row print">\r\n      	<div class="col-xs-12">\r\n      		<button type="button" class="btn btn-primary btn-outline btn-sm" ng-click="exportCards()" >下载语音码</button>\r\n        	<button type="button" class="btn btn-primary btn-outline btn-sm" ng-click="exportSuborders()">导出订单</button>\r\n      	</div>\r\n      </div>--></form><!--订单筛选--><div class="from-group online online1"><div class="col-xs-6 left"><div class="btn-group btn-danger btn-group-sm"><label class="btn btn-primary" ng-model=status.shipping uib-btn-radio="\'all\'">全部子订单</label><label class="btn btn-primary" ng-model=status.shipping uib-btn-radio="\'toshipping\'">待发货</label><label class="btn btn-primary" ng-model=status.shipping uib-btn-radio="\'shipping\'">已发货</label></div></div><div class="col-xs-6 right"><nosy-pagi pagi=pagi></nosy-pagi></div></div><table class="table suborder"><thead><tr><th width=15%>子订单单号</th><th width=10%>订单号</th><th width=12%>商品</th><th width=10%>生成时间</th><th>收货人</th><th width=10%>发货管理</th><th width=10%>语音码</th></tr></thead><tbody><tr ng-repeat="suborder in suborders"><td>{{ suborder.id || suborder._id }}</td><td>{{ suborder.order.serial }}</td><td>{{ suborder.order.gift.info.name }}</td><td>{{ suborder.fillinDate | date: \'yyyy-MM-dd\' }}</td><td><span>{{ suborder.consignee }}</span> <span>{{ suborder.telephone}}</span> <span>{{ suborder.address }}</span></td><td ng-if=!suborder.status.shipping><input class=ship type=button ng-click=shippingModel(suborder) value="发货"></td><td ng-if=suborder.status.shipping><span class=ifship>已发货</span></td><td><input class=upload type=button ng-click=exportCard(suborder) value="下载"></td></tr></tbody></table></div>'),a.put("app/wechat/autoreply.html","<form name=replyForm ng-submit=post() class=form-horizontal novalidate><div class=form-group ng-class=\"{'has-success': replyForm['gift.detail'].$valid && submitted,\n                                      'has-error' : replyForm['gift.detail'].$invalid && submitted }\"><textarea type=text name=add_friend_autoreply_info.content class=form-control placeholder=输入关注自动回复内容 ng-model=reply.content.add_friend_autoreply_info.content required msd-elastic></textarea><p ng-show=\"replyForm['add_friend_autoreply_info.content'].$error.required && submitted\" class=help-block>自动回复内容必须填写.</p></div><div class=form-group style=background-color:transparent><div class=col-xs-3><button type=submit class=\"btn btn-primary btn-block\" style=margin-left:-15px>保存</button></div></div></form>"),a.put("app/wechat/default.html","微信相关设置"),a.put("app/wechat/menu.html",'<div class="panel panel-default"><div class="panel-body text-right"><button class="btn btn-danger btn-sm" ng-click=saveMenu()>保存</button> <button class="btn btn-danger btn-sm" ng-click=setMenu()>设置</button></div><div class=row><div class=col-xs-7><textarea class=form-control ng-model=menu msd-elastic></textarea></div><div class=col-xs-5><div class=thumbnail><img holder="holder.js/100px380?text=菜单预览&bg=F3F2F2&fg=ffffff" class="img-responsive center-block"><div class=text-center><div class="btn-group btn-group-justified dropup"><div class=btn-group ng-repeat="menu in menus.button"><button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown><a href="{{menu.type}}:{{menu.key || menu.url}}">{{menu.name}}</a> <span class=caret ng-if=menu.sub_button></span></button><ul class=dropdown-menu ng-if=menu.sub_button><li ng-repeat="submenu in menu.sub_button"><a href="{{submenu.type}}:{{submenu.key || submenu.url}}">{{submenu.name}}</a></li></ul></div></div></div></div></div></div></div>'),a.put("app/wechat/pay.html","<form class=form-horizontal name=form ng-submit=post(form) novalidate><div class=form-group ng-class=\"{ 'has-success': form['pay.mch_id'].$valid && submitted,\n                                      'has-error' : form['pay.mch_id'].$invalid && submitted }\"><label for=pay.mch_id class=\"col-xs-2 control-label\">商户号</label><div class=col-xs-10><input class=form-control ng-model=pay.mch_id name=pay.mch_id placeholder=请输入微信支付分配的商户号 required><p ng-show=\"form['pay.mch_id'].$error.required && submitted\" class=help-block>商户号必须填写.</p></div></div><div class=form-group ng-class=\"{ 'has-success': form['pay.key'].$valid && submitted,\n"+'                                      \'has-error\' : form[\'pay.key\'].$invalid && submitted }"><label for=pay.key class="col-xs-2 control-label">API密钥</label><div class=col-xs-10><input class=form-control name=pay.key ng-model=pay.key placeholder=请输入API签名密钥 required> <span class=help-block ng-if=!submitted><span class=text-danger>安全考虑，设置后将不再显示！</span></span><p ng-show="form[\'pay.key\'].$error.required && submitted" class=help-block>API签名密钥必须填写.</p></div></div><div class=form-group><label for=pay.file class="col-xs-2 control-label">API证书</label><div class=col-xs-10><!--<input type="file" class="form-control" name="pfx"/>--><file-field class="btn btn-primary" ng-model=uploadFile>选择API证书</file-field><span class=help-block><span class=text-danger>下载包里的.p12文件</span></span></div></div><div class=form-group><div class="col-xs-offset-2 col-xs-2"><button type=submit class="btn btn-primary btn-block">保存</button></div></div></form><div class=row style=margin-top:100px><div class="col-xs-offset-2 col-xs-10"><h5>详细微信支付设置请参考:</h5><ol><li>微信支付|商户平台: <a href="http://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=3_1" target=_blank>设置支付账户</a></li><li>公众号: <a href="http://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_3" target=_blank>支付开发步骤</a><ul><li>支付授权目录: {{wxUser.appid}}.{{clientUri}}/wepay/</li></ul></li><li>公众号: <a href=http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html#.E6.AD.A5.E9.AA.A4.E4.B8.80.EF.BC.9A.E7.BB.91.E5.AE.9A.E5.9F.9F.E5.90.8D target=_blank>设置JS接口安全域名</a><ul><li>域名: {{wxUser.appid}}.{{clientUri}}</li></ul></li><li>公众号: <a href=http://jingyan.baidu.com/article/20095761b8a15dcb0721b4dd.html target=_blank>设置业务域名</a><ul><li>域名: {{wxUser.appid}}.{{clientUri}}</li></ul></li></ol></div></div>'),a.put("app/wechat/wechat.html",'<div ui-view="">微信管理</div>'),a.put("components/footer.html",'<div class=container><div class=row><div class=col-xs-3>联系我们<br>GET IN TOUCH</div><div class=col-xs-3>合作联络<br>010-84988362</div><div class=col-xs-3>关注我们的微信号<br><a href=# tooltip-html=qrcode><i class="fa fa-weixin"></i> 送你</a></div><div class=col-xs-3>京ICP证060911</div></div></div>'),a.put("components/header.html",'<div class=container ng-controller=MainCtrl><div class=row><div class=col-xs-4><img src=assets/images/39c56b60.snlogo.png class=img-responsive></div><div class=col-xs-8><div class="navbar navbar-default gift-navbar" ng-controller=NavbarCtrl><div class=container-fluid><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-if=wxUser><a ui-sref=main>{{wxUser.nick_name}}</a></li><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}" ng-if=wxUser><a ui-sref={{item.link}}>{{item.title}}</a></li><li ng-if=!wxUser><img src=assets/images/d31e5b55.icon24_wx_button.png class="img-responsive center-block wx-tp-lg-btn" ng-click=wechat()></li></ul></div></div></div></div></div></div>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>serve</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li></ul></div></div></div>'),a.put("components/sidebar.html",'<nav class="gift-sidebar hidden-print affix-top" ng-controller=MenuCtrl style=margin-top:39px><ul class="nav sidenav"><li ng-repeat="menu in menus" ng-class="{active: isActive(menu.link)}"><a ui-sref={{menu.link}}>{{menu.title}}</a></li></ul></nav>')}]);