{"version":3,"sources":["app.js"],"names":["process","env","NODE_ENV","express","require","config","app","use","req","res","next","get","protocol","hostname","url","redirect","server","createServer","listen","port","ip","console","log","exports","module"],"mappings":"AAAA;;;;AAIA;;AAEA;;AACAA,QAAQC,GAAR,CAAYC,QAAZ,GAAuBF,QAAQC,GAAR,CAAYC,QAAZ,IAAwB,aAA/C;;AAEA,IAAIC,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASD,QAAQ,sBAAR,CAAb;AACA;AACA,IAAIE,MAAMH,SAAV;AACAG,IAAIC,GAAJ,CAAQ,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAwB;AAC9B,MAAIT,MAAMK,IAAIK,GAAJ,CAAQ,KAAR,CAAV;AACA,MAAGH,IAAII,QAAJ,KAAiB,MAAjB,IAAyBJ,IAAIK,QAAJ,KAAiB,kBAA7C,EAAgE;AAC9D,QAAIC,MAAM,aAAWN,IAAIK,QAAf,GAAwBL,IAAIM,GAAtC;AACAL,QAAIM,QAAJ,CAAaD,GAAb;AACA;AACD;AACDJ;AACD,CARD;AASA,IAAIM,SAASZ,QAAQ,MAAR,EAAgBa,YAAhB,CAA6BX,GAA7B,CAAb;AACAF,QAAQ,kBAAR,EAA4BE,GAA5B;AACAF,QAAQ,UAAR,EAAoBE,GAApB;;AAEA;AACAU,OAAOE,MAAP,CAAcb,OAAOc,IAArB,EAA2Bd,OAAOe,EAAlC,EAAsC,YAAY;AAChDC,UAAQC,GAAR,CAAY,0BAAZ,EAAwChB,IAAIK,GAAJ,CAAQ,KAAR,CAAxC,EAAwDN,OAAOc,IAA/D;AACD,CAFD;;AAIA;AACAI,UAAUC,OAAOD,OAAP,GAAiBjB,GAA3B","file":"app.js","sourcesContent":["/**\n * Main application file\n */\n\n'use strict';\n\n// Set default node environment to development\nprocess.env.NODE_ENV = process.env.NODE_ENV || 'development';\n\nvar express = require('express');\nvar config = require('./config/environment');\n// Setup server\nvar app = express();\napp.use(function(req, res, next){\n  var env = app.get('env');\n \tif(req.protocol === 'http'&&req.hostname === 'www.91songli.com'){\n \t \tvar url = 'https://'+req.hostname+req.url;\n    res.redirect(url);\n    return;\n  }\n  next();\n});\nvar server = require('http').createServer(app);\nrequire('./config/express')(app);\nrequire('./routes')(app);\n\n// Start server\nserver.listen(config.port, config.ip, function () {\n  console.log('送你微信第三方平台以 %s 模式监听 %d 端口', app.get('env'), config.port);\n});\n\n// Expose app\nexports = module.exports = app;\n"],"sourceRoot":"/source/"}